
-- Obfuscated (base64-wrapped) script
-- Generated by ChatGPT at user request. This will decode and execute the original Lua payload.
local b64 = [[bG9jYWwgdjAgPSB7fQ0KbG9jYWwgbF9SdW5TZXJ2aWNlXzAgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKTsNCmxvY2FsIGxfRGVicmlzXzAgPSBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOw0KdjAuTG9hZCA9IGZ1bmN0aW9uKF8sIHY0LCB2NSwgdjYsIHY3LCB2OCwgdjkpIC0tW1sgTGluZTogOCBdXSAtLVtbIE5hbWU6IExvYWQgXV0NCiAgICAgICAgLS0gdXB2YWx1ZXM6IGxfUnVuU2VydmljZV8wIChjb3B5KQ0KICAgICAgICBpZiB2NSA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBlbHNlaWYgdjQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgdjYgPSB2NiBvciAwOw0KICAgICAgICAgICAgdjkgPSB2OSBvciAxOw0KICAgICAgICAgICAgbG9jYWwgbF9IdW1hbm9pZF8wID0gdjQ6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpOw0KICAgICAgICAgICAgaWYgbF9IdW1hbm9pZF8wID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgbF9BbmltYXRpb25Db250cm9sbGVyXzAgPSB2NDpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkFuaW1hdGlvbkNvbnRyb2xsZXIiKTsNCiAgICAgICAgICAgICAgICBpZiBsX0FuaW1hdGlvbkNvbnRyb2xsZXJfMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxfSHVtYW5vaWRfMCA9IGxfQW5pbWF0aW9uQ29udHJvbGxlcl8wOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGVuZDsNCiAgICAgICAgICAgIGVuZDsNCiAgICAgICAgICAgIGlmIGxfSHVtYW5vaWRfMCB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgbF9BbmltYXRvcl8wID0gbF9IdW1hbm9pZF8wOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiQW5pbWF0b3IiKTsNCiAgICAgICAgICAgICAgICBpZiBub3QgbF9BbmltYXRvcl8wIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbF9BbmltYXRvcl8wID0gSW5zdGFuY2UubmV3KCJBbmltYXRvciIpOw0KICAgICAgICAgICAgICAgICAgICBsX0FuaW1hdG9yXzAuUGFyZW50ID0gbF9IdW1hbm9pZF8wOw0KICAgICAgICAgICAgICAgIGVuZDsNCiAgICAgICAgICAgICAgICBsb2NhbCB2MTMgPSBsX0FuaW1hdG9yXzA6TG9hZEFuaW1hdGlvbih2NSk7DQogICAgICAgICAgICAgICAgbG9jYWwgbF9BY3Rpb25fMCA9IEVudW0uQW5pbWF0aW9uUHJpb3JpdHkuQWN0aW9uOw0KICAgICAgICAgICAgICAgIGxfQWN0aW9uXzAgPSBpZiB2NyA9PSBuaWwgdGhlbiB2MTMuUHJpb3JpdHkgb3IgbF9BY3Rpb25fMCBlbHNlIHY3Ow0KICAgICAgICAgICAgICAgIGlmIHY4ID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIHY4ID0gdjEzLkxvb3BlZDsNCiAgICAgICAgICAgICAgICBlbmQ7DQogICAgICAgICAgICAgICAgdjEzLkxvb3BlZCA9IHY4Ow0KICAgICAgICAgICAgICAgIHYxMy5Qcmlvcml0eSA9IGxfQWN0aW9uXzA7DQogICAgICAgICAgICAgICAgdjEzOkFkanVzdFNwZWVkKHY5KTsNCiAgICAgICAgICAgICAgICB2MTMuU3RvcHBlZDpPbmNlKGZ1bmN0aW9uKCkgLS1bWyBMaW5lOiA0OCBdXQ0KICAgICAgICAgICAgICAgICAgICAtLSB1cHZhbHVlczogdjEzIChjb3B5KQ0KICAgICAgICAgICAgICAgICAgICB2MTM6RGVzdHJveSgpOw0KICAgICAgICAgICAgICAgIGVuZCk7DQogICAgICAgICAgICAgICAgaWYgbF9SdW5TZXJ2aWNlXzA6SXNTdHVkaW8oKSB0aGVuDQoNCiAgICAgICAgICAgICAgICBlbmQ7DQogICAgICAgICAgICAgICAgcmV0dXJuIHYxMzsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICBlbmQ7DQogICAgICAgIGVuZDsNCiAgICBlbmQNCg0KdjAubG9hZEFuaW1hdGlvbiA9IGZ1bmN0aW9uKHYxNywgdjE4LCB2MTksIHYyMCwgdjIxLCB2MjIpIC0tW1sgTGluZTogNTkgXV0gLS1bWyBOYW1lOiBsb2FkQW5pbWF0aW9uIF1dDQogICAgLS0gdXB2YWx1ZXM6IHYxNSAoY29weSkNCiAgICBsb2NhbCB2MjMgPSB2MDpMb2FkKHYxNywgdjE4LCB2MTksIHYyMCwgdjIxLCB2MjIpOw0KICAgIGlmIG5vdCB2MjMgdGhlbg0KICAgICAgICByZXR1cm47DQogICAgZWxzZQ0KICAgICAgICByZXR1cm4gdjIzOw0KICAgIGVuZDsNCmVuZDsNCg0KdjAucGxheSA9IGZ1bmN0aW9uKHYzLCB2NCwgdjUsIHY2KQ0KICAgICAgICBpZiB2MyA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICB2NSA9IHY1IG9yIHt9Ow0KICAgICAgICAgICAgaWYgdHlwZW9mKHYzKSA9PSAidGFibGUiIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgdjcgPSAxLCAjdjMgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgdjNbdjddID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUodjMsIHY3KTsNCiAgICAgICAgICAgICAgICAgICAgZW5kOw0KICAgICAgICAgICAgICAgIGVuZDsNCiAgICAgICAgICAgICAgICB2MyA9IHYzW21hdGgucmFuZG9tKDEsICN2MyldOkNsb25lKCk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdjMgPSB2MzpDbG9uZSgpOw0KICAgICAgICAgICAgZW5kOw0KICAgICAgICAgICAgZm9yIHY4LCB2OSBpbiBwYWlycyh2NSkgZG8NCiAgICAgICAgICAgICAgICB2M1t2OF0gPSB2OTsNCiAgICAgICAgICAgIGVuZDsNCiAgICAgICAgICAgIHYzLlBhcmVudCA9IHY0Ow0KICAgICAgICAgICAgaWYgdjYgdGhlbg0KICAgICAgICAgICAgICAgIHYzLlBsYXlPblJlbW92ZSA9IHRydWU7DQogICAgICAgICAgICAgICAgdjM6RGVzdHJveSgpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHYzOlBsYXkoKTsNCiAgICAgICAgICAgICAgICBpZiBsX1J1blNlcnZpY2VfMDpJc1NlcnZlcigpID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiB2My5Mb29wZWQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbF9EZWJyaXNfMDpBZGRJdGVtKHYzLCB2My5UaW1lTGVuZ3RoICsgMSk7DQogICAgICAgICAgICAgICAgICAgIGVuZDsNCiAgICAgICAgICAgICAgICBlbHNlaWYgbF9SdW5TZXJ2aWNlXzA6SXNDbGllbnQoKSA9PSB0cnVlIGFuZCB2My5Mb29wZWQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICB2My5FbmRlZDpDb25uZWN0KGZ1bmN0aW9uKCkgLS1bWyBMaW5lOiA0MSBdXQ0KICAgICAgICAgICAgICAgICAgICAgICAgLS0gdXB2YWx1ZXM6IHYzIChyZWYpDQogICAgICAgICAgICAgICAgICAgICAgICB2MzpEZXN0cm95KCk7DQogICAgICAgICAgICAgICAgICAgIGVuZCk7DQogICAgICAgICAgICAgICAgZW5kOw0KICAgICAgICAgICAgZW5kOw0KICAgICAgICAgICAgcmV0dXJuIHYzOw0KICAgICAgICBlbmQ7DQogICAgZW5kDQogICAgDQoNCmxvY2FsIFJlcGxpY2F0ZWRTdG9yYWdlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpDQpsb2NhbCBCeXRlTmV0UmVsaWFibGUgPSBSZXBsaWNhdGVkU3RvcmFnZTpXYWl0Rm9yQ2hpbGQoIkJ5dGVOZXRSZWxpYWJsZSIpDQoNCmxvY2FsIGZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlcihwYWNrZXRUeXBlOiBudW1iZXIsIGlucHV0U3RyaW5nOiBzdHJpbmcsIGZsYWc6IG51bWJlcik6IGJ1ZmZlcg0KDQogICAgbG9jYWwgc3RyaW5nQnl0ZXMgPSB7c3RyaW5nLmJ5dGUoaW5wdXRTdHJpbmcsIDEsICNpbnB1dFN0cmluZyl9DQogICAgbG9jYWwgYnVmZmVyU2l6ZSA9IDEgKyAxICsgMSArICNpbnB1dFN0cmluZyArIDENCiAgICBsb2NhbCBiID0gYnVmZmVyLmNyZWF0ZShidWZmZXJTaXplKQ0KICAgIA0KICAgIGxvY2FsIG9mZnNldCA9IDANCiAgICANCiAgICBidWZmZXIud3JpdGV1OChiLCBvZmZzZXQsIHBhY2tldFR5cGUpDQogICAgb2Zmc2V0ICs9IDENCiAgICANCiAgICBidWZmZXIud3JpdGV1OChiLCBvZmZzZXQsICNpbnB1dFN0cmluZykNCiAgICBvZmZzZXQgKz0gMQ0KICAgIA0KICAgIGJ1ZmZlci53cml0ZXU4KGIsIG9mZnNldCwgMCkNCiAgICBvZmZzZXQgKz0gMQ0KICAgIA0KICAgIGZvciBpLCBieXRlIGluIGlwYWlycyhzdHJpbmdCeXRlcykgZG8NCiAgICAgICAgYnVmZmVyLndyaXRldTgoYiwgb2Zmc2V0ICsgaSAtIDEsIGJ5dGUpDQogICAgZW5kDQogICAgb2Zmc2V0ICs9ICNpbnB1dFN0cmluZw0KICAgIA0KICAgIGJ1ZmZlci53cml0ZXU4KGIsIG9mZnNldCwgZmxhZykNCiAgICANCiAgICByZXR1cm4gYg0KZW5kDQoNCmxvY2FsIGZ1bmN0aW9uIGZpcmVFdmVudChwYWNrZXRUeXBlOiBudW1iZXIsIGlucHV0U3RyaW5nOiBzdHJpbmcsIGZsYWc6IG51bWJlciwgYXJnczogdGFibGUpDQogICAgbG9jYWwgYnVmZmVyID0gY3JlYXRlQnVmZmVyKHBhY2tldFR5cGUsIGlucHV0U3RyaW5nLCBmbGFnKQ0KICAgIGZpcmVzaWduYWwoQnl0ZU5ldFJlbGlhYmxlLk9uQ2xpZW50RXZlbnQsIGJ1ZmZlciwge2FyZ3N9KQ0KZW5kDQoNCmxvY2FsIHBhY2tldFR5cGUgPSAxNw0KbG9jYWwgZmxhZyA9IDEgDQpwY2FsbChmdW5jdGlvbigpDQogICAgcmVxdWlyZShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikucHJlbG9hZGFuaW1hdGlvbnMpDQplbmQpDQpnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMjAzNjE1Njk1NDg3MDQiKQ0KZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTMwNzU1MDk4OTgwODk4IikNCk9yaW9uTGliID0gbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoJ2h0dHBzOi8vc2lyaXVzLm1lbnUvcmF5ZmllbGQnKSkoKQ0Ka2V5ID0gbmlsDQpXaW5kb3cgPSBPcmlvbkxpYjpDcmVhdGVXaW5kb3coew0KICAgIE5hbWUgPSAiTGxveWQgSFVCIHwgQXp1cmUgTGF0Y2ggRmFrZSBTdHlsZXMvTVZQcyBTY3JpcHQiLA0KICAgIEljb24gPSAwLCAtLSBJY29uIGluIFRvcGJhci4gQ2FuIHVzZSBMdWNpZGUgSWNvbnMgKHN0cmluZykgb3IgUm9ibG94IEltYWdlIChudW1iZXIpLiAwIHRvIHVzZSBubyBpY29uIChkZWZhdWx0KS4NCiAgICBMb2FkaW5nVGl0bGUgPSAiTGxveWQgSFVCIiwNCiAgICBMb2FkaW5nU3VidGl0bGUgPSAiYnkgbGxveWRnYXJtYWRvbjQzIGFuZCBrZWF0b25tYV9zayIsDQogICAgVGhlbWUgPSAiRGFya0JsdWUiLCAtLSBDaGVjayBodHRwczovL2RvY3Muc2lyaXVzLm1lbnUvcmF5ZmllbGQvY29uZmlndXJhdGlvbi90aGVtZXMNCiANCiAgICBEaXNhYmxlUmF5ZmllbGRQcm9tcHRzID0gZmFsc2UsDQogICAgRGlzYWJsZUJ1aWxkV2FybmluZ3MgPSBmYWxzZSwgLS0gUHJldmVudHMgUmF5ZmllbGQgZnJvbSB3YXJuaW5nIHdoZW4gdGhlIHNjcmlwdCBoYXMgYSB2ZXJzaW9uIG1pc21hdGNoIHdpdGggdGhlIGludGVyZmFjZQ0KIA0KICAgIENvbmZpZ3VyYXRpb25TYXZpbmcgPSB7DQogICAgICAgRW5hYmxlZCA9IHRydWUsDQogICAgICAgRm9sZGVyTmFtZSA9ICJBenVyZSBMYXRjaCIsIC0tIENyZWF0ZSBhIGN1c3RvbSBmb2xkZXIgZm9yIHlvdXIgaHViL2dhbWUNCiAgICAgICBGaWxlTmFtZSA9ICJMbG95ZCBIdWIiDQogICAgfSwNCiANCiAgICBEaXNjb3JkID0gew0KICAgICAgIEVuYWJsZWQgPSB0cnVlLCAtLSBQcm9tcHQgdGhlIHVzZXIgdG8gam9pbiB5b3VyIERpc2NvcmQgc2VydmVyIGlmIHRoZWlyIGV4ZWN1dG9yIHN1cHBvcnRzIGl0DQogICAgICAgSW52aXRlID0gImhZRVVYMzc2eFoiLCAtLSBUaGUgRGlzY29yZCBpbnZpdGUgY29kZSwgZG8gbm90IGluY2x1ZGUgZGlzY29yZC5nZy8uIEUuZy4gZGlzY29yZC5nZy8gQUJDRCB3b3VsZCBiZSBBQkNEDQogICAgICAgUmVtZW1iZXJKb2lucyA9IHRydWUgLS0gU2V0IHRoaXMgdG8gZmFsc2UgdG8gbWFrZSB0aGVtIGpvaW4gdGhlIGRpc2NvcmQgZXZlcnkgdGltZSB0aGV5IGxvYWQgaXQgdXANCiAgICB9LA0KIA0KICAgIEtleVN5c3RlbSA9IHRydWUsIC0tIFNldCB0aGlzIHRvIHRydWUgdG8gdXNlIG91ciBrZXkgc3lzdGVtDQogICAgS2V5U2V0dGluZ3MgPSB7DQogICAgICAgVGl0bGUgPSAiTGxveWQgSHViIiwNCiAgICAgICBTdWJ0aXRsZSA9ICJLZXkgU3lzdGVtIiwNCiAgICAgICBOb3RlID0gImtleSBpbiBkaXNjb3JkIGJ0dyAoY2hhbmdlcyBldmVyeSAzIGRheXMuKSIsIC0tIFVzZSB0aGlzIHRvIHRlbGwgdGhlIHVzZXIgaG93IHRvIGdldCBhIGtleQ0KICAgICAgIEZpbGVOYW1lID0gIktleSIsIC0tIEl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSBzb21ldGhpbmcgdW5pcXVlIGFzIG90aGVyIHNjcmlwdHMgdXNpbmcgUmF5ZmllbGQgbWF5IG92ZXJ3cml0ZSB5b3VyIGtleSBmaWxlDQogICAgICAgU2F2ZUtleSA9IHRydWUsIC0tIFRoZSB1c2VyJ3Mga2V5IHdpbGwgYmUgc2F2ZWQsIGJ1dCBpZiB5b3UgY2hhbmdlIHRoZSBrZXksIHRoZXkgd2lsbCBiZSB1bmFibGUgdG8gdXNlIHlvdXIgc2NyaXB0DQogICAgICAgR3JhYktleUZyb21TaXRlID0gZmFsc2UsIC0tIElmIHRoaXMgaXMgdHJ1ZSwgc2V0IEtleSBiZWxvdyB0byB0aGUgUkFXIHNpdGUgeW91IHdvdWxkIGxpa2UgUmF5ZmllbGQgdG8gZ2V0IHRoZSBrZXkgZnJvbQ0KICAgICAgIEtleSA9IHsiekI3a0wyeFQ5alFwVzF2WThyRDBhRiJ9IC0tIExpc3Qgb2Yga2V5cyB0aGF0IHdpbGwgYmUgYWNjZXB0ZWQgYnkgdGhlIHN5c3RlbSwgY2FuIGJlIFJBVyBmaWxlIGxpbmtzIChwYXN0ZWJpbiwgZ2l0aHViIGV0Yykgb3Igc2ltcGxlIHN0cmluZ3MgKCJoZWxsbyIsImtleTIyIikNCiAgICB9DQogfSkNCklzYWdpID0gV2luZG93OkNyZWF0ZVRhYigiSXNhZ2kiLCA0NDgzMzQ1OTk4KQ0KIE5hZ2kgPSBXaW5kb3c6Q3JlYXRlVGFiKCJOYWdpIiwgNDQ4MzM0NTk5OCkNCiBDaGlnaXJpID0gV2luZG93OkNyZWF0ZVRhYigiQ2hpZ2lyaSIsIDQ0ODMzNDU5OTgpDQogU2hpZG91ID0gV2luZG93OkNyZWF0ZVRhYigiU2hpZG91IiwgNDQ4MzM0NTk5OCkNCiBTYWUgPSBXaW5kb3c6Q3JlYXRlVGFiKCJTYWUiLCA0NDgzMzQ1OTk4KQ0KIFJpbiA9IFdpbmRvdzpDcmVhdGVUYWIoIlJpbiIsIDQ0ODMzNDU5OTgpDQogS2Fpc2VyID0gV2luZG93OkNyZWF0ZVRhYigiS2Fpc2VyIiwgNDQ4MzM0NTk5OCkNCiBEb25Mb3JlbnpvID0gV2luZG93OkNyZWF0ZVRhYigiRG9uIExvcmVuem8iLCA0NDgzMzQ1OTk4KQ0KIEdhZ2FtYXJ1ID0gV2luZG93OkNyZWF0ZVRhYigiR2FnYW1hcnUiLCA0NDgzMzQ1OTk4KQ0KIEFpa3UgPSBXaW5kb3c6Q3JlYXRlVGFiKCJBaWt1IiwgNDQ4MzM0NTk5OCkNCiBLaW5nID0gV2luZG93OkNyZWF0ZVRhYigiS2luZyIsIDQ0ODMzNDU5OTgpDQogQmFjaGlyYSA9IFdpbmRvdzpDcmVhdGVUYWIoIkJhY2hpcmEiLCA0NDgzMzQ1OTk4KQ0KIFl1a2ltaXlhID0gV2luZG93OkNyZWF0ZVRhYigiWXVraW1peWEiLCA0NDgzMzQ1OTk4KQ0KIE1WUCA9IFdpbmRvdzpDcmVhdGVUYWIoIk1WUHMiLCA0NDgzMzQ1OTk4KQ0KIFNha3V5YSA9IFdpbmRvdzpDcmVhdGVUYWIoIlNha3V5YSIsIDQ0ODMzNDU5OTgpDQogRXhlID0gV2luZG93OkNyZWF0ZVRhYigiRXhlIiwgNDQ4MzM0NTk5OCkNCiBSb25hbGRvID0gV2luZG93OkNyZWF0ZVRhYigiUm9uYWxkbyIsIDQ0ODMzNDU5OTgpDQogQ2hhcHRlciA9IFdpbmRvdzpDcmVhdGVUYWIoIkNoYXB0ZXIiLCA0NDgzMzQ1OTk4KQ0KIE90aGVyID0gV2luZG93OkNyZWF0ZVRhYigiT3RoZXIiLCA0NDgzMzQ1OTk4KQ0KDQogDQogSXNhZ2lTZWMgPSBJc2FnaTpDcmVhdGVTZWN0aW9uKCJTdHJpa2VyIE9mIEJsdWUgTG9jayIpDQogDQpzaGFyZWQuYmFsbCA9IG5pbA0Kc2hhcmVkLmJhbGwgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMDQzMzc2NDAwMTI0NDAiKVsxXQ0Kc2hhcmVkLmJhbGwuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcg0Kc2hhcmVkLmJhbGwuQW5jaG9yZWQgPSB0cnVlDQpzaGFyZWQuYmFsbC5iYWxsLlBhcnQwID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydA0Kc2hhcmVkLmJhbGwuQW5jaG9yZWQgPSBmYWxzZQ0Kc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oKQ0KICAgIHNoYXJlZC5iYWxsID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTA0MzM3NjQwMDEyNDQwIilbMV0NCiAgICBzaGFyZWQuYmFsbC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyDQogICAgc2hhcmVkLmJhbGwuQW5jaG9yZWQgPSB0cnVlDQogICAgc2hhcmVkLmJhbGwuYmFsbC5QYXJ0MCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQNCiAgICBzaGFyZWQuYmFsbC5BbmNob3JlZCA9IGZhbHNlDQogICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KZW5kKQ0KDQogICAgDQotLSBLSU5HIC0tDQpLaW5nU2VjID0gS2luZzpDcmVhdGVTZWN0aW9uKCJUaGUgS2luZyBPZiBUaGUgRmllbGQiKQ0KDQpDaG9wID0gS2luZzpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQ2hvcCBEcmliYmxlIiwNCiAgDQogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5iYXJvdS5raW5nc2Nob3AsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhcm91IikNCiAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDgzNDM1NzQxMDA3NTIiDQogICAgICAgICAgICANCiAgICAgICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBlbmQpDQogICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiY2hvcGRyaWJibGUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgICAgICAgICANCiAgICAgICAgZW5kLA0KfSkNCkNob3BLZXliaW5kID0gS2luZzpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkNob3AgRHJpYmJsZSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5iYXJvdS5raW5nc2Nob3AsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgImJhcm91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTA4MzQzNTc0MTAwNzUyIg0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImNob3BkcmliYmxlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgICBlbmQsDQp9KQ0KTG9uZ1Nob3QgPSBLaW5nOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJMb25nIFNob3QiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuYmFyb3VbImtpbmdzaG90IHdpbmR1cCAoMikiXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICANCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiYmFyb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85ODg2OTUzMTQ0NzYyMyINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0Kd2FpdCgwLjM3KQ0KdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmJhcm91WyJraW5nc2hvdCBoaXR0ZWQgKDIpIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgDQoNCiAgICAgICAgZW5kKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYmFyb3VzaG90IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgICAgICAgICAgDQogICAgZW5kLA0KfSkNCg0KDQpMb25nU2hvdEtleWJpbmQgPSBLaW5nOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiTG9uZyBTaG90IiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuYmFyb3VbImtpbmdzaG90IHdpbmR1cCAoMikiXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgZW5kKQ0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJiYXJvdSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzk4ODY5NTMxNDQ3NjIzIg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQp3YWl0KDAuMzcpDQp2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuYmFyb3VbImtpbmdzaG90IGhpdHRlZCAoMikiXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICANCg0KICAgICAgICBlbmQpDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiYXJvdXNob3QiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgICAgICAgICANCiAgICBlbmQsDQp9KQ0KS2luZ1BhdGggPSBLaW5nOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJLaW5nJ3MgUGF0aCIsDQogIA0KICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5iYXJvdVsia2luZ3MgZHJpYmJsZSAoMSkiXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgICAgIGVuZCkNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiYmFyb3UiKQ0KICAgICAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzczNTYwODg1NzA0MjkyIg0KICAgICAgICAgICAgDQogICAgICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgIA0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImtpbmdhbmdsZURyaWJibGUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgICAgICAgICANCiAgICAgICAgZW5kLA0KfSkNCktpbmdQYXRoS2V5YmluZCA9IEtpbmc6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJLaW5nJ3MgUGF0aCIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmJhcm91WyJraW5ncyBkcmliYmxlICgxKSJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhcm91IikNCiAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83MzU2MDg4NTcwNDI5MiINCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgICAgICBodWg6UGxheSgpDQogICAgICAgICAgICANCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICANCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJraW5nYW5nbGVEcmliYmxlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpBd2FrZW5pbmdCdG4gPSBLaW5nOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhcm91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzI5MTQ2NzczMzE5ODEiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5iYXJvdS5iYXJvdVRoZW1lLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcykuYmFyb3UuY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiYXJvdUF3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICAgICAgICAgIA0KICAgIGVuZCwNCn0pDQpBd2FrZW5pbmdLZXliaW5kID0gS2luZzpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkF3YWtlbmluZyIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgImJhcm91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzI5MTQ2NzczMzE5ODEiDQogICAgICAgIA0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMuYmFyb3UuYmFyb3VUaGVtZSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpLmJhcm91LmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYmFyb3VBd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCk9mZlRoZUJhbGxBd2FrZW5pbmdCdG4gPSBLaW5nOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJPZmYgdGhlIEJhbGwgQXdha2VuaW5nIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJiYXJvdSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzkzMDIwNjUwOTY1ODYwIg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly83MTcwMjcwMDcwNzc3MCIpWzFdDQogICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vOTEyODUxOTMwODU0MzkiDQogICAgICAgIHRyYWNrMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbTIpDQogICAgICAgIHRyYWNrMjpQbGF5KCkNCg0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZQ0KDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGFzc2V0OkRlc3Ryb3koKSAgICANCiAgICAgICAgZW5kKQ0KICAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5iYXJvdS5iYXJvdVRoZW1lLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcykuYmFyb3UuY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiYXJvdUF3a3dpdGhvdXRiYWxsIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgICAgICAgDQogICAgZW5kLA0KfSkNCk9mZlRoZUJhbGxBd2FrZW5pbmdLZXliaW5kID0gS2luZzpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIk9mZiB0aGUgQmFsbCBBd2FrZW5pbmciLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhcm91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vOTMwMjA2NTA5NjU4NjAiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzcxNzAyNzAwNzA3NzcwIilbMV0NCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQoNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQoNCiAgICAgICAgYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0yLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85MTI4NTE5MzA4NTQzOSINCiAgICAgICAgdHJhY2syID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgdHJhY2syOlBsYXkoKQ0KDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lDQoNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpICAgIA0KICAgICAgICBlbmQpDQogICAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5iYXJvdS5iYXJvdVRoZW1lLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcykuYmFyb3UuY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiYXJvdUF3a3dpdGhvdXRiYWxsIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgICAgICBlbmQsDQp9KQ0KDQoNClNlY3JldEF3YWtlbmluZ0J0biA9IEtpbmc6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlNlY3JldCBBd2FrZW5pbmciLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhcm91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTExODI3ODAxMjI2NDkxIg0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5iYXJvdS5iYXJvdVRoZW1lLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcykuYmFyb3UuY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiYXJvdWt5dW4iLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgICAgICAgDQogICAgZW5kLA0KfSkNClNlY3JldEF3YWtlbmluZ0tleWJpbmQgPSBLaW5nOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiU2VjcmV0IEF3YWtlbmluZyIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsICJiYXJvdSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExMTgyNzgwMTIyNjQ5MSINCiAgICAgICAgDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBpZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLmJhcm91LmJhcm91VGhlbWUsZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKS5iYXJvdS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYmFyb3VreXVuIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgICAgICAgDQogICAgZW5kLA0KfSkNCkRldm91clJ1bkJ0biA9IEtpbmc6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkRFVk9VUihSdW4pLiIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiYmFyb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMTc5MjE5OTI1ODI2NzUiDQogICAgICAgIA0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiYXJvdXJ1biIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICAgICAgIA0KICAgIGVuZCwNCn0pDQpEZXZvdXJSdW5LZXliaW5kID0gS2luZzpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkRFVk9VUihSdW4pLiIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgImJhcm91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTE3OTIxOTkyNTgyNjc1Ig0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICANCiAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiYXJvdXJ1biIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICAgICAgIA0KICAgIGVuZCwNCn0pDQpEZXZvdXJIaXRCdG4gPSBLaW5nOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJERVZPVVIoSGl0KS4iLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhcm91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTMyNTI2NTExNjYwNDQ0Ig0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGggLSA2LjUpDQogICAgICAgICAgICBodWg6U3RvcCgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICANCiAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ1MjBLaWNrQmFyb3UiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcixmYWxzZX0pDQogICAgICAgICANCiAgICBlbmQsDQp9KQ0KRGV2b3VySGl0S2V5YmluZCA9IEtpbmc6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJERVZPVVIoSGl0KS4iLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsICJiYXJvdSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEzMjUyNjUxMTY2MDQ0NCINCiAgICAgICAgDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGggLSA2LjUpDQogICAgICAgICAgICBodWg6U3RvcCgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICANCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInUyMEtpY2tCYXJvdSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGZhbHNlfSkNCiAgICBlbmQsDQp9KQ0KRGV2b3VySGl0QnRuID0gS2luZzpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiREVWT1VSKEFVVE8gR09BTCBWQVJJQU5UKS4iLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhcm91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTMyNTI2NTExNjYwNDQ0Ig0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBodWg6U3RvcCgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICANCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ1MjBLaWNrQmFyb3UiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcix0cnVlfSkNCiAgICBlbmQsDQp9KQ0KRGV2b3VySGl0S2V5YmluZCA9IEtpbmc6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJERVZPVVIoQVVUTyBHT0FMIFZBUklBTlQpLiIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgImJhcm91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTMyNTI2NTExNjYwNDQ0Ig0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGh1aDpTdG9wKCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInUyMEtpY2tCYXJvdSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLHRydWV9KQ0KICAgIGVuZCwNCn0pDQpQcmVkYXRvckV5ZUJ0biA9IEtpbmc6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlByZWRhdG9yIEV5ZSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiYmFyb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMTQxOTI5MTQ5NzE4NTMiDQogICAgICAgIA0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICANCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiQmFyb3VTdGVhbCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KUHJlZGF0b3JFeWVLZXliaW5kID0gS2luZzpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIlByZWRhdG9yIEV5ZSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgImJhcm91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTE0MTkyOTE0OTcxODUzIg0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIkJhcm91U3RlYWwiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCi0tIElTQUdJIC0tDQpCYXNlRGlyZWN0U2hvdEJ0biA9IElzYWdpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJEaXJlY3QgU2hvdCIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiaXNhZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMzEyMjk0MDI1NDk3NzAiDQogICAgICAgIA0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmlzYWdpWyJkaXJlY3Qgc2hvdCJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICBlbmQpICAgIA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KDAuMDUpDQogICAgICAgICAgICB3YWl0KDAuNDUpDQoNCiAgICAgICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5pc2FnaVsiZGlyZWN0IHNob3Qgc2hvdCJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJjYW1lcmFTaGFrZSIsIGZsYWcsIHsxMDAwLCAyLCAxMH0pDQogICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYmlnc2hvY2t3YXZlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnR9KQ0KICAgICAgICBlbmQpDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgIA0KICAgIGVuZCwNCn0pDQpJc2FnaUtleWJpbmQgPSBJc2FnaTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkRpcmVjdCBTaG90IiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImlzYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTMxMjI5NDAyNTQ5NzcwIg0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5pc2FnaVsiZGlyZWN0IHNob3QiXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgZW5kKSAgICANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCgwLjA1KQ0KICAgICAgICAgICAgd2FpdCgwLjQ1KQ0KDQogICAgICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuaXNhZ2lbImRpcmVjdCBzaG90IHNob3QiXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiY2FtZXJhU2hha2UiLCBmbGFnLCB7MTAwMCwgMiwgMTB9KQ0KICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImJpZ3Nob2Nrd2F2ZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0fSkNCiAgICAgICAgZW5kKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgIGVuZCwNCn0pDQpOYXJ1aGF5YUJ0biA9IElzYWdpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJOYXJ1aGF5YSBGb290d29yayIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiaXNhZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84MjI0MDI4Njc1Njg5MSINCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuaXNhZ2lbIk5hcnVoYXlhIEZvb3R3b3JrIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIGVuZCkNCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB2X3VfMjQxNCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0DQogICAgICAgICAgICB2X3VfMjQxNSA9IGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLmlzYWdpDQogICAgICAgICAgICB0YXNrLmRlbGF5KDAuMiwgZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgIC0tIHVwdmFsdWVzOiAoY29weSkgdl91XzI0MTUsIChjb3B5KSB2X3VfMjQxNA0KICAgICAgICAgICAgICAgIHYyNDE2ID0gdl91XzI0MTUuRGFzaDpDbG9uZSgpDQogICAgICAgICAgICAgICAgdjI0MTYuQ0ZyYW1lID0gdl91XzI0MTQuQ0ZyYW1lDQogICAgICAgICAgICAgICAgdjI0MTYuUGFyZW50ID0gd29ya3NwYWNlLkVmZmVjdHMNCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgIHYyNDE3ID0gSW5zdGFuY2UubmV3KCJCb2R5VmVsb2NpdHkiKQ0KICAgICAgICAgICAgdjI0MTcuVmVsb2NpdHkgPSAtdl91XzI0MTQuQ0ZyYW1lLkxvb2tWZWN0b3IgKiA1MA0KICAgICAgICAgICAgdjI0MTcuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldygyMDAwMCwgMCwgMjAwMDApDQogICAgICAgICAgICB2MjQxNy5QYXJlbnQgPSB2X3VfMjQxNA0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJEZWJyaXMiKTpBZGRJdGVtKHYyNDE3LCAwLjIpDQogICAgICAgICAgICAgICAgXyA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkZpZWxkT2ZWaWV3DQogICAgICAgIGVuZCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgIHdhaXQoMC4yKQ0KICAgICAgIA0KICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJXZWxkRGFzaCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICAgICAgZW5kKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgDQogICAgICAgDQogICAgZW5kLA0KfSkNCklzYWdpS2V5YmluZCA9IElzYWdpOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiTmFydWhheWEgRm9vdHdvcmsiLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImlzYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vODIyNDAyODY3NTY4OTEiDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmlzYWdpWyJOYXJ1aGF5YSBGb290d29yayJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICBlbmQpDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgdl91XzI0MTQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydA0KICAgICAgICAgICAgdl91XzI0MTUgPSBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5pc2FnaQ0KICAgICAgICAgICAgdGFzay5kZWxheSgwLjIsIGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAtLSB1cHZhbHVlczogKGNvcHkpIHZfdV8yNDE1LCAoY29weSkgdl91XzI0MTQNCiAgICAgICAgICAgICAgICB2MjQxNiA9IHZfdV8yNDE1LkRhc2g6Q2xvbmUoKQ0KICAgICAgICAgICAgICAgIHYyNDE2LkNGcmFtZSA9IHZfdV8yNDE0LkNGcmFtZQ0KICAgICAgICAgICAgICAgIHYyNDE2LlBhcmVudCA9IHdvcmtzcGFjZS5FZmZlY3RzDQogICAgICAgICAgICAgICAgRW1pdEFsbCh2MjQxNikNCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgIHYyNDE3ID0gSW5zdGFuY2UubmV3KCJCb2R5VmVsb2NpdHkiKQ0KICAgICAgICAgICAgdjI0MTcuVmVsb2NpdHkgPSAtdl91XzI0MTQuQ0ZyYW1lLkxvb2tWZWN0b3IgKiA1MA0KICAgICAgICAgICAgdjI0MTcuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldygyMDAwMCwgMCwgMjAwMDApDQogICAgICAgICAgICB2MjQxNy5QYXJlbnQgPSB2X3VfMjQxNA0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJEZWJyaXMiKTpBZGRJdGVtKHYyNDE3LCAwLjIpDQogICAgICAgICAgICAgICAgXyA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkZpZWxkT2ZWaWV3DQogICAgICAgIGVuZCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgIHdhaXQoMC4yKQ0KICAgICAgIA0KICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJXZWxkRGFzaCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICAgICAgZW5kKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICBlbmQsDQp9KQ0KT2xkQXdha2VuaW5nQnRuID0gSXNhZ2k6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIk9sZCBBd2FrZW5pbmciLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImlzYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTM2ODM3Njc2NDc3NzMwIg0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5pc2FnaS50aGVtZSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiaXNhZ2lhd2FrZW4iLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCklzYWdpS2V5YmluZCA9IElzYWdpOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiT2xkIEF3YWtlbmluZyIsDQogICAgICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCkhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCiAgICAgICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJpc2FnaSIpDQogICAgICAgICAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMzY4Mzc2NzY0Nzc3MzAiDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgICAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5pc2FnaS50aGVtZSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiaXNhZ2lhd2FrZW4iLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkF3YWtlbmluZ0J0biA9IElzYWdpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgDQoNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJpc2FnaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEwNzYzOTcyNDA0NzU1MCINCiAgICAgICAgDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5pc2FnaS50aGVtZSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIk5ld0Zsb3ciLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCklzYWdpS2V5YmluZCA9IElzYWdpOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiQXdha2VuaW5nIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICANCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImlzYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTA3NjM5NzI0MDQ3NTUwIg0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMuaXNhZ2kudGhlbWUsZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKVtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6R2V0QXR0cmlidXRlKCJzdHlsZSIpXS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiTmV3RmxvdyIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KT3ZlcnRpbWVBd2FrZW5pbmdCdG4gPSBJc2FnaTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiT3ZlcnRpbWUgQXdha2VuaW5nIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiaXNhZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85OTMxMzgwMDc1NjkwNyINCiAgICAgICAgDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMuaXNhZ2lbImlzYWdpIHRoZW1lb3ZlciJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcylbZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldEF0dHJpYnV0ZSgic3R5bGUiKV0uY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAib3ZlcnRpbWVpc2FnaSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KSXNhZ2lLZXliaW5kID0gSXNhZ2k6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJPdmVydGltZSBBd2FrZW5pbmciLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJpc2FnaSIpDQogICAgICAgICAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85OTMxMzgwMDc1NjkwNyINCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgICAgICAgICBodWg6UGxheSgpDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMuaXNhZ2lbImlzYWdpIHRoZW1lb3ZlciJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcylbZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldEF0dHJpYnV0ZSgic3R5bGUiKV0uY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAib3ZlcnRpbWVpc2FnaSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KRGlyZWN0U2hvdEJ0biA9IElzYWdpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJNWSBESVJFQ1QgU0hPVChPTEQpISIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiaXNhZ2kiKQ0KICAgICAgICAgbG9jYWwgb2xkYXNzZXRzID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTM1MTU4NTg1OTE3MzM1IilbMV0NCiAgb2xkYXNzZXRzLlBhcmVudCA9IGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzDQogIG9sZGFzc2V0cy5OYW1lID0gIk9sZElzYWdpIg0KICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzc2NzEzOTE1Nzg2MDU2Ig0KICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgIGh1aDpQbGF5KCkNCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICBzcGF3bihmdW5jdGlvbigpDQogICAgd2FpdChodWguTGVuZ3RoKQ0KICAgIG9sZGFzc2V0czpEZXN0cm95KCkNCiAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgZW5kKQ0KICBsb2NhbCB2OTY5ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0IG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQ7DQogICAgbG9jYWwgXyA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuVG9yc287DQogICAgbG9jYWwgbF9QbGF5ZXJzXzAgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTsNCmxvY2FsIGxfUmVwbGljYXRlZFN0b3JhZ2VfMCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTsNCmxvY2FsIF8gPSBnYW1lOkdldFNlcnZpY2UoIlNlcnZlclN0b3JhZ2UiKTsNCmxvY2FsIGxfUnVuU2VydmljZV8wID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIik7DQpsb2NhbCBfID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIik7DQpsb2NhbCBsX1R3ZWVuU2VydmljZV8wID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTsNCmxvY2FsIGxfRGVicmlzXzAgPSBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOw0KbG9jYWwgXyA9IGdhbWU6R2V0U2VydmljZSgiQ29sbGVjdGlvblNlcnZpY2UiKTsNCmxvY2FsIGxfTGlnaHRpbmdfMCA9IGdhbWU6R2V0U2VydmljZSgiTGlnaHRpbmciKTsNCmxvY2FsIGxfU291bmRTZXJ2aWNlXzAgPSBnYW1lOkdldFNlcnZpY2UoIlNvdW5kU2VydmljZSIpOw0KbG9jYWwgXyA9IGdhbWU6R2V0U2VydmljZSgiVGV4dFNlcnZpY2UiKTsNCmxvY2FsIGxfQ29udGVudFByb3ZpZGVyXzAgPSBnYW1lOkdldFNlcnZpY2UoIkNvbnRlbnRQcm92aWRlciIpOw0KbG9jYWwgdjEyID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLmNsaWVudC5yZXBsaWNhdGlvbik7DQpsb2NhbCBsX0N1cnJlbnRDYW1lcmFfMCA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhOw0KbG9jYWwgbF9Mb2NhbFBsYXllcl8wID0gbF9QbGF5ZXJzXzAuTG9jYWxQbGF5ZXI7DQpsb2NhbCBsX1BsYXllckd1aV8wID0gbF9Mb2NhbFBsYXllcl8wLlBsYXllckd1aTsNCmxvY2FsIGxfbF9Mb2NhbFBsYXllcl8wX01vdXNlXzAgPSBsX0xvY2FsUGxheWVyXzA6R2V0TW91c2UoKTsNCmxvY2FsIGxfQ29sb3JfMCA9IGxfTGlnaHRpbmdfMC5BdG1vc3BoZXJlLkNvbG9yOw0KbG9jYWwgbF9EZW5zaXR5XzAgPSBsX0xpZ2h0aW5nXzAuQXRtb3NwaGVyZS5EZW5zaXR5Ow0KbG9jYWwgbF9CcmlnaHRuZXNzXzAgPSBsX0xpZ2h0aW5nXzAuQnJpZ2h0bmVzczsNCmxvY2FsIGxfQ2xvY2tUaW1lXzAgPSBsX0xpZ2h0aW5nXzAuQ2xvY2tUaW1lOw0KbG9jYWwgdjIxID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLmNsaWVudC5yZXBsaWNhdGlvbi5tYWlucmVwbGljYXRpb24uQ2FtZXJhU2hha2VyKTsNCmxvY2FsIF8gPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuY2xpZW50LnJlcGxpY2F0aW9uLkJlemllckN1cnZlKTsNCmxvY2FsIHYyMyA9IHJlcXVpcmUobF9SZXBsaWNhdGVkU3RvcmFnZV8wLnV0aWwucmF5Y2FzdCk7DQpsb2NhbCB2MjQgPSByZXF1aXJlKGxfUmVwbGljYXRlZFN0b3JhZ2VfMC51dGlsLmFuaW1hdGlvblV0aWwpOw0KbG9jYWwgdjI1ID0gcmVxdWlyZShsX1JlcGxpY2F0ZWRTdG9yYWdlXzAudXRpbC5zb3VuZFV0aWwpOw0KbG9jYWwgXyA9IHJlcXVpcmUobF9SZXBsaWNhdGVkU3RvcmFnZV8wLnV0aWwuYWN0aW9uVXRpbCk7DQpsb2NhbCB2MjcgPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuY2xpZW50LnJlcGxpY2F0aW9uLlRla3Jpbm5EaWFsb2d1ZSk7DQpsb2NhbCB2MjggPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuY2xpZW50LnJlcGxpY2F0aW9uLm1haW5yZXBsaWNhdGlvbik7DQpsb2NhbCB2MjkgPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuY2xpZW50LnJlcGxpY2F0aW9uLkludmlzaWJsZSk7DQpsb2NhbCB2MzAgPSByZXF1aXJlKGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5XZWxkZXIpOw0KICAgIHYxMi5zY2VuZUVuYWJsZWQodHJ1ZSk7DQogICAgdGFzay5kZWxheSgwLjE1LCBmdW5jdGlvbigpIC0tW1sgTGluZTogNDc0NCBdXQ0KICAgICAgICAtLSB1cHZhbHVlczogdjI3IChyZWYpLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIChjb3B5KQ0KICAgICAgICB2MjcuU3BlYWsoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlciwgew0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFRleHQgPSAiSSB3YW50IHRvLi4uIiwgDQogICAgICAgICAgICAgICAgQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ldyh7DQogICAgICAgICAgICAgICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMCwgQ29sb3IzLmZyb21SR0IoOCwgMCwgMjU1KSksIA0KICAgICAgICAgICAgICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEsIENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpKQ0KICAgICAgICAgICAgICAgIH0pLCANCiAgICAgICAgICAgICAgICBUZXh0U3Ryb2tlQ29sb3IgPSBDb2xvcjMubmV3KDAsIDAsIDApLCANCiAgICAgICAgICAgICAgICBCb2xkID0gZmFsc2UsIA0KICAgICAgICAgICAgICAgIEl0YWxpYyA9IGZhbHNlLCANCiAgICAgICAgICAgICAgICBTaGFrZSA9IHsNCiAgICAgICAgICAgICAgICAgICAgRW5hYmxlZCA9IHRydWUsIA0KICAgICAgICAgICAgICAgICAgICBJbnRlbnNpdHkgPSAyLCANCiAgICAgICAgICAgICAgICAgICAgTGlmZXRpbWUgPSAxLjUNCiAgICAgICAgICAgICAgICB9LCANCiAgICAgICAgICAgICAgICBUeXBlU3BlZWQgPSAwLjAzDQogICAgICAgICAgICB9DQogICAgICAgIH0sIDEuNSk7DQogICAgZW5kKTsNCiAgICB0YXNrLmRlbGF5KDEuMzMzLCBmdW5jdGlvbigpIC0tW1sgTGluZTogNDc3MCBdXQ0KICAgICAgICAtLSB1cHZhbHVlczogdjI3IChyZWYpLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIChjb3B5KQ0KICAgICAgICB2MjcuU3BlYWsoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlciwgew0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFRleHQgPSAiSSB3YW50IHRvIHdpbiB3aXRoIG15IGdvYWwhIiwgDQogICAgICAgICAgICAgICAgQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ldyh7DQogICAgICAgICAgICAgICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMCwgQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkpLCANCiAgICAgICAgICAgICAgICAgICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygxLCBDb2xvcjMuZnJvbVJHQigwLCA0LCAyNTUpKQ0KICAgICAgICAgICAgICAgIH0pLCANCiAgICAgICAgICAgICAgICBUZXh0U3Ryb2tlQ29sb3IgPSBDb2xvcjMubmV3KDAsIDAsIDApLCANCiAgICAgICAgICAgICAgICBCb2xkID0gdHJ1ZSwgDQogICAgICAgICAgICAgICAgSXRhbGljID0gdHJ1ZSwgDQogICAgICAgICAgICAgICAgU2hha2UgPSB7DQogICAgICAgICAgICAgICAgICAgIEVuYWJsZWQgPSB0cnVlLCANCiAgICAgICAgICAgICAgICAgICAgSW50ZW5zaXR5ID0gNCwgDQogICAgICAgICAgICAgICAgICAgIExpZmV0aW1lID0gMg0KICAgICAgICAgICAgICAgIH0sIA0KICAgICAgICAgICAgICAgIFR5cGVTcGVlZCA9IDAuMDMNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwgMik7DQogICAgZW5kKTsNCiAgICB0YXNrLmRlbGF5KDQuMTE3LCBmdW5jdGlvbigpIC0tW1sgTGluZTogNDc5NiBdXQ0KICAgICAgICAtLSB1cHZhbHVlczogdjI3IChyZWYpLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIChjb3B5KQ0KICAgICAgICB2MjcuU3BlYWsoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlciwgew0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFRleHQgPSAiTVkgRElSRUNUIFNIT1QhIiwgDQogICAgICAgICAgICAgICAgQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ldyh7DQogICAgICAgICAgICAgICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMCwgQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkpLCANCiAgICAgICAgICAgICAgICAgICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygxLCBDb2xvcjMuZnJvbVJHQigwLCA0LCAyNTUpKQ0KICAgICAgICAgICAgICAgIH0pLCANCiAgICAgICAgICAgICAgICBUZXh0U3Ryb2tlQ29sb3IgPSBDb2xvcjMubmV3KDAsIDAsIDApLCANCiAgICAgICAgICAgICAgICBCb2xkID0gdHJ1ZSwgDQogICAgICAgICAgICAgICAgSXRhbGljID0gdHJ1ZSwgDQogICAgICAgICAgICAgICAgU2hha2UgPSB7DQogICAgICAgICAgICAgICAgICAgIEVuYWJsZWQgPSB0cnVlLCANCiAgICAgICAgICAgICAgICAgICAgSW50ZW5zaXR5ID0gNSwgDQogICAgICAgICAgICAgICAgICAgIExpZmV0aW1lID0gMg0KICAgICAgICAgICAgICAgIH0sIA0KICAgICAgICAgICAgICAgIFR5cGVTcGVlZCA9IDAuMDMNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwgMik7DQogICAgZW5kKTsNCiAgICBsb2NhbCB2OTcxID0gbF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5EZXB0aE9mRmllbGQ6Q2xvbmUoKTsNCiAgICB2OTcxLlBhcmVudCA9IGxfTGlnaHRpbmdfMDsNCiAgICB2OTcxLkZhckludGVuc2l0eSA9IDA7DQogICAgbF9Ud2VlblNlcnZpY2VfMDpDcmVhdGUodjk3MSwgVHdlZW5JbmZvLm5ldygwLjUsIEVudW0uRWFzaW5nU3R5bGUuU2luZSwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwgew0KICAgICAgICBGYXJJbnRlbnNpdHkgPSAxDQogICAgfSk6UGxheSgpOw0KICAgIGxvY2FsIFNvdW5kID0gSW5zdGFuY2UubmV3KCJTb3VuZCIsZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMuT2xkSXNhZ2kpDQogICAgU291bmQuTmFtZSA9ICJESVJFQ1RBIFNIT09UT1RBIg0KICAgIFNvdW5kLlZvbHVtZSA9IDMNCiAgICBTb3VuZC5Tb3VuZElkID0gInJieGFzc2V0aWQ6Ly84MzQ4NjEyNzM5NzEzMCINCiAgICB2MjU6cGxheShsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLk9sZElzYWdpWyJESVJFQ1RBIFNIT09UT1RBIl0sIGxfU291bmRTZXJ2aWNlXzApOw0KICAgIHYxMi5jdXRzY2VuZSh2OTY5LCBDRnJhbWUubmV3KChWZWN0b3IzLm5ldygwLCAwLCAwLCAwKSkpLCA1LjUsIGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMuT2xkSXNhZ2kudUZPViwgdHJ1ZSk7DQogICAgbG9jYWwgdjk3MiA9IGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMuT2xkSXNhZ2kuSko6Q2xvbmUoKTsNCiAgICB2OTcyLkpKUm9vdFBhcnQuSkpSb290UGFydC5QYXJ0MCA9IHY5Njk7DQogICAgdjk3Mi5QYXJlbnQgPSB2OTY5Ow0KICAgIHRhc2sud2FpdCgwLjE1KTsNCiAgICBsb2NhbCB2OTczID0gbF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5PbGRJc2FnaS5zdGVwOkNsb25lKCk7DQogICAgdjk3My5DRnJhbWUgPSB2OTY5LkNGcmFtZSAqIENGcmFtZS5uZXcoMC41LCAtMi42LCAwLjMpOw0KICAgIHY5NzMuUGFyZW50ID0gd29ya3NwYWNlLkVmZmVjdHM7DQogICAgZm9yIF8sIHY5NzUgaW4gaXBhaXJzKHY5NzM6R2V0RGVzY2VuZGFudHMoKSkgZG8NCiAgICAgICAgaWYgdjk3NTpJc0EoIlBhcnRpY2xlRW1pdHRlciIpIHRoZW4NCiAgICAgICAgICAgIHY5NzU6RW1pdCh2OTc1OkdldEF0dHJpYnV0ZSgiRW1pdENvdW50IikpOw0KICAgICAgICBlbmQ7DQogICAgZW5kOw0KICAgIHRhc2suZGVsYXkoMiwgdjk3My5EZXN0cm95LCB2OTczKTsNCiAgICB0YXNrLndhaXQoMC4zKTsNCiAgICB2MTIuYnJpZ2h0KDAuMywgMS41KTsNCiAgICBsb2NhbCB2OTc2ID0gbF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5PbGRJc2FnaS5wb3B1cDpDbG9uZSgpOw0KICAgIHY5NzYuQ0ZyYW1lID0gdjk2OS5DRnJhbWUgKiBDRnJhbWUubmV3KDAuNSwgLTMsIDAuMyk7DQogICAgdjk3Ni5QYXJlbnQgPSB3b3Jrc3BhY2UuRWZmZWN0czsNCiAgICBmb3IgXywgdjk3OCBpbiBpcGFpcnModjk3NjpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgICAgICBpZiB2OTc4OklzQSgiUGFydGljbGVFbWl0dGVyIikgdGhlbg0KICAgICAgICAgICAgdjk3ODpFbWl0KHY5Nzg6R2V0QXR0cmlidXRlKCJFbWl0Q291bnQiKSk7DQogICAgICAgIGVuZDsNCiAgICBlbmQ7DQogICAgdGFzay5kZWxheSgyLCB2OTc2LkRlc3Ryb3ksIHY5NzYpOw0KICAgIHRhc2sud2FpdCgwLjQpOw0KICAgIGxvY2FsIHY5NzkgPSBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLk9sZElzYWdpLlBFOkNsb25lKCk7DQogICAgdjk3OTpQaXZvdFRvKHY5NjkuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLjUsIC0zLCAwLjMpKTsNCiAgICB2OTc5LlBhcmVudCA9IHdvcmtzcGFjZS5FZmZlY3RzOw0KICAgIGZvciBfLCB2OTgxIGluIGlwYWlycyh2OTc5LlBFOkdldERlc2NlbmRhbnRzKCkpIGRvDQogICAgICAgIGlmIHY5ODE6SXNBKCJQYXJ0aWNsZUVtaXR0ZXIiKSB0aGVuDQogICAgICAgICAgICB2OTgxLkVuYWJsZWQgPSB0cnVlOw0KICAgICAgICBlbmQ7DQogICAgZW5kOw0KICAgIHRhc2suZGVsYXkoMiwgdjk3OS5EZXN0cm95LCB2OTc5KTsNCiAgICBsb2NhbCB2OTgyID0gbF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5PbGRJc2FnaS5QRTI6Q2xvbmUoKTsNCiAgICB2OTgyLkNGcmFtZSA9IHY5NjkuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLjUsIC0zLCAwLjMpOw0KICAgIHY5ODIuUGFyZW50ID0gd29ya3NwYWNlLkVmZmVjdHM7DQogICAgdGFzay5kZWxheSgxLCBmdW5jdGlvbigpIC0tW1sgTGluZTogNDg3NiBdXQ0KICAgICAgICAtLSB1cHZhbHVlczogbF9SZXBsaWNhdGVkU3RvcmFnZV8wIChyZWYpDQogICAgICAgIGxvY2FsIHY5ODMgPSBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLk9sZElzYWdpLmJnOkNsb25lKCk7DQogICAgICAgIHY5ODM6UGl2b3RUbyh3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDE1LCAtMTUpKTsNCiAgICAgICAgdjk4My5QYXJlbnQgPSB3b3Jrc3BhY2UuRWZmZWN0czsNCiAgICAgICAgdGFzay5kZWxheSgxLCB2OTgzLkRlc3Ryb3ksIHY5ODMpOw0KICAgIGVuZCk7DQogICAgdGFzay53YWl0KDIpOw0KICAgIGZvciBfLCB2OTg1IGluIGlwYWlycyh2OTgyOkdldERlc2NlbmRhbnRzKCkpIGRvDQogICAgICAgIGlmIHY5ODU6SXNBKCJQYXJ0aWNsZUVtaXR0ZXIiKSB0aGVuDQogICAgICAgICAgICB2OTg1LkVuYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgZW5kOw0KICAgIGVuZDsNCiAgICB0YXNrLmRlbGF5KDIsIHY5ODIuRGVzdHJveSwgdjk4Mik7DQogICAgbF9Ud2VlblNlcnZpY2VfMDpDcmVhdGUobF9MaWdodGluZ18wLkF0bW9zcGhlcmUsIFR3ZWVuSW5mby5uZXcoMSwgRW51bS5FYXNpbmdTdHlsZS5TaW5lLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7DQogICAgICAgIERlbnNpdHkgPSAwLjkyOSwgDQogICAgICAgIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCksIA0KICAgICAgICBIYXplID0gNC41NQ0KICAgIH0pOlBsYXkoKTsNCiAgICBsb2NhbCB2OTg2ID0gbF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5PbGRJc2FnaS5saW5lOkNsb25lKCk7DQogICAgdjk4Ni5DRnJhbWUgPSBDRnJhbWUubmV3KHY5NjkuUG9zaXRpb24pICogQ0ZyYW1lLm5ldygwLCAtMC43LCAwKTsNCiAgICB2OTg2LlBhcmVudCA9IHdvcmtzcGFjZS5FZmZlY3RzOw0KICAgIHRhc2suZGVsYXkoMC4zLCB2OTg2LkRlc3Ryb3ksIHY5ODYpOw0KICAgIGZvciBfLCB2OTg4IGluIGlwYWlycyh2OTcyOkdldERlc2NlbmRhbnRzKCkpIGRvDQogICAgICAgIGlmIHY5ODg6SXNBKCJCYXNlUGFydCIpIHRoZW4NCiAgICAgICAgICAgIGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMuT2xkSXNhZ2kuUG9pbnRMaWdodDpDbG9uZSgpLlBhcmVudCA9IHY5ODg7DQogICAgICAgICAgICB2OTg4Lk1hdGVyaWFsID0gRW51bS5NYXRlcmlhbC5OZW9uOw0KICAgICAgICAgICAgbF9Ud2VlblNlcnZpY2VfMDpDcmVhdGUodjk4OCwgVHdlZW5JbmZvLm5ldygwLjE1KSwgew0KICAgICAgICAgICAgICAgIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMCwgMTQ1LCAyNTUpDQogICAgICAgICAgICB9KTpQbGF5KCk7DQogICAgICAgIGVuZDsNCiAgICBlbmQ7DQogICAgdGFzay53YWl0KDEuOCk7DQogICAgbF9Ud2VlblNlcnZpY2VfMDpDcmVhdGUobF9MaWdodGluZ18wLkF0bW9zcGhlcmUsIFR3ZWVuSW5mby5uZXcoMC4zKSwgew0KICAgICAgICBEZW5zaXR5ID0gbF9EZW5zaXR5XzAsIA0KICAgICAgICBDb2xvciA9IGxfQ29sb3JfMA0KICAgIH0pOlBsYXkoKTsNCiAgICB2MTIuRW1pdCh2OTY5LCBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLk9sZElzYWdpLmltMSwgMywgQ0ZyYW1lLm5ldygwLjk1LCAtMC4xNSwgLTMpKTsNCiAgICB2MTIuYnJpZ2h0KDAuMywgMS41KTsNCiAgICB0YXNrLndhaXQoMC45KTsNCiAgICB2OTcxOkRlc3Ryb3koKTsNCiAgICB2OTcyOkRlc3Ryb3koKTsNCiAgICB2MTIuc2NlbmVFbmFibGVkKGZhbHNlKTsNCiAgICB2MTIuYmlnc2hvY2t3YXZlKHY5NjkpOw0KICAgIGVuZCwNCn0pDQpJc2FnaUtleWJpbmQgPSBJc2FnaTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIk1ZIERJUkVDVCBTSE9UKE9MRCkhIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImlzYWdpIikNCiAgICAgICAgIGxvY2FsIG9sZGFzc2V0cyA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzNTE1ODU4NTkxNzMzNSIpWzFdDQogIG9sZGFzc2V0cy5QYXJlbnQgPSBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcw0KICBvbGRhc3NldHMuTmFtZSA9ICJPbGRJc2FnaSINCiAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NjcxMzkxNTc4NjA1NiINCiAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICBodWg6UGxheSgpDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICBvbGRhc3NldHM6RGVzdHJveSgpDQogICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgIGVuZCkNCiAgbG9jYWwgdjk2OSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0Ow0KICAgIGxvY2FsIF8gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlRvcnNvOw0KICAgIGxvY2FsIGxfUGxheWVyc18wID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik7DQpsb2NhbCBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik7DQpsb2NhbCBfID0gZ2FtZTpHZXRTZXJ2aWNlKCJTZXJ2ZXJTdG9yYWdlIik7DQpsb2NhbCBsX1J1blNlcnZpY2VfMCA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpOw0KbG9jYWwgXyA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpOw0KbG9jYWwgbF9Ud2VlblNlcnZpY2VfMCA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik7DQpsb2NhbCBsX0RlYnJpc18wID0gZ2FtZTpHZXRTZXJ2aWNlKCJEZWJyaXMiKTsNCmxvY2FsIF8gPSBnYW1lOkdldFNlcnZpY2UoIkNvbGxlY3Rpb25TZXJ2aWNlIik7DQpsb2NhbCBsX0xpZ2h0aW5nXzAgPSBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIik7DQpsb2NhbCBsX1NvdW5kU2VydmljZV8wID0gZ2FtZTpHZXRTZXJ2aWNlKCJTb3VuZFNlcnZpY2UiKTsNCmxvY2FsIF8gPSBnYW1lOkdldFNlcnZpY2UoIlRleHRTZXJ2aWNlIik7DQpsb2NhbCBsX0NvbnRlbnRQcm92aWRlcl8wID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb250ZW50UHJvdmlkZXIiKTsNCmxvY2FsIHYxMiA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5jbGllbnQucmVwbGljYXRpb24pOw0KbG9jYWwgbF9DdXJyZW50Q2FtZXJhXzAgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYTsNCmxvY2FsIGxfTG9jYWxQbGF5ZXJfMCA9IGxfUGxheWVyc18wLkxvY2FsUGxheWVyOw0KbG9jYWwgbF9QbGF5ZXJHdWlfMCA9IGxfTG9jYWxQbGF5ZXJfMC5QbGF5ZXJHdWk7DQpsb2NhbCBsX2xfTG9jYWxQbGF5ZXJfMF9Nb3VzZV8wID0gbF9Mb2NhbFBsYXllcl8wOkdldE1vdXNlKCk7DQpsb2NhbCBsX0NvbG9yXzAgPSBsX0xpZ2h0aW5nXzAuQXRtb3NwaGVyZS5Db2xvcjsNCmxvY2FsIGxfRGVuc2l0eV8wID0gbF9MaWdodGluZ18wLkF0bW9zcGhlcmUuRGVuc2l0eTsNCmxvY2FsIGxfQnJpZ2h0bmVzc18wID0gbF9MaWdodGluZ18wLkJyaWdodG5lc3M7DQpsb2NhbCBsX0Nsb2NrVGltZV8wID0gbF9MaWdodGluZ18wLkNsb2NrVGltZTsNCmxvY2FsIHYyMSA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5jbGllbnQucmVwbGljYXRpb24ubWFpbnJlcGxpY2F0aW9uLkNhbWVyYVNoYWtlcik7DQpsb2NhbCBfID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLmNsaWVudC5yZXBsaWNhdGlvbi5CZXppZXJDdXJ2ZSk7DQpsb2NhbCB2MjMgPSByZXF1aXJlKGxfUmVwbGljYXRlZFN0b3JhZ2VfMC51dGlsLnJheWNhc3QpOw0KbG9jYWwgdjI0ID0gcmVxdWlyZShsX1JlcGxpY2F0ZWRTdG9yYWdlXzAudXRpbC5hbmltYXRpb25VdGlsKTsNCmxvY2FsIHYyNSA9IHJlcXVpcmUobF9SZXBsaWNhdGVkU3RvcmFnZV8wLnV0aWwuc291bmRVdGlsKTsNCmxvY2FsIF8gPSByZXF1aXJlKGxfUmVwbGljYXRlZFN0b3JhZ2VfMC51dGlsLmFjdGlvblV0aWwpOw0KbG9jYWwgdjI3ID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLmNsaWVudC5yZXBsaWNhdGlvbi5UZWtyaW5uRGlhbG9ndWUpOw0KbG9jYWwgdjI4ID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLmNsaWVudC5yZXBsaWNhdGlvbi5tYWlucmVwbGljYXRpb24pOw0KbG9jYWwgdjI5ID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLmNsaWVudC5yZXBsaWNhdGlvbi5JbnZpc2libGUpOw0KbG9jYWwgdjMwID0gcmVxdWlyZShsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuV2VsZGVyKTsNCiAgICB2MTIuc2NlbmVFbmFibGVkKHRydWUpOw0KICAgIHRhc2suZGVsYXkoMC4xNSwgZnVuY3Rpb24oKSAtLVtbIExpbmU6IDQ3NDQgXV0NCiAgICAgICAgLS0gdXB2YWx1ZXM6IHYyNyAocmVmKSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciAoY29weSkNCiAgICAgICAgdjI3LlNwZWFrKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsIHsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBUZXh0ID0gIkkgd2FudCB0by4uLiIsIA0KICAgICAgICAgICAgICAgIENvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoew0KICAgICAgICAgICAgICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIENvbG9yMy5mcm9tUkdCKDgsIDAsIDI1NSkpLCANCiAgICAgICAgICAgICAgICAgICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygxLCBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSkNCiAgICAgICAgICAgICAgICB9KSwgDQogICAgICAgICAgICAgICAgVGV4dFN0cm9rZUNvbG9yID0gQ29sb3IzLm5ldygwLCAwLCAwKSwgDQogICAgICAgICAgICAgICAgQm9sZCA9IGZhbHNlLCANCiAgICAgICAgICAgICAgICBJdGFsaWMgPSBmYWxzZSwgDQogICAgICAgICAgICAgICAgU2hha2UgPSB7DQogICAgICAgICAgICAgICAgICAgIEVuYWJsZWQgPSB0cnVlLCANCiAgICAgICAgICAgICAgICAgICAgSW50ZW5zaXR5ID0gMiwgDQogICAgICAgICAgICAgICAgICAgIExpZmV0aW1lID0gMS41DQogICAgICAgICAgICAgICAgfSwgDQogICAgICAgICAgICAgICAgVHlwZVNwZWVkID0gMC4wMw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LCAxLjUpOw0KICAgIGVuZCk7DQogICAgdGFzay5kZWxheSgxLjMzMywgZnVuY3Rpb24oKSAtLVtbIExpbmU6IDQ3NzAgXV0NCiAgICAgICAgLS0gdXB2YWx1ZXM6IHYyNyAocmVmKSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciAoY29weSkNCiAgICAgICAgdjI3LlNwZWFrKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsIHsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBUZXh0ID0gIkkgd2FudCB0byB3aW4gd2l0aCBteSBnb2FsISIsIA0KICAgICAgICAgICAgICAgIENvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoew0KICAgICAgICAgICAgICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIENvbG9yMy5mcm9tUkdCKDAsIDAsIDApKSwgDQogICAgICAgICAgICAgICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLmZyb21SR0IoMCwgNCwgMjU1KSkNCiAgICAgICAgICAgICAgICB9KSwgDQogICAgICAgICAgICAgICAgVGV4dFN0cm9rZUNvbG9yID0gQ29sb3IzLm5ldygwLCAwLCAwKSwgDQogICAgICAgICAgICAgICAgQm9sZCA9IHRydWUsIA0KICAgICAgICAgICAgICAgIEl0YWxpYyA9IHRydWUsIA0KICAgICAgICAgICAgICAgIFNoYWtlID0gew0KICAgICAgICAgICAgICAgICAgICBFbmFibGVkID0gdHJ1ZSwgDQogICAgICAgICAgICAgICAgICAgIEludGVuc2l0eSA9IDQsIA0KICAgICAgICAgICAgICAgICAgICBMaWZldGltZSA9IDINCiAgICAgICAgICAgICAgICB9LCANCiAgICAgICAgICAgICAgICBUeXBlU3BlZWQgPSAwLjAzDQogICAgICAgICAgICB9DQogICAgICAgIH0sIDIpOw0KICAgIGVuZCk7DQogICAgdGFzay5kZWxheSg0LjExNywgZnVuY3Rpb24oKSAtLVtbIExpbmU6IDQ3OTYgXV0NCiAgICAgICAgLS0gdXB2YWx1ZXM6IHYyNyAocmVmKSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciAoY29weSkNCiAgICAgICAgdjI3LlNwZWFrKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsIHsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBUZXh0ID0gIk1ZIERJUkVDVCBTSE9UISIsIA0KICAgICAgICAgICAgICAgIENvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoew0KICAgICAgICAgICAgICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpKSwgDQogICAgICAgICAgICAgICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLmZyb21SR0IoMCwgNCwgMjU1KSkNCiAgICAgICAgICAgICAgICB9KSwgDQogICAgICAgICAgICAgICAgVGV4dFN0cm9rZUNvbG9yID0gQ29sb3IzLm5ldygwLCAwLCAwKSwgDQogICAgICAgICAgICAgICAgQm9sZCA9IHRydWUsIA0KICAgICAgICAgICAgICAgIEl0YWxpYyA9IHRydWUsIA0KICAgICAgICAgICAgICAgIFNoYWtlID0gew0KICAgICAgICAgICAgICAgICAgICBFbmFibGVkID0gdHJ1ZSwgDQogICAgICAgICAgICAgICAgICAgIEludGVuc2l0eSA9IDUsIA0KICAgICAgICAgICAgICAgICAgICBMaWZldGltZSA9IDINCiAgICAgICAgICAgICAgICB9LCANCiAgICAgICAgICAgICAgICBUeXBlU3BlZWQgPSAwLjAzDQogICAgICAgICAgICB9DQogICAgICAgIH0sIDIpOw0KICAgIGVuZCk7DQogICAgbG9jYWwgdjk3MSA9IGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMuRGVwdGhPZkZpZWxkOkNsb25lKCk7DQogICAgdjk3MS5QYXJlbnQgPSBsX0xpZ2h0aW5nXzA7DQogICAgdjk3MS5GYXJJbnRlbnNpdHkgPSAwOw0KICAgIGxfVHdlZW5TZXJ2aWNlXzA6Q3JlYXRlKHY5NzEsIFR3ZWVuSW5mby5uZXcoMC41LCBFbnVtLkVhc2luZ1N0eWxlLlNpbmUsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHsNCiAgICAgICAgRmFySW50ZW5zaXR5ID0gMQ0KICAgIH0pOlBsYXkoKTsNCiAgICBsb2NhbCBTb3VuZCA9IEluc3RhbmNlLm5ldygiU291bmQiLGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLk9sZElzYWdpKQ0KICAgIFNvdW5kLk5hbWUgPSAiRElSRUNUQSBTSE9PVE9UQSINCiAgICBTb3VuZC5Wb2x1bWUgPSAzDQogICAgU291bmQuU291bmRJZCA9ICJyYnhhc3NldGlkOi8vODM0ODYxMjczOTcxMzAiDQogICAgdjI1OnBsYXkobF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5PbGRJc2FnaVsiRElSRUNUQSBTSE9PVE9UQSJdLCBsX1NvdW5kU2VydmljZV8wKTsNCiAgICB2MTIuY3V0c2NlbmUodjk2OSwgQ0ZyYW1lLm5ldygoVmVjdG9yMy5uZXcoMCwgMCwgMCwgMCkpKSwgNS41LCBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLk9sZElzYWdpLnVGT1YsIHRydWUpOw0KICAgIGxvY2FsIHY5NzIgPSBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLk9sZElzYWdpLkpKOkNsb25lKCk7DQogICAgdjk3Mi5KSlJvb3RQYXJ0LkpKUm9vdFBhcnQuUGFydDAgPSB2OTY5Ow0KICAgIHY5NzIuUGFyZW50ID0gdjk2OTsNCiAgICB0YXNrLndhaXQoMC4xNSk7DQogICAgbG9jYWwgdjk3MyA9IGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMuT2xkSXNhZ2kuc3RlcDpDbG9uZSgpOw0KICAgIHY5NzMuQ0ZyYW1lID0gdjk2OS5DRnJhbWUgKiBDRnJhbWUubmV3KDAuNSwgLTIuNiwgMC4zKTsNCiAgICB2OTczLlBhcmVudCA9IHdvcmtzcGFjZS5FZmZlY3RzOw0KICAgIGZvciBfLCB2OTc1IGluIGlwYWlycyh2OTczOkdldERlc2NlbmRhbnRzKCkpIGRvDQogICAgICAgIGlmIHY5NzU6SXNBKCJQYXJ0aWNsZUVtaXR0ZXIiKSB0aGVuDQogICAgICAgICAgICB2OTc1OkVtaXQodjk3NTpHZXRBdHRyaWJ1dGUoIkVtaXRDb3VudCIpKTsNCiAgICAgICAgZW5kOw0KICAgIGVuZDsNCiAgICB0YXNrLmRlbGF5KDIsIHY5NzMuRGVzdHJveSwgdjk3Myk7DQogICAgdGFzay53YWl0KDAuMyk7DQogICAgdjEyLmJyaWdodCgwLjMsIDEuNSk7DQogICAgbG9jYWwgdjk3NiA9IGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMuT2xkSXNhZ2kucG9wdXA6Q2xvbmUoKTsNCiAgICB2OTc2LkNGcmFtZSA9IHY5NjkuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLjUsIC0zLCAwLjMpOw0KICAgIHY5NzYuUGFyZW50ID0gd29ya3NwYWNlLkVmZmVjdHM7DQogICAgZm9yIF8sIHY5NzggaW4gaXBhaXJzKHY5NzY6R2V0RGVzY2VuZGFudHMoKSkgZG8NCiAgICAgICAgaWYgdjk3ODpJc0EoIlBhcnRpY2xlRW1pdHRlciIpIHRoZW4NCiAgICAgICAgICAgIHY5Nzg6RW1pdCh2OTc4OkdldEF0dHJpYnV0ZSgiRW1pdENvdW50IikpOw0KICAgICAgICBlbmQ7DQogICAgZW5kOw0KICAgIHRhc2suZGVsYXkoMiwgdjk3Ni5EZXN0cm95LCB2OTc2KTsNCiAgICB0YXNrLndhaXQoMC40KTsNCiAgICBsb2NhbCB2OTc5ID0gbF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5PbGRJc2FnaS5QRTpDbG9uZSgpOw0KICAgIHY5Nzk6UGl2b3RUbyh2OTY5LkNGcmFtZSAqIENGcmFtZS5uZXcoMC41LCAtMywgMC4zKSk7DQogICAgdjk3OS5QYXJlbnQgPSB3b3Jrc3BhY2UuRWZmZWN0czsNCiAgICBmb3IgXywgdjk4MSBpbiBpcGFpcnModjk3OS5QRTpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgICAgICBpZiB2OTgxOklzQSgiUGFydGljbGVFbWl0dGVyIikgdGhlbg0KICAgICAgICAgICAgdjk4MS5FbmFibGVkID0gdHJ1ZTsNCiAgICAgICAgZW5kOw0KICAgIGVuZDsNCiAgICB0YXNrLmRlbGF5KDIsIHY5NzkuRGVzdHJveSwgdjk3OSk7DQogICAgbG9jYWwgdjk4MiA9IGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMuT2xkSXNhZ2kuUEUyOkNsb25lKCk7DQogICAgdjk4Mi5DRnJhbWUgPSB2OTY5LkNGcmFtZSAqIENGcmFtZS5uZXcoMC41LCAtMywgMC4zKTsNCiAgICB2OTgyLlBhcmVudCA9IHdvcmtzcGFjZS5FZmZlY3RzOw0KICAgIHRhc2suZGVsYXkoMSwgZnVuY3Rpb24oKSAtLVtbIExpbmU6IDQ4NzYgXV0NCiAgICAgICAgLS0gdXB2YWx1ZXM6IGxfUmVwbGljYXRlZFN0b3JhZ2VfMCAocmVmKQ0KICAgICAgICBsb2NhbCB2OTgzID0gbF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5PbGRJc2FnaS5iZzpDbG9uZSgpOw0KICAgICAgICB2OTgzOlBpdm90VG8od29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAxNSwgLTE1KSk7DQogICAgICAgIHY5ODMuUGFyZW50ID0gd29ya3NwYWNlLkVmZmVjdHM7DQogICAgICAgIHRhc2suZGVsYXkoMSwgdjk4My5EZXN0cm95LCB2OTgzKTsNCiAgICBlbmQpOw0KICAgIHRhc2sud2FpdCgyKTsNCiAgICBmb3IgXywgdjk4NSBpbiBpcGFpcnModjk4MjpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgICAgICBpZiB2OTg1OklzQSgiUGFydGljbGVFbWl0dGVyIikgdGhlbg0KICAgICAgICAgICAgdjk4NS5FbmFibGVkID0gZmFsc2U7DQogICAgICAgIGVuZDsNCiAgICBlbmQ7DQogICAgdGFzay5kZWxheSgyLCB2OTgyLkRlc3Ryb3ksIHY5ODIpOw0KICAgIGxfVHdlZW5TZXJ2aWNlXzA6Q3JlYXRlKGxfTGlnaHRpbmdfMC5BdG1vc3BoZXJlLCBUd2VlbkluZm8ubmV3KDEsIEVudW0uRWFzaW5nU3R5bGUuU2luZSwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwgew0KICAgICAgICBEZW5zaXR5ID0gMC45MjksIA0KICAgICAgICBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApLCANCiAgICAgICAgSGF6ZSA9IDQuNTUNCiAgICB9KTpQbGF5KCk7DQogICAgbG9jYWwgdjk4NiA9IGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMuT2xkSXNhZ2kubGluZTpDbG9uZSgpOw0KICAgIHY5ODYuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyh2OTY5LlBvc2l0aW9uKSAqIENGcmFtZS5uZXcoMCwgLTAuNywgMCk7DQogICAgdjk4Ni5QYXJlbnQgPSB3b3Jrc3BhY2UuRWZmZWN0czsNCiAgICB0YXNrLmRlbGF5KDAuMywgdjk4Ni5EZXN0cm95LCB2OTg2KTsNCiAgICBmb3IgXywgdjk4OCBpbiBpcGFpcnModjk3MjpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgICAgICBpZiB2OTg4OklzQSgiQmFzZVBhcnQiKSB0aGVuDQogICAgICAgICAgICBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLk9sZElzYWdpLlBvaW50TGlnaHQ6Q2xvbmUoKS5QYXJlbnQgPSB2OTg4Ow0KICAgICAgICAgICAgdjk4OC5NYXRlcmlhbCA9IEVudW0uTWF0ZXJpYWwuTmVvbjsNCiAgICAgICAgICAgIGxfVHdlZW5TZXJ2aWNlXzA6Q3JlYXRlKHY5ODgsIFR3ZWVuSW5mby5uZXcoMC4xNSksIHsNCiAgICAgICAgICAgICAgICBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDAsIDE0NSwgMjU1KQ0KICAgICAgICAgICAgfSk6UGxheSgpOw0KICAgICAgICBlbmQ7DQogICAgZW5kOw0KICAgIHRhc2sud2FpdCgxLjgpOw0KICAgIGxfVHdlZW5TZXJ2aWNlXzA6Q3JlYXRlKGxfTGlnaHRpbmdfMC5BdG1vc3BoZXJlLCBUd2VlbkluZm8ubmV3KDAuMyksIHsNCiAgICAgICAgRGVuc2l0eSA9IGxfRGVuc2l0eV8wLCANCiAgICAgICAgQ29sb3IgPSBsX0NvbG9yXzANCiAgICB9KTpQbGF5KCk7DQogICAgdjEyLkVtaXQodjk2OSwgbF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5PbGRJc2FnaS5pbTEsIDMsIENGcmFtZS5uZXcoMC45NSwgLTAuMTUsIC0zKSk7DQogICAgdjEyLmJyaWdodCgwLjMsIDEuNSk7DQogICAgdGFzay53YWl0KDAuOSk7DQogICAgdjk3MTpEZXN0cm95KCk7DQogICAgdjk3MjpEZXN0cm95KCk7DQogICAgdjEyLnNjZW5lRW5hYmxlZChmYWxzZSk7DQogICAgdjEyLmJpZ3Nob2Nrd2F2ZSh2OTY5KTsNCiAgICBlbmQsDQp9KQ0KRGlyZWN0U2hvdEJ0biA9IElzYWdpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJNWSBESVJFQ1QgU0hPVCIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiaXNhZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NTc2NTYzODE5NDA4NSINCiAgICAgICAgDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZGlyZWN0c2hvdFVsdCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KSXNhZ2lLZXliaW5kID0gSXNhZ2k6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJNWSBESVJFQ1QgU0hPVCEiLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiaXNhZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NTc2NTYzODE5NDA4NSINCiAgICAgICAgDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImRpcmVjdHNob3RVbHQiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNClUyMERpcmVjdFNob3RCdG4gPSBJc2FnaTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiVTIwIE1ZIERJUkVDVCBTSE9UIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJpc2FnaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzgwMDM4MzIyNzY5NTcxIg0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAidTIwRGlyZWN0c2hvdCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KSXNhZ2lLZXliaW5kID0gSXNhZ2k6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJVMjAgTVkgRElSRUNUIFNIT1QhIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJpc2FnaSIpDQogICAgICAgICAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84MDAzODMyMjc2OTU3MSINCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgICAgICAgICBodWg6UGxheSgpDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ1MjBEaXJlY3RzaG90IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpJc2FnaUJhY2tIZWVsQnRuID0gSXNhZ2k6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlJldmVyc2UgQmFjay1IZWVsIFNob3QiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImlzYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTMyNzIzMzc2NjY5NTA0Ig0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzMDc1NTA5ODk4MDg5OCIpWzFdDQogICAgICANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBhc3NldDpEZXN0cm95KCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICANCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICANCiAgICAgICAgYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0yLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjgyMDMyNDQ2MzEwNTQiDQogICAgICAgIGh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KICAgICAgICBodWgyOlBsYXkoKQ0KDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygtNCwwLDApDQogICAgICAgIA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYmFja2hlZWxzaG90SXNhZ2kiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCklzYWdpS2V5YmluZCA9IElzYWdpOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiUmV2ZXJzZSBCYWNrLUhlZWwgU2hvdCIsDQogICAgICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCkhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiaXNhZ2kiKQ0KICAgICAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgICAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTMyNzIzMzc2NjY5NTA0Ig0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICAgICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzMDc1NTA5ODk4MDg5OCIpWzFdDQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgICAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICBlbmQpDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgICAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgICAgICAgICAgYW5pbTIuQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyODIwMzI0NDYzMTA1NCINCiAgICAgICAgICAgICAgICBodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgICAgICAgICBodWgyOlBsYXkoKQ0KICAgICAgICANCiAgICAgICAgICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoLTQsMCwwKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYmFja2hlZWxzaG90SXNhZ2kiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCklzYWdpQmFja0hlZWxCdG4gPSBJc2FnaTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiSXNhZ2kgWCBCYWNoaXJhIENoZW0iLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiaXNhZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDA4NDM2ODg4MTM2MDIiDQogICAgICAgIA0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTM4NDc0NjYxMzYxMjE3IilbMV0gDQogICAgICAgICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTAzNzg0MDY3MDg3MTg0Ig0KICAgICAgICBodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgaHVoMjpQbGF5KCkNCg0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoNiwwLDApICogQ0ZyYW1lLkFuZ2xlcygwLCBtYXRoLnJhZCg5MCksIDApDQogYXNzZXQuTmFtZSA9ICJCYWNoaXJhIg0KICAgICAgICBsb2NhbCBib25ndXkgPSBJbnN0YW5jZS5uZXcoIlBsYXllciIsZ2FtZS5QbGF5ZXJzKQ0KICAgICAgICBib25ndXkuTmFtZSA9ICJCYWNoaXJhIg0KICAgICAgICBib25ndXkuQ2hhcmFjdGVyID0gYXNzZXQNCiAgICAgICAgYm9uZ3V5OlNldEF0dHJpYnV0ZSgic3R5bGUiLCJiYWNoaXJhIikNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBhc3NldDpEZXN0cm95KCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGJvbmd1eTpEZXN0cm95KCkNCiAgICAgICAgZW5kKQ0KICAgICAgICANCg0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImJvbklzYWdpUmVhY3Rpb24iLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldH0pDQogICAgZW5kLA0KfSkNCklzYWdpS2V5YmluZCA9IElzYWdpOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiSXNhZ2kgWCBCYWNoaXJhIENoZW0iLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJpc2FnaSIpDQphbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTAwODQzNjg4ODEzNjAyIg0KDQpodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCmh1aDpQbGF5KCkNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQpzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQphc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzODQ3NDY2MTM2MTIxNyIpWzFdDQogICAgICBhc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCmFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KDQphbmltMiA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCmFuaW0yLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDM3ODQwNjcwODcxODQiDQpodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCmh1aDI6UGxheSgpDQoNCmFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldyg2LDAsMCkgKiBDRnJhbWUuQW5nbGVzKDAsIG1hdGgucmFkKDkwKSwgMCkNCmFzc2V0Lk5hbWUgPSAiQmFjaGlyYSINCmxvY2FsIGJvbmd1eSA9IEluc3RhbmNlLm5ldygiUGxheWVyIixnYW1lLlBsYXllcnMpDQpib25ndXkuTmFtZSA9ICJCYWNoaXJhIg0KYm9uZ3V5LkNoYXJhY3RlciA9IGFzc2V0DQpib25ndXk6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhY2hpcmEiKQ0Kc3Bhd24oZnVuY3Rpb24oKQ0KICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICBhc3NldDpEZXN0cm95KCkNCiAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgYm9uZ3V5OkRlc3Ryb3koKQ0KZW5kKQ0KDQoNCmZpcmVFdmVudChwYWNrZXRUeXBlLCAiYm9uSXNhZ2lSZWFjdGlvbiIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkNCiBlbmQsDQp9KQ0KVHdvR3VuT2xkQnRuID0gSXNhZ2k6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlR3byBHdW4gVm9sbGV5KE9sZCkiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImlzYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzUzOTY4OTY1MDY1MjQiDQogICAgICAgIA0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgZW5kKQ0KICAgICAgICANCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInR3b2d1biIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KSXNhZ2lLZXliaW5kID0gSXNhZ2k6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJUd28gR3VuIFZvbGxleShPbGQpIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJpc2FnaSIpDQogICAgICAgICAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NTM5Njg5NjUwNjUyNCINCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgICAgICAgICBodWg6UGxheSgpDQogICAgICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ0d29ndW4iLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNClR3b0d1bk5ld0J0biA9IElzYWdpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJUd28gR3VuIFZvbGxleShOZXcpIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJpc2FnaSIpDQogICAgICAgIGFuaW0gPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmlzYWdpLk5FV3R3b2d1bg0KICAgICAgICANCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgIGVuZCkNCiAgICAgICAgDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiTkVXdHdvZ3VuIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpJc2FnaUtleWJpbmQgPSBJc2FnaTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIlR3byBHdW4gVm9sbGV5KE5ldykiLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImlzYWdpIikNCiAgICAgICAgICAgICAgICBhbmltID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5pc2FnaS5ORVd0d29ndW4NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgICAgICAgICBodWg6UGxheSgpDQogICAgICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiTkVXdHdvZ3VuIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpNb3ZlSXRCdG4gPSBJc2FnaTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiTU9WRSBJVCEiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImlzYWdpIikNCmFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQphbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDg4NDA2NDU5MTkzODkiDQpodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCmh1aDpQbGF5KCkNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQphc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzOTcwOTUyMzg2NjIyNCIpWzFdDQoNCnNwYXduKGZ1bmN0aW9uKCkNCiAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgYXNzZXQ6RGVzdHJveSgpDQplbmQpDQoNCmFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQoNCmFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KYW5pbTIuQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEwNDUzNjM4MTExNzIxNyINCmh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KaHVoMjpQbGF5KCkNCg0KYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUNCmZyb250T2Zmc2V0ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUuTG9va1ZlY3RvciAqIDUNCm5ld1Bvc2l0aW9uID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiArIGZyb250T2Zmc2V0DQoNCmFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcobmV3UG9zaXRpb24sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24pDQoNCmZpcmVFdmVudChwYWNrZXRUeXBlLCAiTU9WRUlUIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsYXNzZXR9KQ0KICAgIGVuZCwNCn0pDQpJc2FnaUtleWJpbmQgPSBJc2FnaTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIk1PVkUgSVQhIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImlzYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTA4ODQwNjQ1OTE5Mzg5Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzOTcwOTUyMzg2NjIyNCIpWzFdDQogICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgDQogICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTA0NTM2MzgxMTE3MjE3Ig0KICAgICAgICBodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgaHVoMjpQbGF5KCkNCiAgICAgICAgDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lDQogICAgICAgIGZyb250T2Zmc2V0ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUuTG9va1ZlY3RvciAqIDUNCiAgICAgICAgbmV3UG9zaXRpb24gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uICsgZnJvbnRPZmZzZXQNCiAgICAgICAgDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcobmV3UG9zaXRpb24sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24pDQogICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIk1PVkVJVCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkNCiAgICBlbmQsDQp9KQ0KLS0gQUlLVSAtLQ0KQWlrdVNlYyA9IEFpa3U6Q3JlYXRlU2VjdGlvbigiVGhlIERlZmVuc2UvQ00gT2YgVS0yMCIpDQoNClNlcnBlbnRzd2F5ID0gQWlrdTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiU2VycGVudFwncyBTd2F5IiwNCiAgDQogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmFpa3UuZHJpYmJsZWJhY2ssIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgICAgICBlbmQpDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImFpa3UiKQ0KICAgICAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzcxOTIwMzY2MzQzODA2Ig0KICAgICAgICAgICAgDQogICAgICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgd2FpdCgwLjYpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5haWt1LmRhc2gsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgICAgDQogICAgICAgICBlbmQpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgIA0KICAgICAgICANCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNlcnBlbnRzd2F5IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgICAgICBlbmQsDQp9KQ0KQWlrdUtleWJpbmQgPSBBaWt1OkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiU2VycGVudFwncyBTd2F5IiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5haWt1LmRyaWJibGViYWNrLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICAgICAgZW5kKQ0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJhaWt1IikNCiAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83MTkyMDM2NjM0MzgwNiINCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgICAgICBodWg6UGxheSgpDQogICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgIHdhaXQoMC42KQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuYWlrdS5kYXNoLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICAgIA0KICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICANCiAgICAgICAgDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJzZXJwZW50c3dheSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgICAgICAgICANCiAgICBlbmQsDQp9KQ0KUmVmbGV4ID0gQWlrdTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiUmVmbGV4IFRhY2tsZSIsDQogIA0KICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJhaWt1IikNCiAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTMzMzgyNzMxMzkyNzQ5Ig0KICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuYWlrdVsid2luZHVwICgyKSJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgIGVuZCkNCiAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICBodWg6UGxheSgpDQogc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0Kc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInJlZmxleFRhY2tsZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICAgICAgZW5kLA0KfSkNCkFpa3VLZXliaW5kID0gQWlrdTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIlJlZmxleCBUYWNrbGUiLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJhaWt1IikNCiAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTMzMzgyNzMxMzkyNzQ5Ig0KICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuYWlrdVsid2luZHVwICgyKSJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgIGVuZCkNCiAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICBodWg6UGxheSgpDQogc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0Kc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInJlZmxleFRhY2tsZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KVmVub20gPSBBaWt1OkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJWZW5vbSBUcmFwIiwNCiAgDQogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICAgIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJhaWt1IikNCiAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMzc0MTcxOTU1NTg1MTgiDQogICAgDQogICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgaHVoOlBsYXkoKQ0KICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQoNCiAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgZW5kKQ0KDQoNCiAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYWlrdXRyYXAiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogIA0KDQoNCiAgICAgICAgZW5kLA0KfSkNCkFpa3VLZXliaW5kID0gQWlrdTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIlZlbm9tIFRyYXAiLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImFpa3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEzNzQxNzE5NTU1ODUxOCINCiAgICAgICANCiAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICBodWg6UGxheSgpDQogICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgIA0KICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICBlbmQpDQogICANCiAgIA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYWlrdXRyYXAiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgIA0KICAgIGVuZCwNCn0pDQpBd2sgPSBBaWt1OkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICANCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIA0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImFpa3UiKQ0KICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTA4NjkxOTY1ODYxNzYzIg0KICAgIA0KICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgIGh1aDpQbGF5KCkNCiAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzcxNzAyNzAwNzA3NzcwIilbMV0NCiAgICANCiAgIA0KICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KDQogICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUNCiAgICBhc3NldC5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICBhbmltMiA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTAwNjUyODc2NDQ4MzA3Ig0KICAgIA0KICAgIGh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KICAgIGh1aDI6UGxheSgpDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICBhc3NldDpEZXN0cm95KCkNCiAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgZW5kKQ0KDQppZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLmFpa3UuYWlrdXRoZW1lLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcykuYWlrdS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYWlrdUF3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICAgICAgZW5kLA0KfSkNCg0KDQpBaWt1S2V5YmluZCA9IEFpa3U6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICANCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImFpa3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDg2OTE5NjU4NjE3NjMiDQogIA0KICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgaHVoOlBsYXkoKQ0KICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzcxNzAyNzAwNzA3NzcwIilbMV0NCiAgDQogDQogIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KDQogIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lDQogIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICBhbmltMiA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgYW5pbTIuQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEwMDY1Mjg3NjQ0ODMwNyINCiAgDQogIGh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KICBodWgyOlBsYXkoKQ0KICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogIHNwYXduKGZ1bmN0aW9uKCkNCiAgd2FpdChodWguTGVuZ3RoKQ0KICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgYXNzZXQ6RGVzdHJveSgpDQogIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgZW5kKQ0KaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5haWt1LmFpa3V0aGVtZSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpLmFpa3UuY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQoNCg0KICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhaWt1QXdrIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpOYXdrID0gQWlrdTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiT2ZmIFRoZSBCYWxsIEF3YWtlbmluZyIsDQogIA0KICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiYWlrdSIpDQogICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzk0NjM2NjI1NDY3MDUzIg0KICAgIA0KICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgIGh1aDpQbGF5KCkNCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICBzcGF3bihmdW5jdGlvbigpDQogICAgd2FpdChodWguTGVuZ3RoKQ0KICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KDQogICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgIGVuZCkNCg0KDQogICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5haWt1LmFpa3V0aGVtZSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpLmFpa3UuY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIm9mZnRoZWJhbGxBd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgICAgIGVuZCwNCn0pDQoNCkFpa3VLZXliaW5kID0gQWlrdTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIk9mZiBUaGUgQmFsbCBBd2FrZW5pbmciLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICANCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImFpa3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vOTQ2MzY2MjU0NjcwNTMiDQogICANCiAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgaHVoOlBsYXkoKQ0KICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KDQogICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICBlbmQpDQppZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLmFpa3UuYWlrdXRoZW1lLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcykuYWlrdS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCg0KICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJvZmZ0aGViYWxsQXdrIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQp1ZCA9IEFpa3U6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlVsdGltYXRlIERlZmVuc2UiLA0KICANCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiYWlrdSIpDQogICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTE5MjMyOTQyNzkwMDg5Ig0KICAgIA0KICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgIGh1aDpQbGF5KCkNCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICBzcGF3bihmdW5jdGlvbigpDQogICAgd2FpdChodWguTGVuZ3RoKQ0KICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KDQogICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgIGVuZCkNCg0KDQogICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNlcnBlbnRkZWZlbnNlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgICAgICBlbmQsDQp9KQ0KDQpBaWt1S2V5YmluZCA9IEFpa3U6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJVbHRpbWF0ZSBEZWZlbnNlIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImFpa3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExOTIzMjk0Mjc5MDA4OSINCiAgICAgICANCiAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICBodWg6UGxheSgpDQogICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgIA0KICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICBlbmQpDQogICANCiAgIA0KICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJzZXJwZW50ZGVmZW5zZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KRm9ybWVyID0gQWlrdTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiRm9ybWVyIFN0cmlrZXIiLA0KICANCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiYWlrdSIpDQogICAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTEzOTcyMDczMDExNzIxIg0KICAgIA0KICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgIGh1aDpQbGF5KCkNCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICBzcGF3bihmdW5jdGlvbigpDQogICAgd2FpdChodWguTGVuZ3RoKQ0KICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KDQogICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgIGVuZCkNCg0KDQogICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJmb3JtZXJzdHJpa2VyIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgICAgICBlbmQsDQp9KQ0KDQpBaWt1S2V5YmluZCA9IEFpa3U6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJGb3JtZXIgU3RyaWtlciIsDQogICAgICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCkhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiYWlrdSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQphbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMTM5NzIwNzMwMTE3MjEiDQoNCmh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KaHVoOlBsYXkoKQ0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCnNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCnNwYXduKGZ1bmN0aW9uKCkNCndhaXQoaHVoLkxlbmd0aCkNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KDQpzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQplbmQpDQoNCmZpcmVFdmVudChwYWNrZXRUeXBlLCAiZm9ybWVyc3RyaWtlciIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KLS0gTkFHSSAtLQ0KTmFnaVNlYyA9IE5hZ2k6Q3JlYXRlU2VjdGlvbigiU2xlZXBpbmcgR2VuaXVzIikNCg0KRmFrZVZvbGxleUJ0biA9IE5hZ2k6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkZha2UgVm9sbGV5IiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLm5hZ2lbIkZha2UgVm9sbGV5Il0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIGVuZCkNCiAgICAgICAgICANCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwibmFnaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzcxNjQwMTA5NjQ2ODQzIg0KDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJmYWtldm9sbGV5IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQoNCk5hZ2lLZXliaW5kID0gTmFnaTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkZha2UgVm9sbGV5IiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLm5hZ2lbIkZha2UgVm9sbGV5Il0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgICAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwibmFnaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzcxNjQwMTA5NjQ2ODQzIg0KDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJmYWtldm9sbGV5IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQoNCkNvbnRyb2xXaW5kdXBCdG4gPSBOYWdpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJHcm91bmQgQ29udHJvbChXaW5kdXApIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLm5hZ2kuR3JvdW5kQ29udHJvbFN0YXJ0LCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICBlbmQpDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIm5hZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NzM3MDExNTAxMTM2OCINCg0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICANCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImdyb3VuZGNvbnRyb2xzdGFydCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KTmFnaUtleWJpbmQgPSBOYWdpOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiR3JvdW5kIENvbnRyb2wgKFdpbmR1cCkiLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLm5hZ2kuR3JvdW5kQ29udHJvbFN0YXJ0LCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICBlbmQpDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIm5hZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NzM3MDExNTAxMTM2OCINCg0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICANCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImdyb3VuZGNvbnRyb2xzdGFydCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICAgICAgICAgICAgICBlbmQsDQp9KQ0KQ29udHJvbFdpbmR1cEJ0biA9IE5hZ2k6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkdyb3VuZCBDb250cm9sKEhpdCkiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5uYWdpLkdyb3VuZENvbnRyb2xDb25maXJtLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICBlbmQpDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIm5hZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83ODI4MDk1MjU0NjI1OSINCnNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImdyb3VuZGNvbnRyb2xjb25maXJtIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpOYWdpS2V5YmluZCA9IE5hZ2k6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJHcm91bmQgQ29udHJvbCAoSGl0KSIsDQogICAgICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCkhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLm5hZ2kuR3JvdW5kQ29udHJvbENvbmZpcm0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIGVuZCkNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwibmFnaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzc4MjgwOTUyNTQ2MjU5Ig0Kc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZ3JvdW5kY29udHJvbGNvbmZpcm0iLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgICAgICAgICAgICAgZW5kLA0KfSkNCkNvbnRyb2xXaW5kdXBCdG4gPSBOYWdpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJBSVIgQ29udHJvbChXaW5kdXApIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLm5hZ2kuanVtcCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgZW5kKQ0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJuYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTM1NzUyNzQyMjY3MDE4Ig0KDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIm5hZ2ljb250cm9sd2luZHVwIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpOYWdpS2V5YmluZCA9IE5hZ2k6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBSVIgQ29udHJvbCAoV2luZHVwKSIsDQogICAgICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCkhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLm5hZ2kuanVtcCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgZW5kKQ0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJuYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTM1NzUyNzQyMjY3MDE4Ig0KDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIm5hZ2ljb250cm9sd2luZHVwIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpDb250cm9sSGl0QnRuID0gTmFnaTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQUlSIENvbnRyb2woSGl0KSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5uYWdpWyJjYXRjaCBiYWxsIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIGVuZCkgDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIm5hZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NjM5OTk0MjAxMjE1MSINCg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAibmFnaWNvbnRyb2wiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCk5hZ2lLZXliaW5kID0gTmFnaTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkFJUiBDb250cm9sKEhpdCkiLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMubmFnaVsiY2F0Y2ggYmFsbCJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICBlbmQpIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJuYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzYzOTk5NDIwMTIxNTEiDQoNCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIm5hZ2ljb250cm9sIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpDb250cm9sSGl0QnRuID0gTmFnaTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiWmVybyBSZXNldCBUdXJuKFNvbWUgVkZYIEFyZSBNaXNzaW5nKSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwibmFnaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEzMDExMzcyMDg4Mzc2OSINCg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIm5hZ2k0IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpOYWdpS2V5YmluZCA9IE5hZ2k6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJaZXJvIFJlc2V0IFR1cm4oU29tZSBWRlggQXJlIE1pc3NpbmcpIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIm5hZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMzAxMTM3MjA4ODM3NjkiDQoNCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJuYWdpNCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KQ29udHJvbFZhcmlhbnRCdG4gPSBOYWdpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJDb250cm9sKFZBUklBTlQgb2xkKSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5uYWdpLmJsb2NrZWRfMSwgd29ya3NwYWNlKQ0KICAgICAgICBlbmQpDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIm5hZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83Mjc5OTcwMDgxMDc4NCINCg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAibmFnaWNvbnRyb2xhd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCk5hZ2lLZXliaW5kID0gTmFnaTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkNvbnRyb2woVkFSSUFOVCBvbGQpIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLm5hZ2kuYmxvY2tlZF8xLCB3b3Jrc3BhY2UpDQogICAgICAgIGVuZCkNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwibmFnaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzcyNzk5NzAwODEwNzg0Ig0KDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJuYWdpY29udHJvbGF3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICAgICAgZW5kLA0KfSkNCkNvbnRyb2xWYXJpYW50QnRuID0gTmFnaTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQ29udHJvbChWQVJJQU5UKSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwibmFnaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExNzc2NDEyMDYxMzA0NCINCg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIm5ld2NvbnRyb2xnb2FsIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpOYWdpS2V5YmluZCA9IE5hZ2k6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJDb250cm9sKFZBUklBTlQpIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICANCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIm5hZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMTc3NjQxMjA2MTMwNDQiDQoNCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJuZXdjb250cm9sZ29hbCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KDQpIZWF2eVZhcmlhbnRCdG4gPSBOYWdpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJIZWF2eShWYXJpYW50KSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJuYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTMwMzcyMTY4OTEwNTM4Ig0KDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgZW5kKQ0KICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJyb3VsZXR0ZXZvbGxleSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KTmFnaUtleWJpbmQgPSBOYWdpOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiSGVhdnkoVmFyaWFudCkiLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwibmFnaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEzMDM3MjE2ODkxMDUzOCINCg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgIGVuZCkNCiAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAicm91bGV0dGV2b2xsZXkiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkNvbnRyb2xIaXRCdG4gPSBOYWdpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJPbGQgQXdha2VuaW5nIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIm5hZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMzI5MzY1ODM2NDExODIiDQoNCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5uYWdpWyJuYWdpIHRoZW1lIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKS5uYWdpLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KDQpsb2NhbCBsX1BsYXllcnNfMCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOw0KbG9jYWwgbF9SZXBsaWNhdGVkU3RvcmFnZV8wID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOw0KbG9jYWwgXyA9IGdhbWU6R2V0U2VydmljZSgiU2VydmVyU3RvcmFnZSIpOw0KbG9jYWwgbF9SdW5TZXJ2aWNlXzAgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKTsNCmxvY2FsIF8gPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKTsNCmxvY2FsIGxfVHdlZW5TZXJ2aWNlXzAgPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpOw0KbG9jYWwgbF9EZWJyaXNfMCA9IGdhbWU6R2V0U2VydmljZSgiRGVicmlzIik7DQpsb2NhbCBfID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb2xsZWN0aW9uU2VydmljZSIpOw0KbG9jYWwgbF9MaWdodGluZ18wID0gZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpOw0KbG9jYWwgbF9Tb3VuZFNlcnZpY2VfMCA9IGdhbWU6R2V0U2VydmljZSgiU291bmRTZXJ2aWNlIik7DQpsb2NhbCBfID0gZ2FtZTpHZXRTZXJ2aWNlKCJUZXh0U2VydmljZSIpOw0KbG9jYWwgXyA9IGdhbWU6R2V0U2VydmljZSgiQ29udGVudFByb3ZpZGVyIik7DQpsb2NhbCBsX0N1cnJlbnRDYW1lcmFfMCA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhOw0KbG9jYWwgbF9Mb2NhbFBsYXllcl8wID0gbF9QbGF5ZXJzXzAuTG9jYWxQbGF5ZXI7DQpsb2NhbCBsX1BsYXllckd1aV8wID0gbF9Mb2NhbFBsYXllcl8wLlBsYXllckd1aTsNCmxvY2FsIGxfbF9Mb2NhbFBsYXllcl8wX01vdXNlXzAgPSBsX0xvY2FsUGxheWVyXzA6R2V0TW91c2UoKTsNCmxvY2FsIGxfQ29sb3JfMCA9IGxfTGlnaHRpbmdfMC5BdG1vc3BoZXJlLkNvbG9yOw0KbG9jYWwgbF9EZW5zaXR5XzAgPSBsX0xpZ2h0aW5nXzAuQXRtb3NwaGVyZS5EZW5zaXR5Ow0KbG9jYWwgbF9CcmlnaHRuZXNzXzAgPSBsX0xpZ2h0aW5nXzAuQnJpZ2h0bmVzczsNCmxvY2FsIGxfQ2xvY2tUaW1lXzAgPSBsX0xpZ2h0aW5nXzAuQ2xvY2tUaW1lOw0KbG9jYWwgbF9BbWJpZW50XzAgPSBsX0xpZ2h0aW5nXzAuQW1iaWVudDsNCmxvY2FsIGxfVGhyZXNob2xkXzAgPSBsX0xpZ2h0aW5nXzAuQmxvb20uVGhyZXNob2xkOw0KbG9jYWwgXyA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5jbGllbnQucmVwbGljYXRpb24uQmV6aWVyQ3VydmUpOw0KbG9jYWwgdjI0ID0gcmVxdWlyZShsX1JlcGxpY2F0ZWRTdG9yYWdlXzAudXRpbC5yYXljYXN0KTsNCmxvY2FsIHYyNSA9IHJlcXVpcmUobF9SZXBsaWNhdGVkU3RvcmFnZV8wLnV0aWwuYW5pbWF0aW9uVXRpbCk7DQpsb2NhbCB2MjYgPSByZXF1aXJlKGxfUmVwbGljYXRlZFN0b3JhZ2VfMC51dGlsLnNvdW5kVXRpbCk7DQpsb2NhbCBfID0gcmVxdWlyZShsX1JlcGxpY2F0ZWRTdG9yYWdlXzAudXRpbC5hY3Rpb25VdGlsKTsNCmxvY2FsIHYyOCA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5jbGllbnQucmVwbGljYXRpb24uVGVrcmlubkRpYWxvZ3VlKTsNCmxvY2FsIHYyOSA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5jbGllbnQucmVwbGljYXRpb24ubWFpbnJlcGxpY2F0aW9uKTsNCmxvY2FsIHYzMCA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5jbGllbnQucmVwbGljYXRpb24uSW52aXNpYmxlKTsNCmxvY2FsIHYzMSA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5jbGllbnQucmVwbGljYXRpb24uTWVzaEVtaXR0ZXIpOw0KbG9jYWwgXyA9IHJlcXVpcmUobF9SZXBsaWNhdGVkU3RvcmFnZV8wLnV0aWwuRWFzaW5nRnVuY3Rpb25zKTsNCmxvY2FsIHYxMiA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5jbGllbnQucmVwbGljYXRpb24ubWFpbnJlcGxpY2F0aW9uKTsNCmxvY2FsIHYxMjI1ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcg0KbG9jYWwgdjEyMjYgPSB2MTIyNS5IdW1hbm9pZFJvb3RQYXJ0IG9yIHYxMjI1LlByaW1hcnlQYXJ0Ow0KICAgIGxvY2FsIF8gPSB2MTIyNS5Ub3JzbzsNCiAgICB2MTIuc2NlbmVFbmFibGVkKHRydWUpOw0KICAgIHRhc2suZGVsYXkoMC42MzMsIGZ1bmN0aW9uKCkgLS1bWyBMaW5lOiA2MDY4IF1dDQogICAgICAgIC0tIHVwdmFsdWVzOiB2MjggKHJlZiksIHYxMjI1IChjb3B5KQ0KICAgICAgICB2MjguU3BlYWsodjEyMjUsIHsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBUZXh0ID0gIllvdSBjYW4ndCBiZWF0IG1lLiIsIA0KICAgICAgICAgICAgICAgIENvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoew0KICAgICAgICAgICAgICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIENvbG9yMy5mcm9tUkdCKDIwMSwgMjA2LCAyNTUpKSwgDQogICAgICAgICAgICAgICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkpDQogICAgICAgICAgICAgICAgfSksIA0KICAgICAgICAgICAgICAgIFRleHRTdHJva2VDb2xvciA9IENvbG9yMy5uZXcoMCwgMCwgMCksIA0KICAgICAgICAgICAgICAgIEJvbGQgPSBmYWxzZSwgDQogICAgICAgICAgICAgICAgSXRhbGljID0gZmFsc2UsIA0KICAgICAgICAgICAgICAgIFNoYWtlID0gew0KICAgICAgICAgICAgICAgICAgICBFbmFibGVkID0gZmFsc2UsIA0KICAgICAgICAgICAgICAgICAgICBJbnRlbnNpdHkgPSAxLjMsIA0KICAgICAgICAgICAgICAgICAgICBMaWZldGltZSA9IDQNCiAgICAgICAgICAgICAgICB9LCANCiAgICAgICAgICAgICAgICBUeXBlU3BlZWQgPSAwLjAzDQogICAgICAgICAgICB9DQogICAgICAgIH0sIDIuODY3KTsNCiAgICBlbmQpOw0KICAgIHRhc2suZGVsYXkoNC41ODMsIGZ1bmN0aW9uKCkgLS1bWyBMaW5lOiA2MDk0IF1dDQogICAgICAgIC0tIHVwdmFsdWVzOiB2MjggKHJlZiksIHYxMjI1IChjb3B5KQ0KICAgICAgICB2MjguU3BlYWsodjEyMjUsIHsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBUZXh0ID0gIkJyaW5nIGl0LiIsIA0KICAgICAgICAgICAgICAgIENvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoew0KICAgICAgICAgICAgICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIENvbG9yMy5mcm9tUkdCKDAsIDAsIDApKSwgDQogICAgICAgICAgICAgICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLmZyb21SR0IoMjU1LCAwLCA0KSkNCiAgICAgICAgICAgICAgICB9KSwgDQogICAgICAgICAgICAgICAgVGV4dFN0cm9rZUNvbG9yID0gQ29sb3IzLm5ldygwLCAwLCAwKSwgDQogICAgICAgICAgICAgICAgQm9sZCA9IHRydWUsIA0KICAgICAgICAgICAgICAgIEl0YWxpYyA9IHRydWUsIA0KICAgICAgICAgICAgICAgIFNoYWtlID0gew0KICAgICAgICAgICAgICAgICAgICBFbmFibGVkID0gdHJ1ZSwgDQogICAgICAgICAgICAgICAgICAgIEludGVuc2l0eSA9IDMsIA0KICAgICAgICAgICAgICAgICAgICBMaWZldGltZSA9IDENCiAgICAgICAgICAgICAgICB9LCANCiAgICAgICAgICAgICAgICBUeXBlU3BlZWQgPSAwLjAxDQogICAgICAgICAgICB9DQogICAgICAgIH0sIDEpOw0KICAgIGVuZCk7DQogICAgbF9MaWdodGluZ18wLkF0bW9zcGhlcmUuRGVuc2l0eSA9IDAuNzsNCiAgICBsX0xpZ2h0aW5nXzAuQXRtb3NwaGVyZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApOw0KICAgIGxfTGlnaHRpbmdfMC5BdG1vc3BoZXJlLkhhemUgPSA0LjU1Ow0KICAgIGxvY2FsIHYxMjI4ID0gbF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5kYXJrc2NyZWVuOkNsb25lKCk7DQogICAgdjEyMjguUGFyZW50ID0gbF9QbGF5ZXJHdWlfMDsNCiAgICBsb2NhbCB2MTIyOSA9IGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMubmFnaS5zS1VMTDpDbG9uZSgpOw0KICAgIHYxMjI5LlBhcmVudCA9IHYxMjI1Ow0KICAgIHYxMjI5LnNLVUxMLlBhcnQwID0gdjEyMjY7DQogICAgbG9jYWwgdjEyMzAgPSBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLkRlcHRoT2ZGaWVsZDpDbG9uZSgpOw0KICAgIHYxMjMwLlBhcmVudCA9IGxfTGlnaHRpbmdfMDsNCiAgICB2MTIzMC5GYXJJbnRlbnNpdHkgPSAwOw0KICAgIGxfVHdlZW5TZXJ2aWNlXzA6Q3JlYXRlKHYxMjMwLCBUd2VlbkluZm8ubmV3KDAuNSwgRW51bS5FYXNpbmdTdHlsZS5TaW5lLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7DQogICAgICAgIEZhckludGVuc2l0eSA9IDENCiAgICB9KTpQbGF5KCk7DQogICAgbG9jYWwgdjEyMzEgPSBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLm5hZ2kuQ29sb3JDb3JyZWN0aW9uMjpDbG9uZSgpOw0KICAgIHYxMjMxLlBhcmVudCA9IGxfTGlnaHRpbmdfMDsNCiAgICB2MjY6cGxheShsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLm5hZ2lbIm5hZ2kgYXdha2VuIl0sIGxfU291bmRTZXJ2aWNlXzApOw0KICAgIHYxMi5jdXRzY2VuZSh2MTIyNiwgQ0ZyYW1lLm5ldygoVmVjdG9yMy5uZXcoMCwgMCwgMCwgMCkpKSwgNy4wODMzMzM0OTIyNzkwNTMsIGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMubmFnaVsiMkZPViJdKTsNCiAgICBsb2NhbCB2MTIzMiA9IGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMubmFnaS5hd2FmbG9vcjpDbG9uZSgpOw0KICAgIHYxMjMyLkNGcmFtZSA9IHYxMjI2LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgLTMsIDApOw0KICAgIHYxMjMyLlBhcmVudCA9IHYxMjI1Ow0KICAgIHYxMi5icmlnaHQoMSwgMS41KTsNCiAgICB0YXNrLndhaXQoNy4wODMzMzM0OTIyNzkwNTMpOw0KICAgIHYxMi51bHRGbGFzaCgtMSk7DQogICAgdjEyMjg6RGVzdHJveSgpOw0KICAgIHYxMjMxOkRlc3Ryb3koKTsNCiAgICB2MTIyOTpEZXN0cm95KCk7DQogICAgdjEyMzI6RGVzdHJveSgpOw0KICAgIGxfTGlnaHRpbmdfMC5BdG1vc3BoZXJlLkRlbnNpdHkgPSBsX0RlbnNpdHlfMDsNCiAgICBsX0xpZ2h0aW5nXzAuQXRtb3NwaGVyZS5Db2xvciA9IGxfQ29sb3JfMDsNCiAgICBsX0xpZ2h0aW5nXzAuQXRtb3NwaGVyZS5IYXplID0gMzsNCiAgICB2MTIzMDpEZXN0cm95KCk7DQogICAgdjEyLmZvdihmYWxzZSwgNDApOw0KICAgIHYxMi5mb3YodHJ1ZSwgNzAsIDIsIEVudW0uRWFzaW5nU3R5bGUuU2luZSwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KTsNCiAgICB2MTIuc2NlbmVFbmFibGVkKGZhbHNlKTsNCiAgICBlbmQsDQp9KQ0KTmFnaUtleWJpbmQgPSBOYWdpOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiT2xkIEF3YWtlbmluZyIsDQogICAgICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCkhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIA0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIm5hZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMzI5MzY1ODM2NDExODIiDQoNCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5uYWdpWyJuYWdpIHRoZW1lIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKS5uYWdpLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KbG9jYWwgbF9QbGF5ZXJzXzAgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTsNCmxvY2FsIGxfUmVwbGljYXRlZFN0b3JhZ2VfMCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTsNCmxvY2FsIF8gPSBnYW1lOkdldFNlcnZpY2UoIlNlcnZlclN0b3JhZ2UiKTsNCmxvY2FsIGxfUnVuU2VydmljZV8wID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIik7DQpsb2NhbCBfID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIik7DQpsb2NhbCBsX1R3ZWVuU2VydmljZV8wID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTsNCmxvY2FsIGxfRGVicmlzXzAgPSBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOw0KbG9jYWwgXyA9IGdhbWU6R2V0U2VydmljZSgiQ29sbGVjdGlvblNlcnZpY2UiKTsNCmxvY2FsIGxfTGlnaHRpbmdfMCA9IGdhbWU6R2V0U2VydmljZSgiTGlnaHRpbmciKTsNCmxvY2FsIGxfU291bmRTZXJ2aWNlXzAgPSBnYW1lOkdldFNlcnZpY2UoIlNvdW5kU2VydmljZSIpOw0KbG9jYWwgXyA9IGdhbWU6R2V0U2VydmljZSgiVGV4dFNlcnZpY2UiKTsNCmxvY2FsIF8gPSBnYW1lOkdldFNlcnZpY2UoIkNvbnRlbnRQcm92aWRlciIpOw0KbG9jYWwgbF9DdXJyZW50Q2FtZXJhXzAgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYTsNCmxvY2FsIGxfTG9jYWxQbGF5ZXJfMCA9IGxfUGxheWVyc18wLkxvY2FsUGxheWVyOw0KbG9jYWwgbF9QbGF5ZXJHdWlfMCA9IGxfTG9jYWxQbGF5ZXJfMC5QbGF5ZXJHdWk7DQpsb2NhbCBsX2xfTG9jYWxQbGF5ZXJfMF9Nb3VzZV8wID0gbF9Mb2NhbFBsYXllcl8wOkdldE1vdXNlKCk7DQpsb2NhbCBsX0NvbG9yXzAgPSBsX0xpZ2h0aW5nXzAuQXRtb3NwaGVyZS5Db2xvcjsNCmxvY2FsIGxfRGVuc2l0eV8wID0gbF9MaWdodGluZ18wLkF0bW9zcGhlcmUuRGVuc2l0eTsNCmxvY2FsIGxfQnJpZ2h0bmVzc18wID0gbF9MaWdodGluZ18wLkJyaWdodG5lc3M7DQpsb2NhbCBsX0Nsb2NrVGltZV8wID0gbF9MaWdodGluZ18wLkNsb2NrVGltZTsNCmxvY2FsIGxfQW1iaWVudF8wID0gbF9MaWdodGluZ18wLkFtYmllbnQ7DQpsb2NhbCBsX1RocmVzaG9sZF8wID0gbF9MaWdodGluZ18wLkJsb29tLlRocmVzaG9sZDsNCmxvY2FsIF8gPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuY2xpZW50LnJlcGxpY2F0aW9uLkJlemllckN1cnZlKTsNCmxvY2FsIHYyNCA9IHJlcXVpcmUobF9SZXBsaWNhdGVkU3RvcmFnZV8wLnV0aWwucmF5Y2FzdCk7DQpsb2NhbCB2MjUgPSByZXF1aXJlKGxfUmVwbGljYXRlZFN0b3JhZ2VfMC51dGlsLmFuaW1hdGlvblV0aWwpOw0KbG9jYWwgdjI2ID0gcmVxdWlyZShsX1JlcGxpY2F0ZWRTdG9yYWdlXzAudXRpbC5zb3VuZFV0aWwpOw0KbG9jYWwgXyA9IHJlcXVpcmUobF9SZXBsaWNhdGVkU3RvcmFnZV8wLnV0aWwuYWN0aW9uVXRpbCk7DQpsb2NhbCB2MjggPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuY2xpZW50LnJlcGxpY2F0aW9uLlRla3Jpbm5EaWFsb2d1ZSk7DQpsb2NhbCB2MjkgPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuY2xpZW50LnJlcGxpY2F0aW9uLm1haW5yZXBsaWNhdGlvbik7DQpsb2NhbCB2MzAgPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuY2xpZW50LnJlcGxpY2F0aW9uLkludmlzaWJsZSk7DQpsb2NhbCB2MzEgPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuY2xpZW50LnJlcGxpY2F0aW9uLk1lc2hFbWl0dGVyKTsNCmxvY2FsIF8gPSByZXF1aXJlKGxfUmVwbGljYXRlZFN0b3JhZ2VfMC51dGlsLkVhc2luZ0Z1bmN0aW9ucyk7DQpsb2NhbCB2MTIgPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuY2xpZW50LnJlcGxpY2F0aW9uLm1haW5yZXBsaWNhdGlvbik7DQpsb2NhbCB2MTIyNSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXINCmxvY2FsIHYxMjI2ID0gdjEyMjUuSHVtYW5vaWRSb290UGFydCBvciB2MTIyNS5QcmltYXJ5UGFydDsNCiAgICBsb2NhbCBfID0gdjEyMjUuVG9yc287DQogICAgdjEyLnNjZW5lRW5hYmxlZCh0cnVlKTsNCiAgICB0YXNrLmRlbGF5KDAuNjMzLCBmdW5jdGlvbigpIC0tW1sgTGluZTogNjA2OCBdXQ0KICAgICAgICAtLSB1cHZhbHVlczogdjI4IChyZWYpLCB2MTIyNSAoY29weSkNCiAgICAgICAgdjI4LlNwZWFrKHYxMjI1LCB7DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgVGV4dCA9ICJZb3UgY2FuJ3QgYmVhdCBtZS4iLCANCiAgICAgICAgICAgICAgICBDb2xvciA9IENvbG9yU2VxdWVuY2UubmV3KHsNCiAgICAgICAgICAgICAgICAgICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMuZnJvbVJHQigyMDEsIDIwNiwgMjU1KSksIA0KICAgICAgICAgICAgICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEsIENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpKQ0KICAgICAgICAgICAgICAgIH0pLCANCiAgICAgICAgICAgICAgICBUZXh0U3Ryb2tlQ29sb3IgPSBDb2xvcjMubmV3KDAsIDAsIDApLCANCiAgICAgICAgICAgICAgICBCb2xkID0gZmFsc2UsIA0KICAgICAgICAgICAgICAgIEl0YWxpYyA9IGZhbHNlLCANCiAgICAgICAgICAgICAgICBTaGFrZSA9IHsNCiAgICAgICAgICAgICAgICAgICAgRW5hYmxlZCA9IGZhbHNlLCANCiAgICAgICAgICAgICAgICAgICAgSW50ZW5zaXR5ID0gMS4zLCANCiAgICAgICAgICAgICAgICAgICAgTGlmZXRpbWUgPSA0DQogICAgICAgICAgICAgICAgfSwgDQogICAgICAgICAgICAgICAgVHlwZVNwZWVkID0gMC4wMw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LCAyLjg2Nyk7DQogICAgZW5kKTsNCiAgICB0YXNrLmRlbGF5KDQuNTgzLCBmdW5jdGlvbigpIC0tW1sgTGluZTogNjA5NCBdXQ0KICAgICAgICAtLSB1cHZhbHVlczogdjI4IChyZWYpLCB2MTIyNSAoY29weSkNCiAgICAgICAgdjI4LlNwZWFrKHYxMjI1LCB7DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgVGV4dCA9ICJCcmluZyBpdC4iLCANCiAgICAgICAgICAgICAgICBDb2xvciA9IENvbG9yU2VxdWVuY2UubmV3KHsNCiAgICAgICAgICAgICAgICAgICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKSksIA0KICAgICAgICAgICAgICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEsIENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgNCkpDQogICAgICAgICAgICAgICAgfSksIA0KICAgICAgICAgICAgICAgIFRleHRTdHJva2VDb2xvciA9IENvbG9yMy5uZXcoMCwgMCwgMCksIA0KICAgICAgICAgICAgICAgIEJvbGQgPSB0cnVlLCANCiAgICAgICAgICAgICAgICBJdGFsaWMgPSB0cnVlLCANCiAgICAgICAgICAgICAgICBTaGFrZSA9IHsNCiAgICAgICAgICAgICAgICAgICAgRW5hYmxlZCA9IHRydWUsIA0KICAgICAgICAgICAgICAgICAgICBJbnRlbnNpdHkgPSAzLCANCiAgICAgICAgICAgICAgICAgICAgTGlmZXRpbWUgPSAxDQogICAgICAgICAgICAgICAgfSwgDQogICAgICAgICAgICAgICAgVHlwZVNwZWVkID0gMC4wMQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LCAxKTsNCiAgICBlbmQpOw0KICAgIGxfTGlnaHRpbmdfMC5BdG1vc3BoZXJlLkRlbnNpdHkgPSAwLjc7DQogICAgbF9MaWdodGluZ18wLkF0bW9zcGhlcmUuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKTsNCiAgICBsX0xpZ2h0aW5nXzAuQXRtb3NwaGVyZS5IYXplID0gNC41NTsNCiAgICBsb2NhbCB2MTIyOCA9IGxfUmVwbGljYXRlZFN0b3JhZ2VfMC5SZXNvdXJjZXMuZGFya3NjcmVlbjpDbG9uZSgpOw0KICAgIHYxMjI4LlBhcmVudCA9IGxfUGxheWVyR3VpXzA7DQogICAgbG9jYWwgdjEyMjkgPSBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLm5hZ2kuc0tVTEw6Q2xvbmUoKTsNCiAgICB2MTIyOS5QYXJlbnQgPSB2MTIyNTsNCiAgICB2MTIyOS5zS1VMTC5QYXJ0MCA9IHYxMjI2Ow0KICAgIGxvY2FsIHYxMjMwID0gbF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5EZXB0aE9mRmllbGQ6Q2xvbmUoKTsNCiAgICB2MTIzMC5QYXJlbnQgPSBsX0xpZ2h0aW5nXzA7DQogICAgdjEyMzAuRmFySW50ZW5zaXR5ID0gMDsNCiAgICBsX1R3ZWVuU2VydmljZV8wOkNyZWF0ZSh2MTIzMCwgVHdlZW5JbmZvLm5ldygwLjUsIEVudW0uRWFzaW5nU3R5bGUuU2luZSwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwgew0KICAgICAgICBGYXJJbnRlbnNpdHkgPSAxDQogICAgfSk6UGxheSgpOw0KICAgIGxvY2FsIHYxMjMxID0gbF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5uYWdpLkNvbG9yQ29ycmVjdGlvbjI6Q2xvbmUoKTsNCiAgICB2MTIzMS5QYXJlbnQgPSBsX0xpZ2h0aW5nXzA7DQogICAgdjI2OnBsYXkobF9SZXBsaWNhdGVkU3RvcmFnZV8wLlJlc291cmNlcy5uYWdpWyJuYWdpIGF3YWtlbiJdLCBsX1NvdW5kU2VydmljZV8wKTsNCiAgICB2MTIuY3V0c2NlbmUodjEyMjYsIENGcmFtZS5uZXcoKFZlY3RvcjMubmV3KDAsIDAsIDAsIDApKSksIDcuMDgzMzMzNDkyMjc5MDUzLCBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLm5hZ2lbIjJGT1YiXSk7DQogICAgbG9jYWwgdjEyMzIgPSBsX1JlcGxpY2F0ZWRTdG9yYWdlXzAuUmVzb3VyY2VzLm5hZ2kuYXdhZmxvb3I6Q2xvbmUoKTsNCiAgICB2MTIzMi5DRnJhbWUgPSB2MTIyNi5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0zLCAwKTsNCiAgICB2MTIzMi5QYXJlbnQgPSB2MTIyNTsNCiAgICB2MTIuYnJpZ2h0KDEsIDEuNSk7DQogICAgdGFzay53YWl0KDcuMDgzMzMzNDkyMjc5MDUzKTsNCiAgICB2MTIudWx0Rmxhc2goLTEpOw0KICAgIHYxMjI4OkRlc3Ryb3koKTsNCiAgICB2MTIzMTpEZXN0cm95KCk7DQogICAgdjEyMjk6RGVzdHJveSgpOw0KICAgIHYxMjMyOkRlc3Ryb3koKTsNCiAgICBsX0xpZ2h0aW5nXzAuQXRtb3NwaGVyZS5EZW5zaXR5ID0gbF9EZW5zaXR5XzA7DQogICAgbF9MaWdodGluZ18wLkF0bW9zcGhlcmUuQ29sb3IgPSBsX0NvbG9yXzA7DQogICAgbF9MaWdodGluZ18wLkF0bW9zcGhlcmUuSGF6ZSA9IDM7DQogICAgdjEyMzA6RGVzdHJveSgpOw0KICAgIHYxMi5mb3YoZmFsc2UsIDQwKTsNCiAgICB2MTIuZm92KHRydWUsIDcwLCAyLCBFbnVtLkVhc2luZ1N0eWxlLlNpbmUsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCk7DQogICAgdjEyLnNjZW5lRW5hYmxlZChmYWxzZSk7DQogICAgZW5kLA0KfSkNCkF3YWtlbmluZ0J0biA9IE5hZ2k6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkF3YWtlbmluZyIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgIA0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIm5hZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84MDE0MDk5NjA2NDczMyINCg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMubmFnaVsibmFnaSB0aGVtZSJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcykubmFnaS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAibmFnaWF3YWtlbiIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgIA0KICAgIGVuZCwNCn0pDQpOYWdpS2V5YmluZCA9IE5hZ2k6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICANCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwibmFnaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzgwMTQwOTk2MDY0NzMzIg0KDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5uYWdpWyJuYWdpIHRoZW1lIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKS5uYWdpLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJuYWdpYXdha2VuIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgDQogICAgZW5kLA0KfSkNCkphcGFuTGluZUJ0biA9IE5hZ2k6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkZpdmUgU3RhZ2UgVm9sbGV5IiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJuYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTE1Mjk3NjE0NjA4MTc3Ig0KDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJmaXZlc3RhZ2V2b2xsZXkiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCk5hZ2lLZXliaW5kID0gTmFnaTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkZpdmUgU3RhZ2UgVm9sbGV5IiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwibmFnaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExNTI5NzYxNDYwODE3NyINCg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZml2ZXN0YWdldm9sbGV5IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KDQogICAgZW5kLA0KfSkNCg0KSmFwYW5MaW5lQnRuID0gTmFnaTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiTmljZSB0byBtZWV0IHlvdSwgSmFwYW4uIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJuYWdpIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vODI5MjkzNzUyNjE1NTciDQoNCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhbW5hZ2kiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCk5hZ2lLZXliaW5kID0gTmFnaTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIk5pY2UgdG8gbWVldCB5b3UsIEphcGFuIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIm5hZ2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84MjkyOTM3NTI2MTU1NyINCg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImFtbmFnaSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KDQotLSBTSElET1UgLS0NClNoaWRvdVNlYyA9IFNoaWRvdTpDcmVhdGVTZWN0aW9uKCJHYXlpb3UhIikNCg0KDQpGb3JtbGVzc0J0biA9IFNoaWRvdTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiRm9ybWxlc3MiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInNoaWRvdSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg5NjA2NDkxNTM4NzkxIg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnNoaWRvdS5Gb3JtbGVzc1MsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgICAgDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZm9ybWxlc3MiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNClNoaWRvdUtleWJpbmQgPSBTaGlkb3U6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJGb3JtbGVzcyIsDQogICAgICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCkhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5zaGlkb3UuRm9ybWxlc3NTLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICAgIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInNoaWRvdSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg5NjA2NDkxNTM4NzkxIg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZm9ybWxlc3MiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkRyYWNvbmljUnVzaEJ0biA9IFNoaWRvdTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiRHJhY29uaWMgUnVzaCIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5zaGlkb3UucnVubW92LCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICAgIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzaGlkb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85NTM1OTk2Njc5NTE4NSINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAic2hpZG9ydW4iLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNClNoaWRvdUtleWJpbmQgPSBTaGlkb3U6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJEcmFjb25pYyBSdXNoIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnNoaWRvdS5ydW5tb3YsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgICAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwic2hpZG91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vOTUzNTk5NjY3OTUxODUiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNoaWRvcnVuIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpEcmFnb25CdG4gPSBTaGlkb3U6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkJhY2sgSGVlbCBTaG90IiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzaGlkb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMTkxMzMwMjUxMTg3NDIiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuc2hpZG91LmhlZWxraWNrd2luZHVwLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICAgIA0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoMC41OCkNCiAgICAgICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5zaGlkb3UuaGVlbGtpY2toaXR0ZWQsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgICAgDQogICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNoaWRvdXNob2Nrd2F2ZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgICANCiAgICAgICAgZW5kKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgDQogICAgZW5kLA0KfSkNClNoaWRvdUtleWJpbmQgPSBTaGlkb3U6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJCYWNrIEhlZWwgU2hvdCIsDQogICAgICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCkhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzaGlkb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMTkxMzMwMjUxMTg3NDIiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuc2hpZG91LmhlZWxraWNrd2luZHVwLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICAgIA0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoMC41OCkNCiAgICAgICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5zaGlkb3UuaGVlbGtpY2toaXR0ZWQsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgICAgDQogICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNoaWRvdXNob2Nrd2F2ZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgICANCiAgICAgICAgZW5kKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgDQogICAgZW5kLA0KfSkNCkRyYWdvbkJ0biA9IFNoaWRvdTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiRHJhZ29uIERyaXZlKEZvcm1sZXNzIFZhcmlhbnQpIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnNoaWRvdS5oaXR0ZWQsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzaGlkb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NDEwNDE1NTgwNzYzMCINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNoaWRvdWRyYWdvbmhpdCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgICAgDQogICAgZW5kLA0KfSkNCg0KU2hpZG91S2V5YmluZCA9IFNoaWRvdTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkRyYWdvbiBEcml2ZShGb3JtbGVzcyBWYXJpYW50KSIsDQogICAgICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCkhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5zaGlkb3UuaGl0dGVkLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzaGlkb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NDEwNDE1NTgwNzYzMCINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNoaWRvdWRyYWdvbmhpdCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgICAgDQogICAgICAgIGVuZCwNCn0pDQpPbGRBd2FrZW5pbmdCdG4gPSBTaGlkb3U6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIk9sZCBBd2FrZW5pbmciLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInNoaWRvdSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEzNTQ5MzM1MzUxMDk2NyINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KDQogICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLnNoaWRvdVsic2hpZG91dGhlbWUiXSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCmVuZA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNoaWRvdWF3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgICAgDQogICAgZW5kLA0KfSkNCg0KU2hpZG91S2V5YmluZCA9IFNoaWRvdTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIk9sZCBBd2FrZW5pbmciLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwic2hpZG91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTM1NDkzMzUzNTEwOTY3Ig0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLnNoaWRvdVsic2hpZG91dGhlbWUiXSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCmVuZA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNoaWRvdWF3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgICAgDQogICAgZW5kLA0KfSkNCkF3YWtlbmluZ0J0biA9IFNoaWRvdTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQXdha2VuaW5nIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzaGlkb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMzk3MTUwMzE2ODA1MDQiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMuc2hpZG91WyJzaGlkb3V0aGVtZSJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcylbZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldEF0dHJpYnV0ZSgic3R5bGUiKV0uY29sb3J9KQ0KZW5kDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJORVdzaGlkb3Vhd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pICAgIA0KICAgIGVuZCwNCn0pDQoNClNoaWRvdUtleWJpbmQgPSBTaGlkb3U6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwic2hpZG91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTM5NzE1MDMxNjgwNTA0Ig0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLnNoaWRvdVsic2hpZG91dGhlbWUiXSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCmVuZA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiTkVXc2hpZG91YXdrIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSAgICANCiAgICBlbmQsDQp9KQ0KQmljeWNsZUtpY2tCdG4gPSBTaGlkb3U6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkJpY3ljbGUgS2ljayIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwic2hpZG91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTM2OTA3NzIxNjg5OTI3Ig0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJmb3JtbGVzc2Zsb3ciLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pICAgIA0KICAgIGVuZCwNCn0pDQoNClNoaWRvdUtleWJpbmQgPSBTaGlkb3U6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJCaWN5Y2xlIEtpY2siLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQoNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzaGlkb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMzY5MDc3MjE2ODk5MjciDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImZvcm1sZXNzZmxvdyIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgICANCiAgICBlbmQsDQp9KQ0KVW5zdG9wcGFibGVCdG4gPSBTaGlkb3U6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlVuc3RvcHBhYmxlIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzaGlkb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjI1NTYzOTgyODY2NzUiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInVuc3RvcHBhYmxlU2hpZG91IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSAgIA0KICAgICAgICBlbmQsDQp9KQ0KDQpTaGlkb3VLZXliaW5kID0gU2hpZG91OkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiVW5zdG9wcGFibGUiLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwic2hpZG91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTIyNTU2Mzk4Mjg2Njc1Ig0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAidW5zdG9wcGFibGVTaGlkb3UiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pICAgDQogICAgZW5kLA0KfSkNCkJpZ0JhbmdEcml2ZUJ0biA9IFNoaWRvdTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQmlnIEJhbmcgRHJpdmUiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInNoaWRvdSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEzMjg3NjQyNDU4NDM5NSINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgIA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYmlnYmFuZ2RyaXZlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSAgIA0KICAgICAgIGVuZCwNCn0pDQpTaGlkb3VLZXliaW5kID0gU2hpZG91OkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiQmlnIEJhbmcgRHJpdmUiLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInNoaWRvdSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEzMjg3NjQyNDU4NDM5NSINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYmlnYmFuZ2RyaXZlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSAgIA0KICAgIGVuZCwNCn0pDQpEcmFnb25Ecml2ZUJ0biA9IFNoaWRvdTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiRHJhZ29uIERyaXZlIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzaGlkb3UiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85MjIxNDIzOTA0OTQyMyINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZHJhZ29uZHJpdmUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pICAgDQogICAgZW5kLA0KfSkNClNoaWRvdUtleWJpbmQgPSBTaGlkb3U6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJEcmFnb24gRHJpdmUiLA0KICAgICAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQpIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwic2hpZG91IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vOTIyMTQyMzkwNDk0MjMiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImRyYWdvbmRyaXZlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSAgDQogICAgZW5kLA0KfSkNCg0KLS0gU0FFIC0tDQpTYWVTZWMgPSBTYWU6Q3JlYXRlU2VjdGlvbigiVGhlIEphcGFuJ3MgVHJlYXN1cmUiKQ0KDQotLSBQZXJmZWN0IFRvdWNoKEhlZWwgRmxpY2spIEJ1dHRvbg0KUGVyZmVjdFRvdWNoVHVybkJ1dHRvbiA9IFNhZTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiUGVyZmVjdCBUb3VjaChUdXJuKSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnNhZS5zYWVtYWdpY3R1cm50aGluZywgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInNhZSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzc3OTI2MjM0NzAwNDE2Ig0KICAgICAgICBodWggPSB2MC5sb2FkQW5pbWF0aW9uKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLnNhZS5uZXdtYWdpY2RyaWJibGVSKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiZWF1dGlmdWxEZXN0cnVjdGlvbiIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgIA0KICAgIGVuZCwNCn0pDQoNClNhZUtleWJpbmQgPSBTYWU6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJQZXJmZWN0IFRvdWNoKFR1cm4pIiwNCiAgICAgICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnNhZS5zYWVtYWdpY3R1cm50aGluZywgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInNhZSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzc3OTI2MjM0NzAwNDE2Ig0KICAgICAgICBodWggPSB2MC5sb2FkQW5pbWF0aW9uKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLnNhZS5uZXdtYWdpY2RyaWJibGVSKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiZWF1dGlmdWxEZXN0cnVjdGlvbiIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgDQogICAgZW5kLA0KfSkNClBlcmZlY3RUb3VjaEhlZWxCdXR0b24gPSBTYWU6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlBlcmZlY3QgVG91Y2goSGVlbCBGbGljaykiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuc2FlLnNhZWhlZWxmaWNrdGhpbmcsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzYWUiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NzkyNjIzNDcwMDQxNiINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNhZWhlZWxmbGljayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgDQogICAgZW5kLA0KfSkNClBlcmZlY3RUb3VjaEhlZWxLZXliaW5kID0gU2FlOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiUGVyZmVjdCBUb3VjaCAoSGVlbCBGbGljaykiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuc2FlLnNhZWhlZWxmaWNrdGhpbmcsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInNhZSIpDQogICAgICAgICAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NzkyNjIzNDcwMDQxNiINCiAgICAgICAgICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgICAgICAgICBodWg6UGxheSgpDQogICAgICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAic2FlaGVlbGZsaWNrIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSANCiAgICBlbmQsDQp9KQ0KLS0gTnV0bWVnIEJ1dHRvbg0KTnV0bWVnQnV0dG9uID0gU2FlOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJOdXRtZWciLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInNhZSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg4NjkwNjE0MjUzNTI0Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAic2Flc2tpbGwyIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSANCiAgICBlbmQsDQp9KQ0KTnV0bWVnS2V5YmluZCA9IFNhZTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIk51dG1lZyIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgInNhZSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg4NjkwNjE0MjUzNTI0Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAic2Flc2tpbGwyIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSANCiAgICBlbmQsDQp9KQ0KQXdha2VuaW5nQnV0dG9uID0gU2FlOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJDdXJ2ZSBTaG90IiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLm5hZ2kuYmFsbGtpY2t3aW5kdXAsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzYWUiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NjIwMDEzNDM5ODQyMiINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgIHdhaXQoMC4yNSkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLm5hZ2kuYmFsbGtpY2tlZCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJzYWVwYXNzIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSANCiAgICAgICAgZW5kKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgIGVuZCwNCn0pDQpDdXJ2ZVNob3RLZXliaW5kID0gU2FlOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiQ3VydmUgU2hvdCIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5uYWdpLmJhbGxraWNrd2luZHVwLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICANCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwic2FlIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzYyMDAxMzQzOTg0MjIiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICB3YWl0KDAuMjUpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5uYWdpLmJhbGxraWNrZWQsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogIA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAic2FlcGFzcyIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgDQogICAgICAgIGVuZCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICBlbmQsDQp9KQ0KLS0gQXdha2VuaW5nIEJ1dHRvbg0KQXdha2VuaW5nQnV0dG9uID0gU2FlOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzYWUiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjk4MTk4MjI3NTUwNzciDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCg0KICAgICAgICBpZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLnNhZVsic2FlIHRoZW1lIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKVtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6R2V0QXR0cmlidXRlKCJzdHlsZSIpXS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNhZUF3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgDQogICAgZW5kLA0KfSkNCkF3YWtlbmluZ0tleWJpbmQgPSBTYWU6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgInNhZSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyOTgxOTgyMjc1NTA3NyINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5zYWVbInNhZSB0aGVtZSJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcylbZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldEF0dHJpYnV0ZSgic3R5bGUiKV0uY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJzYWVBd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pIA0KICAgIGVuZCwNCn0pDQpBd2FrZW5pbmcyQnV0dG9uID0gU2FlOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJPdmVydGltZSBBd2FrZW5pbmciLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwic2FlIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzA2NTY3ODM1MTcxOTYiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMuc2FlWyJzYWUgb25lIHNob3QgbWF0Y2ggdGhlbWUiXSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAic2FlQXdrMiIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgDQogICAgZW5kLA0KfSkNCkF3YWtlbmluZzJLZXliaW5kID0gU2FlOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiT3ZlcnRpbWUgQXdha2VuaW5nIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCAic2FlIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzA2NTY3ODM1MTcxOTYiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5zYWVbInNhZSBvbmUgc2hvdCBtYXRjaCB0aGVtZSJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcylbZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldEF0dHJpYnV0ZSgic3R5bGUiKV0uY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJzYWVBd2syIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSANCiAgICBlbmQsDQp9KQ0KTnV0bWVnVmFyaWFudEJ0biA9IFNhZTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiTnV0bWVnKFZBUklBTlQpIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzYWUiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjA5MzcwMzQwNjM0MDEiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTMwNzU1MDk4OTgwODk4IilbMV0NCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGFzc2V0OkRlc3Ryb3koKQ0KICAgICAgICBlbmQpDQogICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUNCiAgICAgICAgDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzE0MDc4MTA2OTk3NDIiDQogICAgICAgIGh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KICAgICAgICBodWgyOlBsYXkoKQ0KICAgICAgICANCiAgICAgICANCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNhZVN0ZWFsIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsYXNzZXR9KSAgDQogICAgDQogICAgZW5kLA0KfSkNCk51dG1lZ1ZhcmlhbnRLZXliaW5kID0gU2FlOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiTnV0bWVnIChWQVJJQU5UKSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgInNhZSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyMDkzNzAzNDA2MzQwMSINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMzA3NTUwOTg5ODA4OTgiKVsxXQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZQ0KDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzE0MDc4MTA2OTk3NDIiDQogICAgICAgIGh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KICAgICAgICBodWgyOlBsYXkoKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAic2FlU3RlYWwiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldH0pICANCiAgICBlbmQsDQp9KQ0KLS0gQ3Jvc3MgRWxhc3RpY28gKG5vbi1SaW4gVmFyaWFudCkgQnV0dG9uDQpDcm9zc0VsYXN0aWNvTm9uUmluQnV0dG9uID0gU2FlOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJDcm9zcyBFbGFzdGljbyhub24tUmluIFZhcmlhbnQpIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJzYWUiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjMzNTI4OTI1MTI5MzMiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTMwNzU1MDk4OTgwODk4IilbMV0NCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGFzc2V0OkRlc3Ryb3koKQ0KICAgICAgICBlbmQpDQogICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUNCiAgICAgICAgDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTEwOTk4MTM2MDU0Mjk1Ig0KICAgICAgICBodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgaHVoMjpQbGF5KCkNCmZpcmVFdmVudCgxNywgInNhZW51dG1lZyIsIDEsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLCBhc3NldH0pDQoNCiAgICBlbmQsDQp9KQ0KQ3Jvc3NFbGFzdGljb05vblJpbktleWJpbmQgPSBTYWU6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJDcm9zcyBFbGFzdGljbyAobm9uLVJpbiBWYXJpYW50KSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgInNhZSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyMzM1Mjg5MjUxMjkzMyINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMzA3NTUwOTg5ODA4OTgiKVsxXQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZQ0KDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTEwOTk4MTM2MDU0Mjk1Ig0KICAgICAgICBodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgaHVoMjpQbGF5KCkNCg0KZmlyZUV2ZW50KDE3LCAic2FlbnV0bWVnIiwgMSwge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsIGFzc2V0fSkNCiBlbmQsDQp9KQ0KLS0gQ3Jvc3MgRWxhc3RpY28gKFJpbiBWYXJpYW50KSBCdXR0b24NCkNyb3NzRWxhc3RpY29SaW5CdXR0b24gPSBTYWU6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkNyb3NzIEVsYXN0aWNvKFJpbiBWYXJpYW50KSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwic2FlIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vODgzNDM2NTQ0NjQwMDIiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTMwNzU1MDk4OTgwODk4IilbMV0NCiAgICAgICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICByaW5wbHIgPSBJbnN0YW5jZS5uZXcoIlBsYXllciIsZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikpDQogICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHJpbnBscjpEZXN0cm95KCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgDQogICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KICAgICAgICByaW5wbHIuTmFtZSA9ICJSaW4iDQogICAgICAgIHJpbnBscjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwicmluIikNCiAgICAgICAgcmlucGxyLkNoYXJhY3RlciA9IGFzc2V0DQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZQ0KICAgICAgICANCiAgICAgICAgYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0yLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84NTM3NzY1NjcyMjExMiINCiAgICAgICAgaHVoMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbTIpDQogICAgICAgIGh1aDI6UGxheSgpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJydnMiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldH0pICANCiAgICAgZW5kLA0KfSkNCkNyb3NzRWxhc3RpY29SaW5LZXliaW5kID0gU2FlOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiQ3Jvc3MgRWxhc3RpY28gKFJpbiBWYXJpYW50KSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgInNhZSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg4MzQzNjU0NDY0MDAyIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzMDc1NTA5ODk4MDg5OCIpWzFdDQoNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgcmlucGxyID0gSW5zdGFuY2UubmV3KCJQbGF5ZXIiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKSkNCg0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICByaW5wbHI6RGVzdHJveSgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGFzc2V0OkRlc3Ryb3koKQ0KICAgICAgICBlbmQpDQoNCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIHJpbnBsci5OYW1lID0gIlJpbiINCiAgICAgICAgcmlucGxyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCAicmluIikNCiAgICAgICAgcmlucGxyLkNoYXJhY3RlciA9IGFzc2V0DQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZQ0KDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vODUzNzc2NTY3MjIxMTIiDQogICAgICAgIGh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KICAgICAgICBodWgyOlBsYXkoKQ0KDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJydnMiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldH0pICANCiAgICBlbmQsDQp9KQ0KLS0gUklOIC0tDQpSaW5TZWMgPSBSaW46Q3JlYXRlU2VjdGlvbigiVGhlIExpdHRsZSBCcm90aGVyIE9mIEdlbml1cyIpDQoNCi0tIE9jY2x1c2lvbiBCcmVhayBCdXR0b24NCk9jY2x1c2lvbkJyZWFrQnV0dG9uID0gUmluOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJPY2NsdXNpb24gQnJlYWsiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMucmluLm9jY2x1c2lvbiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInJpbiIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExNjE4MTMxNzc1OTUzOCINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIm9jY2x1c2lvbkJyZWFrIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSAgDQogICAgICAgIGVuZCwNCn0pDQpPY2NsdXNpb25CcmVha0tleWJpbmQgPSBSaW46Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJPY2NsdXNpb24gQnJlYWsiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMucmluLm9jY2x1c2lvbiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgInJpbiIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExNjE4MTMxNzc1OTUzOCINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIm9jY2x1c2lvbkJyZWFrIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSAgICANCiAgICAgIGVuZCwNCn0pDQotLSBGYWtlIFNob3QgQnV0dG9uDQpGYWtlU2hvdEJ1dHRvbiA9IFJpbjpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiRmFrZSBTaG90IiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnJpblsicmluIGZha2Ugc2hvdF8xIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJyaW4iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMTYzNjcxNDYxNTc2MzMiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJyaW5mYWtlc2hvdCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgDQogICAgZW5kLA0KfSkNCkZha2VTaG90S2V5YmluZCA9IFJpbjpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkZha2UgU2hvdCIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5yaW5bInJpbiBmYWtlIHNob3RfMSJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCAicmluIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTE2MzY3MTQ2MTU3NjMzIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAicmluZmFrZXNob3QiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pIA0KICAgIGVuZCwNCn0pDQpBd2FrZW5pbmdCdXR0b24gPSBSaW46Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkN1cnZlIFNob3QiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMucmluLmN1cnZlc2hvdHMsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJyaW4iKQ0KYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCmFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExMzU2MTMyOTU3NzE0MyINCmh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoMC40NSkNCiAgICAgICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5yaW5bImN1cnZlc2hvdCBzaG9vdGVkIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogIA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAicmlucGFzcyIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgDQogICAgICAgICAgICBlbmQpDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgZW5kLA0KfSkNCkN1cnZlU2hvdEtleWJpbmQgPSBSaW46Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJDdXJ2ZSBTaG90IiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCAicmluIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTEzNTYxMzI5NTc3MTQzIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoMC40NSkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInJpbnBhc3MiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pIA0KICAgICAgICBlbmQpDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgZW5kLA0KfSkNCkF3YWtlbmluZ0J1dHRvbiA9IFJpbjpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQXdha2VuaW5nIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiANCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJyaW4iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDE2MTQ2NzYxMDc4ODQiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5yaW5bInJpbnR0aGVtZWhvcnJvciJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcylbZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldEF0dHJpYnV0ZSgic3R5bGUiKV0uY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJyaW5PdmVydGltZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgDQogICAgZW5kLA0KfSkNClJpbkF3YWtlbmluZ0tleWJpbmQgPSBSaW46Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsICJyaW4iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDE2MTQ2NzYxMDc4ODQiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5yaW5bInJpbnR0aGVtZWhvcnJvciJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcylbZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldEF0dHJpYnV0ZSgic3R5bGUiKV0uY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJyaW5PdmVydGltZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkgDQogICAgZW5kLA0KfSkNCkF3YWtlbmluZ0J1dHRvbiA9IFJpbjpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiT3ZlcnRpbWUgQXdha2VuaW5nIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiANCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwicmluIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTAyNjU5ODUzNDkyNzkzIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMucmluWyJyaW4gdGhlbWUiXSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJyaW5hd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pIA0KICAgIGVuZCwNCn0pDQpPdmVydGltZUF3YWtlbmluZ0tleWJpbmQgPSBSaW46Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJPdmVydGltZSBBd2FrZW5pbmciLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsICJyaW4iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDI2NTk4NTM0OTI3OTMiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5yaW5bInJpbiB0aGVtZSJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcylbZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldEF0dHJpYnV0ZSgic3R5bGUiKV0uY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJyaW5hd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pIA0KICAgIGVuZCwNCn0pDQpLaWxsTm9WaWN0aW1CdXR0b24gPSBSaW46Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkNyYXNoIFNob3QiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInJpbiIpDQphbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTE2NjI4MTE3MzA2MjU4Ig0KaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQpodWg6UGxheSgpDQphc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzcxNzAyNzAwNzA3NzcwIilbMV0NCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQpzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQpzcGF3bihmdW5jdGlvbigpDQogICAgd2FpdChodWguTGVuZ3RoKQ0KICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICBhc3NldDpEZXN0cm95KCkNCmVuZCkNCmFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KYXNzZXQuUHJpbWFyeVBhcnQuUm90YXRpb24gPSBWZWN0b3IzLm5ldygwLC0xODAsMCkNCmFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsMCwtMjMpDQoNCg0KYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQphbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzc4MzI5NTQ5NzA4ODUiDQpodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCmh1aDI6UGxheSgpDQoNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImNyYXNoU2hvdFJpbiIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkgDQplbmQsDQp9KQ0KQ3Jhc2hTaG90S2V5YmluZCA9IFJpbjpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkNyYXNoIFNob3QiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsICJyaW4iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMTY2MjgxMTczMDYyNTgiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vNzE3MDI3MDA3MDc3NzAiKVsxXQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LlJvdGF0aW9uID0gVmVjdG9yMy5uZXcoMCwgLTE4MCwgMCkNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAwLCAtMjMpDQoNCiAgICAgICAgYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0yLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83NzgzMjk1NDk3MDg4NSINCiAgICAgICAgaHVoMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbTIpDQogICAgICAgIGh1aDI6UGxheSgpDQoNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImNyYXNoU2hvdFJpbiIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkgDQogICAgZW5kLA0KfSkNCi0tIEtpbGwgKE5vIFZpY3RpbSkgQnV0dG9uDQpLaWxsTm9WaWN0aW1CdXR0b24gPSBSaW46Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIktpbGwuKE5vIFZpY3RpbSkiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInJpbiIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEzMDUyMTk2ODE1NDQ3OSINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJyaW5jdXJ2ZXNob3RraWxsIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KSANCiAgICBlbmQsDQp9KQ0KS2lsbE5vVmljdGltS2V5YmluZCA9IFJpbjpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIktpbGwuKE5vIFZpY3RpbSkiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsICJyaW4iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMzA1MjE5NjgxNTQ0NzkiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInJpbmN1cnZlc2hvdGtpbGwiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pIA0KICAgIGVuZCwNCn0pDQotLSBLaWxsIChXaXRoIFZpY3RpbSkgQnV0dG9uDQpLaWxsV2l0aFZpY3RpbUJ1dHRvbiA9IFJpbjpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiS2lsbC4oV2l0aCBWaWN0aW0pIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJyaW4iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDUyMDE1NTcyOTA4MzAiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vNzE3MDI3MDA3MDc3NzAiKVsxXQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZQ0KICAgICAgICBhbmltMiA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbTIuQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzgxODg2MDE5MTUzNDk2Ig0KICAgICAgICBodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgaHVoMjpQbGF5KCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInZpcHNlYXQiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldH0pIA0KICAgIGVuZCwNCn0pDQpLaWxsV2l0aFZpY3RpbUtleWJpbmQgPSBSaW46Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJLaWxsLihXaXRoIFZpY3RpbSkiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsICJyaW4iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDUyMDE1NTcyOTA4MzAiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vNzE3MDI3MDA3MDc3NzAiKVsxXQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZQ0KDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vODE4ODYwMTkxNTM0OTYiDQogICAgICAgIGh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KICAgICAgICBodWgyOlBsYXkoKQ0KDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ2aXBzZWF0IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsYXNzZXR9KSANCiAgICBlbmQsDQp9KQ0KLS0gQ2VudGVyIE9mIEdyYXZpdHkgQnV0dG9uDQpDZW50ZXJPZkdyYXZpdHlCdXR0b24gPSBSaW46Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkNlbnRlciBPZiBHcmF2aXR5IiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJyaW4iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjQ3NTQ2MzU5Mjk5MDUiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vNzE3MDI3MDA3MDc3NzAiKVsxXQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBhbmltMiA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbTIuQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg0NTI2OTgzMzYwNzA3Ig0KICAgICAgICBodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgaHVoMjpQbGF5KCkNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAuNSwgMCwgLTMpICogQ0ZyYW1lLkFuZ2xlcygwLCAxMCwgMCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImNlbnRlcm9mZ3Jhdml0eSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkgDQogICAgZW5kLA0KfSkNCkNlbnRlck9mR3Jhdml0eUtleWJpbmQgPSBSaW46Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJDZW50ZXIgT2YgR3Jhdml0eSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwgInJpbiIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyNDc1NDYzNTkyOTkwNSINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly83MTcwMjcwMDcwNzc3MCIpWzFdDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBhc3NldDpEZXN0cm95KCkNCiAgICAgICAgZW5kKQ0KICAgICAgICBhc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLjUsIDAsIC0zKSAqIENGcmFtZS5BbmdsZXMoMCwgMTAsIDApDQoNCiAgICAgICAgYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0yLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84NDUyNjk4MzM2MDcwNyINCiAgICAgICAgaHVoMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbTIpDQogICAgICAgIGh1aDI6UGxheSgpDQoNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJjZW50ZXJvZmdyYXZpdHkiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldH0pIA0KICAgIGVuZCwNCn0pDQpDZW50ZXJPZkdyYXZpdHlWQVJCdXR0b24gPSBSaW46Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkNlbnRlciBPZiBHcmF2aXR5KEFkbWluIFZhcmlhbnQpIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInJpbiIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg1MjY5Njc2MTY4NTgwIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzcxNzAyNzAwNzA3NzcwIilbMV0NCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIGFzc2V0OkRlc3Ryb3koKQ0KICAgICAgICBlbmQpDQogICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0yLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85NzQ3ODI2NzA4NjI2MCINCiAgICAgICAgaHVoMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbTIpDQogICAgICAgIGh1aDI6UGxheSgpDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygtNSwgMCwgMCkNCiAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiY2VudGVyb2ZldmVyeXRoaW5nIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsYXNzZXR9KSANCiAgICBlbmQsDQp9KQ0KQ2VudGVyT2ZHcmF2aXR5VkFSS2V5YmluZCA9IFJpbjpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkNlbnRlciBPZiBHcmF2aXR5KEFkbWluIFZhcmlhbnQpIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICANCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwicmluIikNCmFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQphbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84NTI2OTY3NjE2ODU4MCINCmh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KaHVoOlBsYXkoKQ0KYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly83MTcwMjcwMDcwNzc3MCIpWzFdDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0Kc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0Kc3Bhd24oZnVuY3Rpb24oKQ0KICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgYXNzZXQ6RGVzdHJveSgpDQplbmQpDQphc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCmFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQphbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vOTc0NzgyNjcwODYyNjAiDQpodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCmh1aDI6UGxheSgpDQphc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoLTUsIDAsIDApDQogICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImNlbnRlcm9mZXZlcnl0aGluZyIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkgDQogICAgZW5kLA0KfSkNCi0tIEtBSVNFUiAtLQ0KS2Fpc2VyU2VjID0gS2Fpc2VyOkNyZWF0ZVNlY3Rpb24oIlRoZSBFbXBlcm9yIikNCg0KDQotLSBLYWlzZXIgSW1wYWN0IEJ1dHRvbg0KS2Fpc2VySW1wYWN0QnV0dG9uID0gS2Fpc2VyOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJLYWlzZXIgSW1wYWN0IiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmthaXNlci5rYWlzZXJpbXBhY3R3aW5kdXAsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJrYWlzZXIiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84ODk4NTQxMzA0NDUyMSINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgIHdhaXQoMC41KQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMua2Fpc2VyLmthaXNlcmltcGFjdGhpdHRlZCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgDQogICAgICAgIGVuZCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICANCiAgICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImthaXNlckltcGFjdCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KS2Fpc2VySW1wYWN0S2V5YmluZCA9IEthaXNlcjpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkthaXNlciBJbXBhY3QiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMua2Fpc2VyLmthaXNlcmltcGFjdHdpbmR1cCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImthaXNlciIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg4OTg1NDEzMDQ0NTIxIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgd2FpdCgwLjUpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5rYWlzZXIua2Fpc2VyaW1wYWN0aGl0dGVkLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICANCiAgICAgICAgZW5kKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAia2Fpc2VySW1wYWN0IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgZW5kLA0KfSkNCi0tIEthaXNlciBJbXBhY3QgTWFnbnVzIEJ1dHRvbg0KS2Fpc2VySW1wYWN0TWFnbnVzQnV0dG9uID0gS2Fpc2VyOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJLYWlzZXIgSW1wYWN0IE1hZ251cyIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5rYWlzZXJbImthaXNlciBpbXBhY3QgbWFnbnVzIHdpbmR1cCJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICANCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwia2Fpc2VyIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTAwNzA5NDk4NjU0NzI0Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoMC40KQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMua2Fpc2VyWyJrYWlzZXIgaW1wYWN0IG1hZ251cyBoaXR0ZWQiXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgDQogICAgICAgIGVuZCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImthaXNlckltcGFjdG1hZ251cyIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KS2Fpc2VySW1wYWN0TWFnbnVzS2V5YmluZCA9IEthaXNlcjpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkthaXNlciBJbXBhY3QgTWFnbnVzIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmthaXNlclsia2Fpc2VyIGltcGFjdCBtYWdudXMgd2luZHVwIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJrYWlzZXIiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDA3MDk0OTg2NTQ3MjQiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCgwLjQpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5rYWlzZXJbImthaXNlciBpbXBhY3QgbWFnbnVzIGhpdHRlZCJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICANCiAgICAgICAgZW5kKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAia2Fpc2VySW1wYWN0bWFnbnVzIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQotLSBPZmYgVGhlIEJhbGwgQnV0dG9uDQpPZmZUaGVCYWxsQnV0dG9uID0gS2Fpc2VyOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJPZmYgVGhlIEJhbGwiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMua2Fpc2VyWyJvZmYgdGhlIGJhbGwiXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImthaXNlciIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExMDY2MDU1MTY2MTQ3MCINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImthaXNlcmRyaWJibGUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCk9mZlRoZUJhbGxLZXliaW5kID0gS2Fpc2VyOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiT2ZmIFRoZSBCYWxsIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmthaXNlclsib2ZmIHRoZSBiYWxsIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImthaXNlciIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExMDY2MDU1MTY2MTQ3MCINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImthaXNlcmRyaWJibGUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCi0tIEF3YWtlbmluZyBCdXR0b24NCkF3YWtlbmluZ0J1dHRvbiA9IEthaXNlcjpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQXdha2VuaW5nIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiANCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJrYWlzZXIiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDI3ODgyMzU3MzM4MTciDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCg0KICAgICAgICBpZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLmthaXNlclsia2Fpc2VyIHRoZW1lIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKVtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6R2V0QXR0cmlidXRlKCJzdHlsZSIpXS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImthaXNlckF3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KDQpLYWlzZXJBd2FrZW5pbmdLZXliaW5kID0gS2Fpc2VyOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiQXdha2VuaW5nIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiANCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImthaXNlciIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEwMjc4ODIzNTczMzgxNyINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBpZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLmthaXNlclsia2Fpc2VyIHRoZW1lIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKVtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6R2V0QXR0cmlidXRlKCJzdHlsZSIpXS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImthaXNlckF3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KDQpBd2FrZW5pbjJnQnV0dG9uID0gS2Fpc2VyOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJBaXIgQXdha2VuaW5nIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiANCg0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImthaXNlciIpDQogICAgICAgIGFuaW0gPSBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5rYWlzZXIuZXhjdXNldXNlcg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMua2Fpc2VyWyJrYWlzZXIgdGhlbWUiXSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAia2Fpc2VyZXhjdXNlbWUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkthaXNlckF3YWtlbmluZzJLZXliaW5kID0gS2Fpc2VyOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiQWlyIEF3YWtlbmluZyIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogDQoNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJrYWlzZXIiKQ0KICAgICAgICBhbmltID0gZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMua2Fpc2VyLmV4Y3VzZXVzZXINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBpZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLmthaXNlclsia2Fpc2VyIHRoZW1lIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKVtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6R2V0QXR0cmlidXRlKCJzdHlsZSIpXS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImthaXNlcmV4Y3VzZW1lIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQotLSBLYWlzZXIgSW1wYWN0IExpZ2h0bmluZyBTdHJpa2UgQnV0dG9uDQpLYWlzZXJJbXBhY3RMaWdodG5pbmdTdHJpa2VCdXR0b24gPSBLYWlzZXI6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkthaXNlciBJbXBhY3QgTGlnaHRuaW5nIFN0cmlrZSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwia2Fpc2VyIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTA0OTQwNDc2MjQ0MjU3Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJrYWlzZXJJbXBhY3RMaWdodG5pbmdTdHJpa2UiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkthaXNlckxpZ2h0bmluZ0tleWJpbmQgPSBLYWlzZXI6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJLYWlzZXIgSW1wYWN0IExpZ2h0bmluZyBTdHJpa2UiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImthaXNlciIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEwNDk0MDQ3NjI0NDI1NyINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAia2Fpc2VySW1wYWN0TGlnaHRuaW5nU3RyaWtlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQotLSBLYWlzZXIgSW1wYWN0IChDb3VudGVyKSBCdXR0b24NCkthaXNlckltcGFjdENvdW50ZXJCdXR0b24gPSBLYWlzZXI6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkthaXNlciBJbXBhY3QoQ291bnRlcikiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImthaXNlciIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyNDM3OTQ3MDI2NzE5NSINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMTI2NDQyNTY0ODk4MTkiKVsxXQ0KICAgICAgICBhc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vOTczMzU3NTAwMDA5MDMiDQogICAgICAgIGh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KICAgICAgICBodWgyOlBsYXkoKQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZQ0KICAgICAgICBmcm9udE9mZnNldCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lLkxvb2tWZWN0b3IgKiA1DQogICAgICAgIG5ld1Bvc2l0aW9uID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiArIGZyb250T2Zmc2V0DQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcobmV3UG9zaXRpb24sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24pDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBhc3NldDpEZXN0cm95KCkNCiAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAia2Fpc2VyY291bnRlciIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkNCiAgICBlbmQsDQp9KQ0KS2Fpc2VyQ291bnRlcktleWJpbmQgPSBLYWlzZXI6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJLYWlzZXIgSW1wYWN0KENvdW50ZXIpIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJrYWlzZXIiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjQzNzk0NzAyNjcxOTUiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTIwMzYxNTY5NTQ4NzA0IilbMV0NCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBhbmltMiA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbTIuQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzk3MzM1NzUwMDAwOTAzIg0KICAgICAgICBodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgaHVoMjpQbGF5KCkNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUNCiAgICAgICAgZnJvbnRPZmZzZXQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZS5Mb29rVmVjdG9yICogNQ0KICAgICAgICBuZXdQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24gKyBmcm9udE9mZnNldA0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KG5ld1Bvc2l0aW9uLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImthaXNlcmNvdW50ZXIiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldH0pDQogICAgZW5kLA0KfSkNCkthaXNlckltcGFjdENvdW50ZXJCdXR0b24gPSBLYWlzZXI6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkthaXNlciBJbXBhY3QgTWFnbnVzKENvdW50ZXIpIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImthaXNlciIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzcyODYyMDA5NjcyMzUxIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzMDc1NTA5ODk4MDg5OCIpWzFdDQogICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0yLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjc1OTQ5MDQxNjMzMTkiDQogICAgICAgIGh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KICAgICAgICBodWgyOlBsYXkoKQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZQ0KDQpuZXdQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldyg0LjI3MCwwLDAuNSkNCmFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IG5ld1Bvc2l0aW9uDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImthaXNlclN1cGVyU3RhciIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkNCiAgICBlbmQsDQp9KQ0KS2Fpc2VyQ291bnRlcktleWJpbmQgPSBLYWlzZXI6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJLYWlzZXIgSW1wYWN0IE1hZ251cyhDb3VudGVyKSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJrYWlzZXIiKQ0KYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCmFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzcyODYyMDA5NjcyMzUxIg0KaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQpodWg6UGxheSgpDQphc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzMDc1NTA5ODk4MDg5OCIpWzFdDQphc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCmFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQphbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTI3NTk0OTA0MTYzMzE5Ig0KaHVoMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbTIpDQpodWgyOlBsYXkoKQ0KYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUNCg0KbmV3UG9zaXRpb24gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoNC4yNzAsMCwwLjUpDQphc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBuZXdQb3NpdGlvbg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCnNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCnNwYXduKGZ1bmN0aW9uKCkNCiAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgIGFzc2V0OkRlc3Ryb3koKQ0KZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAia2Fpc2VyU3VwZXJTdGFyIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsYXNzZXR9KQ0KICAgIGVuZCwNCn0pDQoNCi0tIERPTiBMT1JFTlpPDQpEb25TZWMgPSBEb25Mb3JlbnpvOkNyZWF0ZVNlY3Rpb24oIlRoZSBab21iaWUiKQ0KDQpEb25Mb3JlbnpvOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJab21iaWUgRHJpYmJsZSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZG9ubG9yZW56byIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEwMjI5NDUwODA5MDU5NyINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmRvbmxvcmVuem8uZHJpYmJsZXRlc3QsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIA0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiem9tYmllZHJpYmJsZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KRG9uTG9yZW56bzpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIlpvbWJpZSBEcmliYmxlIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJkb25sb3JlbnpvIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTAyMjk0NTA4MDkwNTk3Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuZG9ubG9yZW56by5kcmliYmxldGVzdCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ6b21iaWVkcmliYmxlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpEb25Mb3JlbnpvOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJVbmRlYWQgQ3Jhc2giLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImRvbmxvcmVuem8iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84NTg2MjEwNDMwNzQ4MCINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmRvbmxvcmVuem8uc2tpbGwyLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICANCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImxvcmVuem91bmRlYWRjcmFzaCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KRG9uTG9yZW56bzpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIlVuZGVhZCBDcmFzaCIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZG9ubG9yZW56byIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg1ODYyMTA0MzA3NDgwIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuZG9ubG9yZW56by5za2lsbDIsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIA0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAibG9yZW56b3VuZGVhZGNyYXNoIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpEb25Mb3JlbnpvOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJEZWZlbnNpdmUgU3RhbmNlKEwpIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJkb25sb3JlbnpvIikNCiAgICAgICAgYW5pbSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuZG9ubG9yZW56by5Ta2lsbDNMDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAibG9yZW56b2RlZmVuc2UiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkRvbkxvcmVuem86Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJEZWZlbnNpdmUgU3RhbmNlKEwpIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJkb25sb3JlbnpvIikNCiAgICAgICAgYW5pbSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuZG9ubG9yZW56by5Ta2lsbDNMDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJsb3JlbnpvZGVmZW5zZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KRG9uTG9yZW56bzpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiRGVmZW5zaXZlIFN0YW5jZShSKSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZG9ubG9yZW56byIpDQogICAgICAgIGFuaW0gPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmRvbmxvcmVuem8uU2tpbGwzUg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAibG9yZW56b2RlZmVuc2UiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciwiUmlnaHQifSkNCiAgICBlbmQsDQp9KQ0KRG9uTG9yZW56bzpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkRlZmVuc2l2ZSBTdGFuY2UoUikiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImRvbmxvcmVuem8iKQ0KICAgICAgICBhbmltID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5kb25sb3JlbnpvLlNraWxsM1INCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImxvcmVuem9kZWZlbnNlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsIlJpZ2h0In0pDQogICAgZW5kLA0KfSkNCg0KRG9uTG9yZW56bzpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQXdha2VuaW5nIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZG9ubG9yZW56byIpDQogICAgICAgIGFuaW0gPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmRvbmxvcmVuem8uYXdha2Vubm4NCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5kb25sb3JlbnpvWyJkb25zb25nIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKVtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6R2V0QXR0cmlidXRlKCJzdHlsZSIpXS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImxvcmVuem9Bd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkRvbkxvcmVuem86Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImRvbmxvcmVuem8iKQ0KICAgICAgICBhbmltID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5kb25sb3JlbnpvLmF3YWtlbm5uDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5kb25sb3JlbnpvWyJkb25zb25nIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKVtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6R2V0QXR0cmlidXRlKCJzdHlsZSIpXS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImxvcmVuem9Bd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkRvbkxvcmVuem86Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkhvcnJpZmljIEludGVyY2VwdCIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZG9ubG9yZW56byIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzgyMzcxNjQyOTg5MTg1Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJsb3JlbnpvZGVmZW5zZWNhdGNoIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpEb25Mb3JlbnpvOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiSG9ycmlmaWMgSW50ZXJjZXB0IiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJkb25sb3JlbnpvIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vODIzNzE2NDI5ODkxODUiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImxvcmVuem9kZWZlbnNlY2F0Y2giLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkRvbkxvcmVuem86Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkFjZSBFYXRlciIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZG9ubG9yZW56byIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExODY2NDQ0MTIyNjQyMSINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0yLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85ODk0NTU1MTEwMDIzNiINCiAgICAgICAgYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMzA3NTUwOTg5ODA4OTgiKVsxXQ0KICAgICAgICBhc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgaHVoMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbTIpDQogICAgICAgIGh1aDI6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImxvcmVuem9jcm9zc3VwIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsYXNzZXR9KQ0KICAgIGVuZCwNCn0pDQpEb25Mb3JlbnpvOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiQWNlIEVhdGVyIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJkb25sb3JlbnpvIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTE4NjY0NDQxMjI2NDIxIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBhbmltMiA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbTIuQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzk4OTQ1NTUxMTAwMjM2Ig0KICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzMDc1NTA5ODk4MDg5OCIpWzFdDQogICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgaHVoMjpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBhc3NldDpEZXN0cm95KCkNCiAgICAgICAgZW5kKQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAibG9yZW56b2Nyb3NzdXAiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldH0pDQogICAgZW5kLA0KfSkNCkRvbkxvcmVuem86Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIllvIE1pY2hhZWwoU3VjY2VzcykiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImRvbmxvcmVuem8iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDgyNzc5ODg0Nzc4NDciDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vOTQxMjAzMDMzOTA4OTkiDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vOTc4MzEzODk3NTgyMzMiKVsxXQ0KICAgICAgICBhc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgaHVoMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbTIpDQogICAgICAgIGh1aDI6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgZnJvbnRPZmZzZXQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZS5Mb29rVmVjdG9yICogNQ0KICAgICAgICBuZXdQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24gKyBmcm9udE9mZnNldA0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KG5ld1Bvc2l0aW9uLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInlvbWljaGVhbFRydWUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldCx0cnVlfSkgDQogICAgZW5kLA0KfSkNCkRvbkxvcmVuem86Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJZbyBNaWNoYWVsKFN1Y2Nlc3MpIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJkb25sb3JlbnpvIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTA4Mjc3OTg4NDc3ODQ3Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBhbmltMiA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbTIuQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzk0MTIwMzAzMzkwODk5Ig0KICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzk3ODMxMzg5NzU4MjMzIilbMV0NCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIGh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KICAgICAgICBodWgyOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGFzc2V0OkRlc3Ryb3koKQ0KICAgICAgICBlbmQpDQogICAgICAgIGZyb250T2Zmc2V0ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUuTG9va1ZlY3RvciAqIDUNCiAgICAgICAgbmV3UG9zaXRpb24gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uICsgZnJvbnRPZmZzZXQNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhuZXdQb3NpdGlvbiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbikNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInlvbWljaGVhbFRydWUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldCx0cnVlfSkgDQogICAgZW5kLA0KfSkNCkRvbkxvcmVuem86Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIllvIE1pY2hhZWwoRmFpbCkiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImRvbmxvcmVuem8iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMTQxNTE0NDc0NDQ3MTkiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTI1NDYyNDc3MjE3NTU4Ig0KICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzk3ODMxMzg5NzU4MjMzIilbMV0NCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIGh1aDIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKQ0KICAgICAgICBodWgyOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGFzc2V0OkRlc3Ryb3koKQ0KICAgICAgICBlbmQpDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lDQogICAgICAgIGZyb250T2Zmc2V0ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUuTG9va1ZlY3RvciAqIDUNCiAgICAgICAgbmV3UG9zaXRpb24gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uICsgZnJvbnRPZmZzZXQNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhuZXdQb3NpdGlvbiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbikNCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInlvbWljaGVhbFRydWUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldH0pIA0KICAgIGVuZCwNCn0pDQpEb25Mb3JlbnpvOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiWW8gTWljaGFlbChGYWlsKSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZG9ubG9yZW56byIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExNDE1MTQ0NzQ0NDcxOSINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0yLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjU0NjI0NzcyMTc1NTgiDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vOTc4MzEzODk3NTgyMzMiKVsxXQ0KICAgICAgICBhc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgaHVoMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbTIpDQogICAgICAgIGh1aDI6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUNCiAgICAgICAgZnJvbnRPZmZzZXQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZS5Mb29rVmVjdG9yICogNQ0KICAgICAgICBuZXdQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24gKyBmcm9udE9mZnNldA0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KG5ld1Bvc2l0aW9uLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAieW9taWNoZWFsVHJ1ZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkgDQogICAgZW5kLA0KfSkNCi0tR0FHQU1BUlUtLQ0KR2FnYW1hcnVTZWMgPSBHYWdhbWFydTpDcmVhdGVTZWN0aW9uKCJHT0FUTUFSVSEiKQ0KU2NvcnBpb24gPSBHYWdhbWFydTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiU2NvcnBpb24oV2luZHVwKSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZ2FnYW1hcnUiKQ0KICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjYxMjE3NjE1MTAxNzYiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5nYWdhbWFydS5zY29ycGlvbkhpdCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgZW5kKQ0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAic2NvcnBpb25HYW1hbWFydSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCg0KICAgIGVuZCwNCg0KfSkNClNjb3JwaW9uS2V5YmluZCA9IEdhZ2FtYXJ1OkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiU2NvcnBpb24oV2luZHVwKSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5nYWdhbWFydS5zY29ycGlvbkhpdCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZ2FnYW1hcnUiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjYxMjE3NjE1MTAxNzYiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJzY29ycGlvbkdhbWFtYXJ1IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpTY29ycGlvbjIgPSBHYWdhbWFydTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiU2NvcnBpb24oSGl0KSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZ2FnYW1hcnUiKQ0KICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjYxMjE3NjE1MTAxNzYiDQogICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5nYWdhbWFydS5zY29ycGlvbkhpdCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICANCiAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInNjb3JwaW9uR2FtYW1hcnUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgICAgIHdhaXQoMC41KQ0KDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJzY29ycGlvbkdhbWFtYXJ1SGl0IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KDQogICAgZW5kLA0KDQoNCn0pDQoNClNjb3JwaW9uSGl0S2V5YmluZCA9IEdhZ2FtYXJ1OkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiU2NvcnBpb24oSGl0KSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImdhZ2FtYXJ1IikNCiAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTI2MTIxNzYxNTEwMTc2Ig0KICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuZ2FnYW1hcnUuc2NvcnBpb25IaXQsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIA0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgDQogICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJzY29ycGlvbkdhbWFtYXJ1IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgICAgICB3YWl0KDAuNSkNCg0KICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAic2NvcnBpb25HYW1hbWFydUhpdCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCg0KICAgIGVuZCwNCn0pDQpEaXZpbmdIZWFkZXIgPSBHYWdhbWFydTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiRGl2aW5nIEhlYWRlciIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5nYWdhbWFydVsiZGl2aW5nIGhlYWRlckhpdCJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICANCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZ2FnYW1hcnUiKQ0KICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85MTUwNjIwMjk1MTcxNSINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZGl2aW5nSGVhZGVyIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KDQogICAgZW5kLA0KDQp9KQ0KRGl2aW5nSGVhZGVyS2V5YmluZCA9IEdhZ2FtYXJ1OkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiRGl2aW5nIEhlYWRlciIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5nYWdhbWFydVsiZGl2aW5nIGhlYWRlckhpdCJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJnYWdhbWFydSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzkxNTA2MjAyOTUxNzE1Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImRpdmluZ0hlYWRlciIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KQXdha2VuaW5nID0gR2FnYW1hcnU6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkF3YWtlbmluZyIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImdhZ2FtYXJ1IikNCiAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTA4OTkwNzk3MTE1NDQ5Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgZW5kKQ0KICAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5nYWdhbWFydVsiZ2FnYW1hcnUgdGhlbWUiXSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImdhZ2FtYXJ1QXdrIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KDQogICAgZW5kLA0KDQp9KQ0KDQpBd2FrZW5pbmdLZXliaW5kID0gR2FnYW1hcnU6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZ2FnYW1hcnUiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMDg5OTA3OTcxMTU0NDkiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICBlbmQpDQogICAgICAgICBpZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLmdhZ2FtYXJ1WyJnYWdhbWFydSB0aGVtZSJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcylbZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldEF0dHJpYnV0ZSgic3R5bGUiKV0uY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZ2FnYW1hcnVBd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNClBlcmZlY3RTYXZlID0gR2FnYW1hcnU6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlBlcmZlY3QgU2F2ZSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZ2FnYW1hcnUiKQ0KICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMzU3NzA3ODYxNjg5ODQiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJnYWdhbWFydVBlcmZlY3RTYXZlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KDQogICAgZW5kLA0KDQp9KQ0KUGVyZmVjdFNhdmVLZXliaW5kID0gR2FnYW1hcnU6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJQZXJmZWN0IFNhdmUiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImdhZ2FtYXJ1IikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTM1NzcwNzg2MTY4OTg0Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZ2FnYW1hcnVQZXJmZWN0U2F2ZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KUGVyZmVjdFNhdmUgPSBHYWdhbWFydTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiU2hhY2hpaG9rbyIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZ2FnYW1hcnUiKQ0KICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85NjQ4MTQ3NDU0NzQ3OSINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImdhZ2FtYXJ1U2hhY2hpaG9rbyIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCg0KICAgIGVuZCwNCg0KfSkNClNoYWNoaWhva29LZXliaW5kID0gR2FnYW1hcnU6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJTaGFjaGlob2tvIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJnYWdhbWFydSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzk2NDgxNDc0NTQ3NDc5Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZ2FnYW1hcnVTaGFjaGlob2tvIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQotLUJBQ0hJUkEtLQ0KQmFjaGlyYVNlYyA9IEJhY2hpcmE6Q3JlYXRlU2VjdGlvbigiTW9uc3RlciIpDQpTdGVwT3ZlciA9IEJhY2hpcmE6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlN0ZXAgT3ZlcnMiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuYmFjaGlyYS5kcmliYmxlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJiYWNoaXJhIikNCiAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg0MDYzNjA5Mjg0NDcyIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInN0ZXBvdmVycyIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCg0KICAgIGVuZCwNCn0pDQpTdGVwT3ZlcktleWJpbmQgPSBCYWNoaXJhOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiU3RlcCBPdmVycyIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5iYWNoaXJhLmRyaWJibGUsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhY2hpcmEiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84NDA2MzYwOTI4NDQ3MiINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJzdGVwb3ZlcnMiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCk1vbnN0ZXJDb3VudGVyID0gQmFjaGlyYTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiTW9uc3RlciBDb3VudGVyKEhJVCkiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuYmFjaGlyYS5kcmliYmxlY291bnRlcmxhbmQsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhY2hpcmEiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMzk0Njk0ODk3MDkxMjAiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYmFjaGlyYWNvdW50ZXJsYW5kIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KDQogICAgZW5kLA0KfSkNCg0KTW9uc3RlckNvdW50ZXJIaXRLZXliaW5kID0gQmFjaGlyYTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIk1vbnN0ZXIgQ291bnRlcihISVQpIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmJhY2hpcmEuZHJpYmJsZWNvdW50ZXJsYW5kLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJiYWNoaXJhIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTM5NDY5NDg5NzA5MTIwIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImJhY2hpcmFjb3VudGVybGFuZCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KDQpNb25zdGVyQ291bnRlciA9IEJhY2hpcmE6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkJvbiIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmJhY2hpcmFbImdyb3VuZCBib25OTiJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJiYWNoaXJhIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTM0MDA5NzEyMDQyNzk3Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KDAuMikNCiAgICAgICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5iYWNoaXJhWyJncm91bmQgYm9uTk4gS0lDS0VEIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYm9uIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KDQogICAgZW5kLA0KfSkNCkJvbktleWJpbmQgPSBCYWNoaXJhOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiQm9uIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5iYWNoaXJhWyJncm91bmQgYm9uTk4iXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiYmFjaGlyYSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEzNDAwOTcxMjA0Mjc5NyINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCgwLjIpDQogICAgICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuYmFjaGlyYVsiZ3JvdW5kIGJvbk5OIEtJQ0tFRCJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBlbmQpDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImJvbiIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiBlbmQsDQp9KQ0KQXdha2VuaW5nTW9uc3RlciA9IEJhY2hpcmE6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkF3YWtlbmluZyIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5iYWNoaXJhWyJiYWNoaXJhIHRoZW1lICgxKSJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcylbZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldEF0dHJpYnV0ZSgic3R5bGUiKV0uY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiYmFjaGlyYSIpDQogICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84MTI5NDEyODI4NDE0MSINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCg0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYmFjaGlyYUF3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCg0KICAgIGVuZCwNCn0pDQpBd2FrZW5pbmdNb25zdGVyS2V5YmluZCA9IEJhY2hpcmE6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhY2hpcmEiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84MTI5NDEyODI4NDE0MSINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgZW5kKQ0KICAgICAgICBpZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLmJhY2hpcmFbImJhY2hpcmEgdGhlbWUgKDEpIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKVtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6R2V0QXR0cmlidXRlKCJzdHlsZSIpXS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiYWNoaXJhQXdrIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpUcmFuY2VNb25zdGVyID0gQmFjaGlyYTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiTW9uc3RlciBUcmFuY2UiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhY2hpcmEiKQ0KICAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzgyOTE0Nzk0OTczMTgiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTMwNzU1MDk4OTgwODk4IilbMV0NCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZQ0KICAgICAgICBmcm9udE9mZnNldCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lLkxvb2tWZWN0b3IgKiA1DQogICAgICAgIG5ld1Bvc2l0aW9uID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiArIGZyb250T2Zmc2V0DQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcobmV3UG9zaXRpb24sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24pDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTI3MjQ5MjUxMjAwNDM4Ig0KICAgICAgICBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0yKTpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBhc3NldDpEZXN0cm95KCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAibW9uc3RlclRyYW5jZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkNCg0KICAgIGVuZCwNCn0pDQpUcmFuY2VNb25zdGVyS2V5YmluZCA9IEJhY2hpcmE6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJNb25zdGVyIFRyYW5jZSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiYmFjaGlyYSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzc4MjkxNDc5NDk3MzE4Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzMDc1NTA5ODk4MDg5OCIpWzFdDQogICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUNCiAgICAgICAgZnJvbnRPZmZzZXQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZS5Mb29rVmVjdG9yICogNQ0KICAgICAgICBuZXdQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24gKyBmcm9udE9mZnNldA0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KG5ld1Bvc2l0aW9uLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uKQ0KICAgICAgICBhbmltMiA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbTIuQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyNzI0OTI1MTIwMDQzOCINCiAgICAgICAgYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMik6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIm1vbnN0ZXJUcmFuY2UiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldH0pDQogICAgZW5kLA0KfSkNCkJlZVNob290ID0gQmFjaGlyYTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQmVlIFNob290IiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJiYWNoaXJhIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTI2NTQxMzcyNzg5MTkzIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiZWVTaG90IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KDQogICAgZW5kLA0KfSkNCkJlZVNob290S2V5YmluZCA9IEJhY2hpcmE6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJCZWUgU2hvb3QiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImJhY2hpcmEiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjY1NDEzNzI3ODkxOTMiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJiZWVTaG90IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQotLVlVS0lNSVlBLS0NCll1a2ltaXlhU2VjID0gWXVraW1peWE6Q3JlYXRlU2VjdGlvbigiU3RyZWV0IFN0eWxlIG9mIFNvY2NlciIpDQpHeXJvQnRuID0gWXVraW1peWE6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkd5cm8gU2hvdCIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgDQp2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMueXVraW1peWFbImd5cm8gc2hvb3QiXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwieXVraW1peWEiKQ0KYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCmFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyMzk3MTE5MjA0MDQ5MyINCmh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KaHVoOlBsYXkoKQ0KICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCnNwYXduKGZ1bmN0aW9uKCkNCiAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KZW5kKQ0KDQpzcGF3bihmdW5jdGlvbigpDQogICAgd2FpdCgwLjQpDQogICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnl1a2ltaXlhWyJneXJvIHNob290IGhpdHRlZCJdLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KDQogICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImd5cm9TaG90IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KDQoNCiAgICBlbmQsDQp9KQ0KR3lyb1Nob3RLZXliaW5kID0gWXVraW1peWE6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJHeXJvIFNob3QiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgIA0KdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnl1a2ltaXlhWyJneXJvIHNob290Il0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInl1a2ltaXlhIikNCmFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQphbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjM5NzExOTIwNDA0OTMiDQpodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCmh1aDpQbGF5KCkNCiAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQpzcGF3bihmdW5jdGlvbigpDQogICAgd2FpdChodWguTGVuZ3RoKQ0KICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCmVuZCkNCg0Kc3Bhd24oZnVuY3Rpb24oKQ0KICAgIHdhaXQoMC40KQ0KICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy55dWtpbWl5YVsiZ3lybyBzaG9vdCBoaXR0ZWQiXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCg0KICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJneXJvU2hvdCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCg0KDQogICAgZW5kLA0KfSkNCkd5cm9CdG4gPSBZdWtpbWl5YTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQ3V0IEluIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJ5dWtpbWl5YSIpDQogICAgICAgIGxvY2FsIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTIwMzYxNTY5NTQ4NzA0IilbMV0NCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICAgZnJvbnRPZmZzZXQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZS5Mb29rVmVjdG9yDQogICAgICAgICAgICAgICAgbmV3UG9zaXRpb24gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uICsgZnJvbnRPZmZzZXQNCiAgICAgICAgICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KG5ld1Bvc2l0aW9uLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uKQ0KICAgICANCiAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBsb2NhbCB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnl1a2ltaXlhLkN1dEluKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBhc3NldDpEZXN0cm95KCkNCiAgICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnl1a2ltaXlhWyJjdXQgaW4iXSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZmFrZW91dHN0YXJ0IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsYXNzZXR9KQ0KICAgIGVuZCwNCn0pDQpHeXJvU2hvdEtleWJpbmQgPSBZdWtpbWl5YTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkN1dCBJbiIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwieXVraW1peWEiKQ0KICAgICAgICBsb2NhbCBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEyMDM2MTU2OTU0ODcwNCIpWzFdDQogICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgIGZyb250T2Zmc2V0ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUuTG9va1ZlY3Rvcg0KICAgICAgICAgICAgICAgIG5ld1Bvc2l0aW9uID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiArIGZyb250T2Zmc2V0DQogICAgICAgICAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhuZXdQb3NpdGlvbiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbikNCiAgICAgICAgDQogICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgbG9jYWwgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy55dWtpbWl5YS5DdXRJbikNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy55dWtpbWl5YVsiY3V0IGluIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImZha2VvdXRzdGFydCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkNCg0KICAgIGVuZCwNCn0pDQpTcGVlZFJCdG4gPSBZdWtpbWl5YTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiU3BlZWQgRHJpYmJsZShSKSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgDQogICAgICAgDQoNCiANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJ5dWtpbWl5YSIpDQogICAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyNjE1MjMxMTUwMjU5OCINCiAgICAgICAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgICAgICAgDQogICAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCArIDAuMSkNCiAgICAgICAgICAgICAgICAgIGh1aDpTdG9wKCkNCiAgICAgICAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg5NzI2NzM4NDkwMTcxIg0KICAgICAgICAgICAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgICANCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ5dWtpbWl5YTNTdGFydCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLHRydWV9KQ0KDQoNCiAgICBlbmQsDQp9KQ0KDQpTcGVlZERyaWJibGVSS2V5YmluZCA9IFl1a2ltaXlhOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiU3BlZWQgRHJpYmJsZShSKSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICANCiANCg0KIA0KICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInl1a2ltaXlhIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTI2MTUyMzExNTAyNTk4Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoICsgMC4xKQ0KICAgICAgICAgICAgaHVoOlN0b3AoKQ0KICAgICAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vODk3MjY3Mzg0OTAxNzEiDQogICAgICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInl1a2ltaXlhM1N0YXJ0IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsdHJ1ZX0pDQogDQogICAgZW5kLA0KfSkNClNwZWVkTEJ0biA9IFl1a2ltaXlhOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJTcGVlZCBEcmliYmxlKEwpIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgIA0KIA0KDQogDQogIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwieXVraW1peWEiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84MjkwMzI5NzE1MzMwNCINCiAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCArIDAuMSkNCiAgICAgICAgICAgIGh1aDpTdG9wKCkNCiAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzgzNjcwODQ0NDUxMjYzIg0KICAgICAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCiAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ5dWtpbWl5YTNTdGFydCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGZhbHNlfSkNCg0KDQoNCiAgICBlbmQsDQp9KQ0KU3BlZWREcmliYmxlTEtleWJpbmQgPSBZdWtpbWl5YTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIlNwZWVkIERyaWJibGUoTCkiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgIA0KICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInl1a2ltaXlhIikNCiAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCmFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzgyOTAzMjk3MTUzMzA0Ig0KICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgaHVoOlBsYXkoKQ0KICANCiAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgd2FpdChodWguTGVuZ3RoICsgMC4xKQ0KICAgICAgaHVoOlN0b3AoKQ0KICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCmFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzgzNjcwODQ0NDUxMjYzIg0KICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogIGh1aDpQbGF5KCkNCmVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ5dWtpbWl5YTNTdGFydCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGZhbHNlfSkNCg0KICAgIGVuZCwNCn0pDQpTcGVlZExCdG4gPSBZdWtpbWl5YTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQXJjIEJyZWFrIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnl1a2ltaXlhWyJjb3VudGVyZWQgKDIpIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQoNCiANCg0KIA0KICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInl1a2ltaXlhIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTI5MDA1MTYyNjQyNTM0Ig0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICANCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAieXVraW1peWE0Q29uZmlybSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCg0KICAgIGVuZCwNCn0pDQpTcGVlZERyaWJibGVMS2V5YmluZCA9IFl1a2ltaXlhOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiQXJjIEJyZWFrIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnl1a2ltaXlhWyJjb3VudGVyZWQgKDIpIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICANCiAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJ5dWtpbWl5YSIpDQogIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQphbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjkwMDUxNjI2NDI1MzQiDQogIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICBodWg6UGxheSgpDQogIA0KICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCmVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ5dWtpbWl5YTRDb25maXJtIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KDQogICAgZW5kLA0KfSkNCkd5cm9CdG4gPSBZdWtpbWl5YTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQXdha2VuaW5nIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCAieXVraW1peWEiKQ0KICAgICAgICANCiAgICAgICAgbG9jYWwgYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMjUwOTQyNjcyNjk2MDUiKVsxXQ0KICAgICAgICBhc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIA0KICAgICAgICBsb2NhbCBmcm9udE9mZnNldCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lLkxvb2tWZWN0b3INCiAgICAgICAgbG9jYWwgbmV3UG9zaXRpb24gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uICsgZnJvbnRPZmZzZXQNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhuZXdQb3NpdGlvbiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbikNCiAgICAgICAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIA0KICAgICAgICBsb2NhbCB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLnl1a2ltaXlhLkF3YWtlbmluZykNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIA0KICAgICAgICBsb2NhbCB0cmFjazIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMueXVraW1peWEuQXdha2VuaW5nVmljdGltKQ0KICAgICAgICB0cmFjazI6UGxheSgpDQogICAgICAgIA0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljIHRoZW4gDQogICAgICAgICAgIA0KICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy55dWtpbWl5YS55dWtpc29uZyxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpLnl1a2ltaXlhLmNvbG9yfSkNCiAgICAgICAgZW5kDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAieXVraW1peWFGbG93IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsIGFzc2V0fSkNCiAgICBlbmQsDQp9KQ0KR3lyb1Nob3RLZXliaW5kID0gWXVraW1peWE6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsICJ5dWtpbWl5YSIpDQogICAgICAgIA0KICAgICAgICBsb2NhbCBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEyNTA5NDI2NzI2OTYwNSIpWzFdDQogICAgICAgIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgDQogICAgICAgIGxvY2FsIGZyb250T2Zmc2V0ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUuTG9va1ZlY3Rvcg0KICAgICAgICBsb2NhbCBuZXdQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24gKyBmcm9udE9mZnNldA0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KG5ld1Bvc2l0aW9uLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uKQ0KICAgICAgICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgDQogICAgICAgIGxvY2FsIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMueXVraW1peWEuQXdha2VuaW5nKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgDQogICAgICAgIGxvY2FsIHRyYWNrMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy55dWtpbWl5YS5Bd2FrZW5pbmdWaWN0aW0pDQogICAgICAgIHRyYWNrMjpQbGF5KCkNCiAgICAgICAgDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBhc3NldDpEZXN0cm95KCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBpZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgdGhlbiAgDQogICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLnl1a2ltaXlhLnl1a2lzb25nLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcykueXVraW1peWEuY29sb3J9KQ0KICAgICAgICBlbmQNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ5dWtpbWl5YUZsb3ciLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciwgYXNzZXR9KQ0KICAgIGVuZCwNCn0pDQoNCkd5cm9CdG4gPSBZdWtpbWl5YTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiU3RyZWV0IFN0eWxlIERyaWJibGUoU3VycGFzcyBFbmVteSkiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgIA0KIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwieXVraW1peWEiKQ0KIGxvY2FsICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEyNTA5NDI2NzI2OTYwNSIpWzFdDQogYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogIGZyb250T2Zmc2V0ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUuTG9va1ZlY3RvciAqIDMNCiAgICAgICAgIG5ld1Bvc2l0aW9uID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiArIGZyb250T2Zmc2V0DQogICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KG5ld1Bvc2l0aW9uLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uKQ0KIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogbG9jYWwgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy55dWtpbWl5YS5Ta2lsbDVTdWNjZXNzKQ0KIHRyYWNrOlBsYXkoKQ0KIGxvY2FsIHRyYWNrMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy55dWtpbWl5YS5Ta2lsbDVTdWNjZXNzVikNCiB0cmFjazI6UGxheSgpDQogc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICBhc3NldDpEZXN0cm95KCkNCiAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICBlbmQpICANCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ5dWtpbWl5YTUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcixhc3NldH0pDQogICAgZW5kLA0KfSkNCkd5cm9TaG90S2V5YmluZCA9IFl1a2ltaXlhOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiU3RyZWV0IFN0eWxlIERyaWJibGUoU3VycGFzcyBFbmVteSkiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICANCiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInl1a2ltaXlhIikNCiBsb2NhbCAgYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMjUwOTQyNjcyNjk2MDUiKVsxXQ0KIGFzc2V0LlBhcmVudCA9IHdvcmtzcGFjZQ0KIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICBmcm9udE9mZnNldCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lLkxvb2tWZWN0b3IgKiAzDQogICAgICAgICBuZXdQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24gKyBmcm9udE9mZnNldA0KICAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhuZXdQb3NpdGlvbiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbikNCiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KIGxvY2FsIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMueXVraW1peWEuU2tpbGw1U3VjY2VzcykNCiB0cmFjazpQbGF5KCkNCiBsb2NhbCB0cmFjazIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMueXVraW1peWEuU2tpbGw1U3VjY2Vzc1YpDQogdHJhY2syOlBsYXkoKQ0KIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiBzcGF3bihmdW5jdGlvbigpDQogICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgZW5kKSAgDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAieXVraW1peWE1IiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsYXNzZXR9KQ0KICAgIGVuZCwNCn0pDQpHeXJvQnRuID0gWXVraW1peWE6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlN0cmVldCBTdHlsZSBEcmliYmxlKEd5cm8gU2hvdCkiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInl1a2ltaXlhIikNCiAgICAgICAgbG9jYWwgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTI1MDk0MjY3MjY5NjA1IilbMV0NCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICAgZnJvbnRPZmZzZXQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZS5Mb29rVmVjdG9yICogMw0KICAgICAgICAgICAgICAgIG5ld1Bvc2l0aW9uID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiArIGZyb250T2Zmc2V0DQogICAgICAgICAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhuZXdQb3NpdGlvbiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbikNCiAgICAgICAgDQogICAgICAgIGxvY2FsICBhc3NldDIgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMjAzNjE1Njk1NDg3MDQiKVsxXQ0KICAgICAgICBhc3NldDIuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0Mi5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgIGZyb250T2Zmc2V0MiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lLkxvb2tWZWN0b3IgKiAzDQogICAgICAgICAgICAgICAgbmV3UG9zaXRpb24yID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiArIGZyb250T2Zmc2V0DQogICAgICAgICAgICAgICAgYXNzZXQyLlByaW1hcnlQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcobmV3UG9zaXRpb24sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24pDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIGxvY2FsIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMueXVraW1peWEuU2tpbGw1U3VjY2VzczIpDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBsb2NhbCB0cmFjazIgPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMueXVraW1peWEuU2tpbGw1U3VjY2Vzc04xKQ0KICAgICAgICB0cmFjazI6UGxheSgpDQogICAgICAgIGxvY2FsIHRyYWNrMyA9IGFzc2V0Mi5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMueXVraW1peWEuU2tpbGw1U3VjY2Vzc04yKQ0KICAgICAgICB0cmFjazM6UGxheSgpDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIGFzc2V0OkRlc3Ryb3koKQ0KICAgICAgICAgICAgYXNzZXQyOkRlc3Ryb3koKQ0KICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAieXVraW1peWE1Z3lybyIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0LGFzc2V0Mn0pDQogICAgZW5kLA0KfSkNCkd5cm9TaG90S2V5YmluZCA9IFl1a2ltaXlhOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiU3RyZWV0IFN0eWxlIERyaWJibGUoR3lybyBTaG90KSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwieXVraW1peWEiKQ0KICAgICAgICBsb2NhbCAgYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMjUwOTQyNjcyNjk2MDUiKVsxXQ0KICAgICAgICBhc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgICBmcm9udE9mZnNldCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lLkxvb2tWZWN0b3IgKiAzDQogICAgICAgICAgICAgICAgbmV3UG9zaXRpb24gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uICsgZnJvbnRPZmZzZXQNCiAgICAgICAgICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KG5ld1Bvc2l0aW9uLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uKQ0KICAgICAgICANCiAgICAgICAgbG9jYWwgIGFzc2V0MiA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEyNTA5NDI2NzI2OTYwNSIpWzFdDQogICAgICAgIGFzc2V0Mi5QYXJlbnQgPSB3b3Jrc3BhY2UNCiAgICAgICAgYXNzZXQyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICAgZnJvbnRPZmZzZXQyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUuTG9va1ZlY3RvciAqIDMNCiAgICAgICAgICAgICAgICBuZXdQb3NpdGlvbjIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uICsgZnJvbnRPZmZzZXQNCiAgICAgICAgICAgICAgICBhc3NldDIuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhuZXdQb3NpdGlvbiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbikNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgbG9jYWwgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy55dWtpbWl5YS5Ta2lsbDVTdWNjZXNzMikNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGxvY2FsIHRyYWNrMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy55dWtpbWl5YS5Ta2lsbDVTdWNjZXNzTjEpDQogICAgICAgIHRyYWNrMjpQbGF5KCkNCiAgICAgICAgbG9jYWwgdHJhY2szID0gYXNzZXQyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy55dWtpbWl5YS5Ta2lsbDVTdWNjZXNzTjIpDQogICAgICAgIHRyYWNrMzpQbGF5KCkNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgICAgICBhc3NldDI6RGVzdHJveSgpDQogICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJ5dWtpbWl5YTVneXJvIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsYXNzZXQsYXNzZXQyfSkNCiAgICBlbmQsDQp9KQ0KLS1TQUtVUkEgSVpBWU9JLS0NClNha3V5YVNlYyA9IFNha3V5YTpDcmVhdGVTZWN0aW9uKCJUaW1lc3RvcHBpbmcgbWFpZCIpDQpTdGVwQmVoaW5kQnRuID0gU2FrdXlhOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJTdGVwIEJlaGluZCIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiaXpheW9pIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTI0MzEzMTYyMjQ0ODg5Ig0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLml6YXlvaS5zYWt1eWEsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIA0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiaXpheW9pc3RlcGJlaGluZCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KU3RlcEJlaGluZEtleWJpbmQgPSBTYWt1eWE6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJTdGVwIEJlaGluZCIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiaXpheW9pIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTI0MzEzMTYyMjQ0ODg5Ig0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLml6YXlvaS5zYWt1eWEsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIA0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiaXpheW9pc3RlcGJlaGluZCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KDQpQb3dlcmZ1bFN0cmlrZXJCdG4gPSBTYWt1eWE6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlBvd2VyZnVsIFN0cmlrZXIiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIml6YXlvaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzkwNzgxOTQ5MDYxNjU5Ig0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmthaXNlci5rYWlzZXJpbXBhY3R3aW5kdXAsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIHdhaXQoMC41KQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMua2Fpc2VyLmthaXNlcmltcGFjdGhpdHRlZCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInBvd2VyZnVsc3RyaWtlciIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KUG93ZXJmdWxTdHJpa2VyS2V5YmluZCA9IFNha3V5YTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIlBvd2VyZnVsIFN0cmlrZXIiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIml6YXlvaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzkwNzgxOTQ5MDYxNjU5Ig0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmthaXNlci5rYWlzZXJpbXBhY3R3aW5kdXAsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIHdhaXQoMC41KQ0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMua2Fpc2VyLmthaXNlcmltcGFjdGhpdHRlZCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAicG93ZXJmdWxzdHJpa2VyIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpBd2FrZW5pbmdCdG4gPSBTYWt1eWE6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkF3YWtlbmluZyIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJpemF5b2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83Mjc0NjAyNzY1MDgyOSINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBpZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLml6YXlvaVsic2FrdXlhIHRoZW1lIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKVtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6R2V0QXR0cmlidXRlKCJzdHlsZSIpXS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJpemF5b2lBd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkF3YWtlbmluZ0tleWJpbmQgPSBTYWt1eWE6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsIml6YXlvaSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzcyNzQ2MDI3NjUwODI5Ig0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMuaXpheW9pWyJzYWt1eWEgdGhlbWUiXSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIml6YXlvaUF3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KVGltZVN0b3BCdG4gPSBTYWt1eWE6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlRpbWUgU3RvcCIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiaXpheW9pIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vOTcwMzgzNTc4MzM5OTYiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJUaW1lU3RvcCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KU2FrdXlhOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiVGltZSBTdG9wIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJpemF5b2kiKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85NzAzODM1NzgzMzk5NiINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIlRpbWVTdG9wIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQotLSBST05BTERPIC0tDQpDUjdEcmliYmxlQnRuID0gUm9uYWxkbzpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiQ1I3IERyaWJibGUiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInJvbmFsZG8iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84ODMyMjc3MTk5OTQzMCINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogIA0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJjcjdkcmliYmxlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpSb25hbGRvOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiQ1I3IERyaWJibGUiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInJvbmFsZG8iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84ODMyMjc3MTk5OTQzMCINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQoNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImNyN2RyaWJibGUiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkJpY3ljbGVDUjdCdG4gPSBSb25hbGRvOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJCaWN5Y2xlIEtpY2siLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInJvbmFsZG8iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjY3MzQ0NTYyMzYwMzQiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgd2FpdCgxKQ0KICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImNyN0tpY2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNClJvbmFsZG86Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJCaWN5Y2xlIEtpY2siLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInJvbmFsZG8iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjY3MzQ0NTYyMzYwMzQiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgd2FpdCgxKQ0KICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImNyN0tpY2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkJpY3ljbGVDUjdCdG4gPSBSb25hbGRvOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KIA0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsInJvbmFsZG8iKQ0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly83MDU2NzQ0NTA1MjcyMiINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICBpZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLnJvbmFsZG9bIjA1MDgiXSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpW2dhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpHZXRBdHRyaWJ1dGUoInN0eWxlIildLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInJvbmFsZG9Bd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCg0KUm9uYWxkbzpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkF3YWtlbmluZyIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJyb25hbGRvIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vNzA1Njc0NDUwNTI3MjIiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgIGlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMucm9uYWxkb1siMDUwOCJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcylbZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOkdldEF0dHJpYnV0ZSgic3R5bGUiKV0uY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAicm9uYWxkb0F3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KQmljeWNsZUNSN0J0biA9IFJvbmFsZG86Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkdyZWF0ZXN0IE9mIEFsbCBUaW1lIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJyb25hbGRvIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTE3Njk3NDE1NDE4NzcwIg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInJvbmFsZG9JdHRvb2Vhc3kiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCg0KUm9uYWxkbzpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkdyZWF0ZXN0IE9mIEFsbCBUaW1lIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJyb25hbGRvIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTE3Njk3NDE1NDE4NzcwIg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgInJvbmFsZG9JdHRvb2Vhc3kiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCnNraWxsaXNzdWUgPSBSb25hbGRvOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJTa2lsbCBHYXAiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsICJyb25hbGRvIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vODY5NzI5NjgyMTcxMjUiDQogICAgICAgIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICANCiAgICAgICAgYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMjUwOTQyNjcyNjk2MDUiKVsxXQ0KICAgICAgICBhc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICANCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBsb2NhbCBXZWxkID0gSW5zdGFuY2UubmV3KCJXZWxkIikNCgkJCVdlbGQuUGFydDAgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0DQoJCQlXZWxkLlBhcnQxID0gYXNzZXQuUHJpbWFyeVBhcnQNCgkJCVdlbGQuUGFyZW50ID0gYXNzZXQuUHJpbWFyeVBhcnQNCiAgICAgICAgYW5pbTIgPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0yLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjg5MjQ5NDcwMDg3MzYiDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgd2FpdCgxKQ0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgdHJhY2syID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgdHJhY2syOlBsYXkoKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIFdlbGQ6RGVzdHJveSgpDQogICAgICAgICAgICB0cmFjazpTdG9wKCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIHRyYWNrMjpTdG9wKCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICANCiAgICAgICAgICAgIGFzc2V0OkRlc3Ryb3koKQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiU2tpbGxHYXBSb25hbGRvIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsYXNzZXR9KQ0KICAgIGVuZCwNCn0pDQpSb25hbGRvOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiU2tpbGwgR2FwIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCAicm9uYWxkbyIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg2OTcyOTY4MjE3MTI1Ig0KICAgICAgICANCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTI1MDk0MjY3MjY5NjA1IilbMV0NCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgbG9jYWwgV2VsZCA9IEluc3RhbmNlLm5ldygiV2VsZCIpDQoJCQlXZWxkLlBhcnQwID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydA0KCQkJV2VsZC5QYXJ0MSA9IGFzc2V0LlByaW1hcnlQYXJ0DQoJCQlXZWxkLlBhcmVudCA9IGFzc2V0LlByaW1hcnlQYXJ0DQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTI4OTI0OTQ3MDA4NzM2Ig0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgIHdhaXQoMSkNCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIHRyYWNrMiA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbTIpDQogICAgICAgIHRyYWNrMjpQbGF5KCkNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBXZWxkOkRlc3Ryb3koKQ0KICAgICAgICAgICAgdHJhY2s6U3RvcCgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICB0cmFjazI6U3RvcCgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgDQogICAgICAgICAgICBhc3NldDpEZXN0cm95KCkNCiAgICAgICAgZW5kKQ0KICAgICAgICANCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIlNraWxsR2FwUm9uYWxkbyIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkNCiAgICBlbmQsDQp9KQ0KLS0gRVhFIC0tDQpFeGVTZWMgPSBFeGU6Q3JlYXRlU2VjdGlvbigiU29uaWMuZXhlIikNClNob3J0Y3V0QnRuID0gRXhlOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJTaG9ydGN1dCBPTEQiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImV4ZSIpDQogIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQphbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly85NjM3Mjg4MDI4ODczOCINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIA0KICAgICAgDQogICAgICAgIA0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiU2hvcnRjdXQiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkV4ZTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIlNob3J0Y3V0IE9MRCIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZXhlIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vOTYzNzI4ODAyODg3MzgiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KDQogICAgICAgIA0KICAgICAgICANCg0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiU2hvcnRjdXQiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNClNob3J0Y3V0QnRuID0gRXhlOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJTaG9ydGN1dCIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZXhlIikNCiAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCmFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExNjQ1NTU4OTI2MDk1NCINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5leGUuZHJpYmJsZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIkRhc2hTdXBlciIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KRXhlOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiU2hvcnRjdXQiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZXhlIikNCiAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCmFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzExNjQ1NTU4OTI2MDk1NCINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5leGUuZHJpYmJsZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICANCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJEYXNoU3VwZXIiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNClRQQnRuID0gRXhlOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJFeHRlcm1pbmF0ZSIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZXhlIikNCiAgICAgICAgYW5pbSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuZXhlLlRwDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICANCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmV4ZS5UcGVkLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiVFAiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkV4ZTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkV4dGVybWluYXRlIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJleGUiKQ0KICAgICAgICBhbmltID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5leGUuVHANCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQoNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmV4ZS5UcGVkLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICANCiAgICAgICAgDQoNCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiVFAiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNClN0cmlrZUJ0biA9IEV4ZTpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiU3RyaWtlIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJleGUiKQ0KICAgICAgICBhbmltID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5leGUuS2ljaw0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICB2MC5wbGF5KGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuZXhlLldpbmRVcCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgICAgICANCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgIHdhaXQoMy43NSkNCiAgICAgICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmV4ZS5LaWNrUywgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgICAgICANCiAgICAgICAgZW5kKQ0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KHRyYWNrLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiREFTVFN0cmlrZSIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJEQVNUU3RyaWtlRUZGRUNUIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpFeGU6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJTdHJpa2UiLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgIA0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJleGUiKQ0KYW5pbSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMuZXhlLktpY2sNCnRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQp0cmFjazpQbGF5KCkNCmdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQoNCg0KdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmV4ZS5XaW5kVXAsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgIA0Kc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0Kc3Bhd24oZnVuY3Rpb24oKQ0Kd2FpdCgzLjc1KQ0KdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmV4ZS5LaWNrUywgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgDQplbmQpDQpzcGF3bihmdW5jdGlvbigpDQogICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIkRBU1RTdHJpa2UiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiREFTVFN0cmlrZUVGRkVDVCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KQXdrQnRuID0gRXhlOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KIA0KDQpnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImV4ZSIpDQogICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEzMTIwMjk0NTA5NDY4MCINCiAgICAgICAgdHJhY2sgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgdHJhY2s6UGxheSgpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICANCiAgICAgICAgaWYgZ2V0Z2VudigpLlVzZUF3a011c2ljID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJhd2tNdXNpYyIsIGZsYWcsIHtnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5leGVbImF3a1NvbmciXSxmYWxzZSxyZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2Uud2lraS5zdHlsZXMpLmV4ZS5jb2xvcn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJleGVBd2siLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCkV4ZTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIkF3YWtlbmluZyIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiZXhlIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTMxMjAyOTQ1MDk0NjgwIg0KICAgICAgICB0cmFjayA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICB0cmFjazpQbGF5KCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCg0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiBpZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLmV4ZVsiYXdrU29uZyJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcykuZXhlLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImV4ZUF3ayIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyfSkNCiAgICBlbmQsDQp9KQ0KLS0gQ0hBUFRFUiAtLQ0KQ2hhcHRlclNlYyA9IENoYXB0ZXI6Q3JlYXRlU2VjdGlvbigiQ2hhcHRlcm1hbiBJRz8iKQ0KU3RyaWtlQnRuID0gQ2hhcHRlcjpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiU3RyaWtlIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJjaGFwdGVyIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vODMxMjM5MzE0NTU1ODgiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQodHJhY2suTGVuZ3RoKQ0KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJDaGFwdGVyU3RyaWtlIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpDaGFwdGVyOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiU3RyaWtlIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJjaGFwdGVyIikNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vODMxMjM5MzE0NTU1ODgiDQogICAgICAgIHRyYWNrID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIHRyYWNrOlBsYXkoKQ0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdCh0cmFjay5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgZW5kKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIkNoYXB0ZXJTdHJpa2UiLCBmbGFnLCB7Z2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCg0KLS0gT1RIRVIgLS0NCkZpbmFsTWF0Y2hTYWVCdG4gPSBPdGhlcjpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiRmluYWwgTWF0Y2goU2FlIFVzZXIpIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KICAgICAgICBhc3NldCA9IGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLzEzMDc1NTA5ODk4MDg5OCIpWzFdDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoNTMpDQogICAgICAgICAgICBhc3NldDpEZXN0cm95KCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICBhc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lDQogICAgICAgIA0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xNDA2NzQzMjY1ODg5NDMiDQogICAgICAgIGh1aCA9IGFzc2V0Lkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICANCiAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIGFzc2V0OkRlc3Ryb3koKQ0KICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICBhbmltMiA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbTIuQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyMjM3ODUxMTQ2Nzg3MiINCiAgICAgICAgaHVoMiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgaHVoMjpQbGF5KCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJmaW5hbG1hdGNoIiwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsYXNzZXR9KQ0KICAgIGVuZCwNCn0pDQoNCg0KDQpPdGhlcjpDcmVhdGVLZXliaW5kKHsgDQogICAgTmFtZSA9ICJGaW5hbCBNYXRjaCAoU2FlIFVzZXIpIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsICAtLSBzcGFjZSBrZXliaW5kDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgYXNzZXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMzA3NTUwOTg5ODA4OTgiKVsxXQ0KICAgICAgICBhc3NldC5QYXJlbnQgPSB3b3Jrc3BhY2UNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lDQoNCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTQwNjc0MzI2NTg4OTQzIg0KICAgICAgICBodWggPSBhc3NldC5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgIGh1aDpQbGF5KCkNCg0KICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogICAgICAgIGVuZCkNCg0KICAgICAgICBhbmltMiA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbTIuQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyMjM3ODUxMTQ2Nzg3MiINCiAgICAgICAgaHVoMiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgaHVoMjpQbGF5KCkNCg0KICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3YWl0KDUzKQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgZW5kKQ0KDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiZmluYWxtYXRjaCIsIGZsYWcsIHtnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLGFzc2V0fSkNCiAgICBlbmQsDQp9KQ0KRmluYWxNYXRjaFJpbkJ0biA9IE90aGVyOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJGaW5hbCBNYXRjaChSaW4gVXNlcikiLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTIwMzYxNTY5NTQ4NzA0IilbMV0NCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICANCiAgICAgICAgYmFsbHdoYXQgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMDQzMzc2NDAwMTI0NDAiKVsxXQ0KICAgICAgICBiYWxsd2hhdC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgYmFsbHdoYXQuUGFyZW50ID0gYXNzZXQNCiAgICAgICAgYmFsbHdoYXQuYmFsbC5QYXJ0MCA9IGFzc2V0LlByaW1hcnlQYXJ0DQogICAgICAgIGJhbGx3aGF0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgYmFsbHdoYXQuVHJhbnNwYXJlbmN5ID0gMA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICANCiAgICAgICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTQwNjc0MzI2NTg4OTQzIg0KICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTIyMzc4NTExNDY3ODcyIg0KICAgICAgICBodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCiAgICAgICAgDQogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdhaXQoaHVoMi5MZW5ndGgpDQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICAgICAgICAgIGJhbGx3aGF0LlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgIGFzc2V0OkRlc3Ryb3koKQ0KICAgICAgICBlbmQpDQogICAgICAgIA0KICAgICAgICBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUgPSB3b3Jrc3BhY2UubWFwLm5lb24uc2VsZWN0LkIuQ0YuQ0ZyYW1lICsgVmVjdG9yMy5uZXcoMCwgMywgMCkNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUgPSBhc3NldC5QcmltYXJ5UGFydC5DRnJhbWUNCiAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICBodWgyOlBsYXkoKQ0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImZpbmFsbWF0Y2giLCBmbGFnLCB7YXNzZXQsZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcn0pDQogICAgZW5kLA0KfSkNCk90aGVyOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiRmluYWwgTWF0Y2ggKFJpbiBVc2VyKSIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLCAgLS0gc3BhY2Uga2V5YmluZA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGFzc2V0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTIwMzYxNTY5NTQ4NzA0IilbMV0NCiAgICAgICAgYXNzZXQuUGFyZW50ID0gd29ya3NwYWNlDQogICAgICAgIGFzc2V0LlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KDQogICAgICAgIGJhbGx3aGF0ID0gZ2FtZTpHZXRPYmplY3RzKCJyYnhhc3NldGlkOi8vMTA0MzM3NjQwMDEyNDQwIilbMV0NCiAgICAgICAgYmFsbHdoYXQuUGFyZW50ID0gYXNzZXQNCiAgICAgICAgYmFsbHdoYXQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICBiYWxsd2hhdC5UcmFuc3BhcmVuY3kgPSAwDQoNCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCg0KICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xNDA2NzQzMjY1ODg5NDMiDQogICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KDQogICAgICAgIGFuaW0yID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICBhbmltMi5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTIyMzc4NTExNDY3ODcyIg0KICAgICAgICBodWgyID0gYXNzZXQuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltMikNCg0KICAgICAgICBodWg6UGxheSgpDQogICAgICAgIGh1aDI6UGxheSgpDQoNCiAgICAgICAgYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gd29ya3NwYWNlLm1hcC5uZW9uLnNlbGVjdC5CLkNGLkNGcmFtZSArIFZlY3RvcjMubmV3KDAsIDMsIDApDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQ0ZyYW1lID0gYXNzZXQuUHJpbWFyeVBhcnQuQ0ZyYW1lDQoNCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2FpdChodWgyLkxlbmd0aCkNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgYmFsbHdoYXQuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgYXNzZXQ6RGVzdHJveSgpDQogICAgICAgIGVuZCkNCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJmaW5hbG1hdGNoIiwgZmxhZywge2Fzc2V0LGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXJ9KQ0KICAgIGVuZCwNCn0pDQpSYWluQnRuID0gT3RoZXI6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIlJhaW4iLA0KICAgIA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAicmFpbl93ZWF0aGVyIiwgZmxhZywge3RydWV9KQ0KICAgIGVuZCwNCn0pDQoNCk90aGVyOkNyZWF0ZUtleWJpbmQoew0KICAgIE5hbWUgPSAiUmFpbiIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLCAgLS0gc3BhY2Uga2V5YmluZA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAicmFpbl93ZWF0aGVyIiwgZmxhZywge3RydWV9KQ0KICAgIGVuZCwNCn0pDQpSYWluQnRuID0gT3RoZXI6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkZpeCBCYWxsIiwNCiAgICANCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgc2hhcmVkLmJhbGwgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMDQzMzc2NDAwMTI0NDAiKVsxXQ0KICAgICAgICBzaGFyZWQuYmFsbC5QYXJlbnQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyDQogICAgICAgIHNoYXJlZC5iYWxsLkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICBzaGFyZWQuYmFsbC5iYWxsLlBhcnQwID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydA0KICAgICAgICBzaGFyZWQuYmFsbC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICBlbmQsDQp9KQ0KRG9uTG9yZW56b0F1cmFCdG4gPSBPdGhlcjpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiRG9uIExvcmVuem8gQXVyYSIsDQpDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCg0KICAgICAgICBmb3IgXywgdjgxNCBpbiBpcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgICAgICAgICAgaWYgdjgxNDpJc0EoIlBhcnQiKSBhbmQgdjgxNC5UcmFuc3BhcmVuY3kgPCAxIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgXywgdjgxNSBpbiBpcGFpcnMoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMuZG9ubG9yZW56by51bHQ0YXVyYTpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICB2ODE2ID0gdjgxNTpDbG9uZSgpDQogICAgICAgICAgICAgICAgICAgIHY4MTYuUGFyZW50ID0gdjgxNA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCn0pDQoNCk90aGVyOkNyZWF0ZVRvZ2dsZSh7DQogICBOYW1lID0gIkF3YWtlbmluZyBNdXNpYyIsDQogICBDdXJyZW50VmFsdWUgPSBmYWxzZSwNCiAgIEZsYWcgPSAiVXNlQXdrTXVzaWMiLCAgLS0gRW5zdXJlIHRoaXMgZmxhZyBleGlzdHMNCiAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpDQogICAgICBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPSBWYWx1ZSAgLS0gU2V0IHRoZSBnbG9iYWwgZmxhZyBiYXNlZCBvbiB0aGUgdG9nZ2xlDQogICBlbmQsDQp9KQ0KUmFpbkJ0biA9IE90aGVyOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJTdG9wIEF3YWtlbmluZyBNdXNpYyIsDQogICAgDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGZvciBfLCBzb3VuZHMgaW4gaXBhaXJzKGdhbWUuU291bmRTZXJ2aWNlOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICBpZiBzb3VuZHM6SXNBKCJTb3VuZCIpIGFuZCBzb3VuZHMuTmFtZSB+PSAib2xkIiBhbmQgc291bmRzLk5hbWUgfj0gImZvb3RiYWxsLWNyb3dkLTMtNjkyNDUiIHRoZW4NCiAgICAgICAgICAgICAgICBzb3VuZHM6U3RvcCgpDQogICAgICAgICAgICAgICAgc291bmRzOkRlc3Ryb3koKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCn0pDQoNCg0KT3RoZXI6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJEb24gTG9yZW56byBBdXJhIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsICAtLSBzcGFjZSBrZXliaW5kDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZm9yIF8sIHBhcnQgaW4gaXBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8NCiAgICAgICAgICAgIGlmIHBhcnQ6SXNBKCJQYXJ0IikgYW5kIHBhcnQuVHJhbnNwYXJlbmN5IDwgMSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIF8sIGF1cmFQYXJ0IGluIGlwYWlycyhnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlc291cmNlcy5kb25sb3JlbnpvLnVsdDRhdXJhOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgIGF1cmFQYXJ0OkNsb25lKCkuUGFyZW50ID0gcGFydA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCn0pDQotLU1WUFMtLQ0KDQpNVlBTZWMgPSBNVlA6Q3JlYXRlU2VjdGlvbigiQWxsIE1WUHMgb2YgQXpsIikNCmxvY2FsIGRvbXZwID0gZnVuY3Rpb24oTVZQTkFNRSkNCiAgICANCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkNGcmFtZSA9IHdvcmtzcGFjZS5tYXAuc29tZXRoaW5nLm12cENGLkNGcmFtZQ0KICAgIGFuaW0gPSByZXF1aXJlKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS53aWtpLm12cEFuaW1hdGlvbnMpW01WUE5BTUVdLmFuaW1hdGlvbg0KICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgIGh1aDpQbGF5KCkNCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgIGlmIHJlcXVpcmUoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLndpa2kubXZwQW5pbWF0aW9ucylbTVZQTkFNRV0uY3VzdG9tQ0ZyYW1lIHRoZW4NCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5DRnJhbWUgPSByZXF1aXJlKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS53aWtpLm12cEFuaW1hdGlvbnMpW01WUE5BTUVdLmN1c3RvbUNGcmFtZQ0KICAgIGVuZA0KICAgIGlmIE1WUE5BTUUgPT0gInUyMCIgdGhlbg0KICAgIA0KICAgICAgICBmb3IgaSA9IDEsIDQgZG8NCiAgICAgICAgICAgIGxvY2FsIHJpZyA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZXNvdXJjZXMubXZwQXNzZXRzWyJSaWciLi5pXTpDbG9uZSgpDQogICAgICAgICAgICByaWcuUGFyZW50ID0gd29ya3NwYWNlDQpyaWc6U2V0UHJpbWFyeVBhcnRDRnJhbWUocmVxdWlyZShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikud2lraS5tdnBBbmltYXRpb25zKVsidTIwIl0uY3VzdG9tQ0ZyYW1lKQ0KcmlnLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICAgICAgbG9jYWwgaHVtYW5vaWQgPSByaWc6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpDQogICAgICAgICAgICBsb2NhbCBhbmltID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5tdnBBc3NldHMudTIwWyJBbmltYXRpb25SaWciLi5pXQ0KDQogICAgDQogICAgICAgICAgICBpZiBodW1hbm9pZCBhbmQgYW5pbSB0aGVuDQogICAgICAgICAgICAgICAgaHVoID0gaHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICAgICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgICAgICAgICAgcmlnOkRlc3Ryb3koKQ0KICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICANCiAgICBzcGF3bihmdW5jdGlvbigpDQogICAgd2FpdChodWguTGVuZ3RoKQ0KICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgIGVuZCkNCiAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJlZmYiKSB0aGVuDQogICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuZWZmOkRlc3Ryb3koKQ0KICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgaWYgcmVxdWlyZShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikud2lraS5tdnBBbmltYXRpb25zKVtNVlBOQU1FXS5zY29yZV9sZW5ndGggdGhlbg0KICAgICAgIA0KICAgICAgICB3YWl0KHJlcXVpcmUoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLndpa2kubXZwQW5pbWF0aW9ucylbTVZQTkFNRV0uc2NvcmVfbGVuZ3RoKQ0KICAgICANCiAgICAgICAgIHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5jbGllbnQucmVwbGljYXRpb24pLm12cEdvYWwodG9zdHJpbmcoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLndvcmtzcGFjZS5Bc2NvcmUuVmFsdWUpLCB0b3N0cmluZyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikud29ya3NwYWNlLkJzY29yZS5WYWx1ZSksICJBIiwgbmlsKQ0KICAgICAgICBlbmQNCiAgICBlbmQpDQoNCiAgICANCiAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJtdnBfIi4uTVZQTkFNRSwgZmxhZywge2dhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIsIGh1aC5MZW5ndGh9KSAgICANCiAgIA0KZW5kDQpmaXJzdGZsb3cgPSBNVlA6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkZpcnN0IEZsb3ciLA0KQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQpkb212cCgiZmlyc3RGbG93IikNCiAgICBlbmQsDQp9KQ0Kc3BlY2lhbEdvYWwgPSBNVlA6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gInNwZWNpYWxHb2FsIiwNCkNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KZG9tdnAoInNwZWNpYWxHb2FsIikNCiAgICBlbmQsDQp9KQ0Ka2Fpc2VyVHJpdW1waCA9IE1WUDpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAia2Fpc2VyVHJpdW1waCIsDQpDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCmRvbXZwKCJrYWlzZXJUcml1bXBoIikNCiAgICBlbmQsDQp9KQ0KbmFnaVNlaXNoaXJvID0gTVZQOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJuYWdpU2Vpc2hpcm8iLA0KQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQpkb212cCgibmFnaVNlaXNoaXJvIikNCiAgICBlbmQsDQp9KQ0KcmluVHJpdW1waCA9IE1WUDpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAicmluVHJpdW1waCIsDQpDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCmRvbXZwKCJyaW5Ucml1bXBoIikNCiAgICBlbmQsDQp9KQ0KY2hpZ2lyaVRyaXVtcGggPSBNVlA6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gImNoaWdpcmlUcml1bXBoIiwNCkNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KZG9tdnAoImNoaWdpcmlUcml1bXBoIikNCiAgICBlbmQsDQp9KQ0KaXNhZ2lUcml1bXBoID0gTVZQOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJpc2FnaVRyaXVtcGgiLA0KQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQpkb212cCgiaXNhZ2lUcml1bXBoIikNCiAgICBlbmQsDQp9KQ0KRmllbGRLaW5nID0gTVZQOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJGaWVsZEtpbmciLA0KQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQpkb212cCgiRmllbGRLaW5nIikNCiAgICBlbmQsDQp9KQ0KDQpEb3BhbWluZSA9IE1WUDpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiRG9wYW1pbmUiLA0KQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQpkb212cCgiRG9wYW1pbmUiKQ0KICAgIGVuZCwNCn0pDQpraW5nID0gTVZQOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJraW5nIiwNCkNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KZG9tdnAoImtpbmciKQ0KICAgIGVuZCwNCn0pDQoNCmV4cGxvc2lvbiA9IE1WUDpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiZXhwbG9zaW9uIiwNCkNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KZG9tdnAoImV4cGxvc2lvbiIpDQogICAgZW5kLA0KfSkNCmV4ZWN1dGVkQ2VsZWJyYXRpb24gPSBNVlA6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gImV4ZWN1dGVkQ2VsZWJyYXRpb24iLA0KQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQpkb212cCgiZXhlY3V0ZWRDZWxlYnJhdGlvbiIpDQogICAgZW5kLA0KfSkNCnUyMCA9IE1WUDpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAidTIwIiwNCkNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KZG9tdnAoInUyMCIpDQogICAgZW5kLA0KfSkNCmlzYWdpRGVtb24gPSBNVlA6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gImlzYWdpRGVtb24iLA0KQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQpkb212cCgiaXNhZ2lEZW1vbiIpDQogICAgZW5kLA0KfSkNCmlub01WUCA9IE1WUDpDcmVhdGVCdXR0b24oew0KICAgIE5hbWUgPSAiaW5vTXZwIiwNCkNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KZG9tdnAoImlub012cCIpDQogICAgZW5kLA0KfSkNCm5hZ2lNdnAgPSBNVlA6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIm5hZ2lNdnAiLA0KQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQpkb212cCgibmFnaU12cCIpDQogICAgZW5kLA0KfSkNCnJvbmFsZG9NdnAgPSBNVlA6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gInJvbmFsZG9NdnAiLA0KQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQpkb212cCgicm9uYWxkb012cCIpDQogICAgZW5kLA0KfSkNCg0KDQotLUNoaWdpcmkNCg0KDQoNCkNoaWdpcmlTZWMgPSBDaGlnaXJpOkNyZWF0ZVNlY3Rpb24oIlBpbmsgUGFudGhlci9LdW5pZ2FtaSdzIFdpZmUoamspIikNCg0KTWFjaCA9IENoaWdpcmk6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIk1hY2ggQ3V0LUluIiwNCkNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5jaGlnaXJpWyJNYWNoIGN1dCBpbiBkYXNoIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJjaGlnaXJpIikNCiAgICAgICAgICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICAgICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg4NDQ4MDMwNjU1MDA2Ig0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICAgICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgICAgIGVuZCkNCmxvY2FsIGNoYXIgPSBJbnN0YW5jZS5uZXcoIk9iamVjdFZhbHVlIix3b3Jrc3BhY2UpDQoNCmNoYXIuVmFsdWUgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXINCmxvY2FsIGJvb2xlYW4gPSBJbnN0YW5jZS5uZXcoIkJvb2xWYWx1ZSIsd29ya3NwYWNlKQ0KDQpsb2NhbCB2YXIgPSBJbnN0YW5jZS5uZXcoIk51bWJlclZhbHVlIix3b3Jrc3BhY2UpDQoNCnZhci5WYWx1ZSA9IDANCg0KICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIk1hY2hLaWNrIiwgZmxhZywge3tDaGFyYWN0ZXIgPSBjaGFyLExlZnQgPSBib29sZWFuLFZhcmlhbnQgPSB2YXJ9fSkNCiAgICAgICANCiAgICBlbmQsDQp9KQ0KDQpsb2NhbCBNYWNoYmluZCA9IENoaWdpcmk6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJNYWNoIEN1dC1JbiIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLCAgLS0gc3BhY2Uga2V5YmluZA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5jaGlnaXJpWyJNYWNoIGN1dCBpbiBkYXNoIl0sIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQpDQogICAgICAgICAgIA0KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImNoaWdpcmkiKQ0KICAgICAgICAgICAgICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICAgICAgICAgICAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly84ODQ0ODAzMDY1NTAwNiINCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICAgICAgICAgICAgICBodWg6UGxheSgpDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgICAgICAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHNoYXJlZC5iYWxsLlRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgICAgICAgICAgICAgZW5kKQ0KICAgIGxvY2FsIGNoYXIgPSBJbnN0YW5jZS5uZXcoIk9iamVjdFZhbHVlIix3b3Jrc3BhY2UpDQogICAgDQogICAgY2hhci5WYWx1ZSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlcg0KICAgIGxvY2FsIGJvb2xlYW4gPSBJbnN0YW5jZS5uZXcoIkJvb2xWYWx1ZSIsd29ya3NwYWNlKQ0KICAgIA0KICAgIGxvY2FsIHZhciA9IEluc3RhbmNlLm5ldygiTnVtYmVyVmFsdWUiLHdvcmtzcGFjZSkNCiAgICANCiAgICB2YXIuVmFsdWUgPSAwDQogICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJNYWNoS2ljayIsIGZsYWcsIHt7Q2hhcmFjdGVyID0gY2hhcixMZWZ0ID0gYm9vbGVhbixWYXJpYW50ID0gdmFyfX0pDQogICAgICAgDQogICAgZW5kLA0KfSkNCk1hY2ggPSBDaGlnaXJpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJTZWxmIFBhc3MiLA0KQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgdjAucGxheShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVzb3VyY2VzLmNoaWdpcmkuU2VsZlBhc3NEYXNoLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0KQ0KICAgICAgICAgICANCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImNoaWdpcmkiKQ0KICAgICAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgICAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vODQwODM3ODIzNzgwNDkiDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgICAgICAgICAgaHVoOlBsYXkoKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBJbnN0YW5jZS5uZXcoIk9iamVjdFZhbHVlIix3b3Jrc3BhY2UpDQogICAgICAgICAgICAgICAgY2hhci5WYWx1ZSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlcg0KICAgICAgICAgICAgICAgIGxvY2FsIHZhciA9IEluc3RhbmNlLm5ldygiTnVtYmVyVmFsdWUiLHdvcmtzcGFjZSkNCiAgICAgICAgICAgICAgICB2YXIuVmFsdWUgPSAwDQogICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJDaGlnaXJpUGFzc0tpY2siLCBmbGFnLCB7e0NoYXJhY3RlciA9IGNoYXIsIFZhcmlhbnQgPSB2YXJ9fSkNCiAgICAgICANCndhaXQoMC4xKQ0KdmFyLlZhbHVlID0gMQ0KICAgIGVuZCwNCn0pDQoNCmxvY2FsIE1hY2hiaW5kID0gQ2hpZ2lyaTpDcmVhdGVLZXliaW5kKHsNCiAgICBOYW1lID0gIlNlbGYgUGFzcyIsDQogICAgQ3VycmVudEtleWJpbmQgPSAiTWludXMiLCAgLS0gc3BhY2Uga2V5YmluZA0KICAgIEhvbGRUb0ludGVyYWN0ID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIHYwLnBsYXkoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlc291cmNlcy5jaGlnaXJpLlNlbGZQYXNzRGFzaCwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCkNCiAgICAgICAgICAgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiY2hpZ2lyaSIpDQogICAgICAgICAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgICAgICAgICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzg0MDgzNzgyMzc4MDQ5Ig0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgICAgICAgICAgICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjaGFyID0gSW5zdGFuY2UubmV3KCJPYmplY3RWYWx1ZSIsd29ya3NwYWNlKQ0KICAgICAgICAgICAgICAgICAgICBjaGFyLlZhbHVlID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhciA9IEluc3RhbmNlLm5ldygiTnVtYmVyVmFsdWUiLHdvcmtzcGFjZSkNCiAgICAgICAgICAgICAgICAgICAgdmFyLlZhbHVlID0gMA0KICAgICAgICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgIkNoaWdpcmlQYXNzS2ljayIsIGZsYWcsIHt7Q2hhcmFjdGVyID0gY2hhciwgVmFyaWFudCA9IHZhcn19KQ0KICAgIHdhaXQoMC4xKQ0KICAgIHZhci5WYWx1ZSA9IDENCiAgICBlbmQsDQp9KQ0KTWFjaCA9IENoaWdpcmk6Q3JlYXRlQnV0dG9uKHsNCiAgICBOYW1lID0gIkF3YWtlbmluZyIsDQpDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJjaGlnaXJpIikNCiAgICAgICAgICAgICAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgICAgICAgICAgICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEwNDc0MTA3MTQ4MDQzNyINCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICAgICAgICAgICAgICBodWg6UGxheSgpDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICAgICAgICAgICAgICBzcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgd2FpdChodWguTGVuZ3RoKQ0KICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBlbmQpDQppZiBnZXRnZW52KCkuVXNlQXdrTXVzaWMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICBmaXJlRXZlbnQocGFja2V0VHlwZSwgImF3a011c2ljIiwgZmxhZywge2dhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVzb3VyY2VzLmNoaWdpcmlbIkNoaWdpcmlUaGVtZSJdLGZhbHNlLHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS53aWtpLnN0eWxlcykuZXhlLmNvbG9yfSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBJbnN0YW5jZS5uZXcoIk9iamVjdFZhbHVlIix3b3Jrc3BhY2UpDQogICAgICAgICAgICAgICAgY2hhci5WYWx1ZSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlcg0KICAgICAgICAgICAgICAgIGxvY2FsIHZhciA9IEluc3RhbmNlLm5ldygiTnVtYmVyVmFsdWUiLHdvcmtzcGFjZSkNCiAgICAgICAgICAgICAgICB2YXIuVmFsdWUgPSAwDQogICAgICAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiQ2hpZ2lyaUZsb3ciLCBmbGFnLCB7e0NoYXJhY3RlciA9IGNoYXIsIFZhcmlhbnQgPSB2YXJ9fSkNCg0KICAgIHZhci5WYWx1ZSA9IDENCiAgICBlbmQsDQp9KQ0KDQpsb2NhbCBNYWNoYmluZCA9IENoaWdpcmk6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJBd2FrZW5pbmciLA0KICAgIEN1cnJlbnRLZXliaW5kID0gIk1pbnVzIiwgIC0tIHNwYWNlIGtleWJpbmQNCiAgICBIb2xkVG9JbnRlcmFjdCA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICANCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI6U2V0QXR0cmlidXRlKCJzdHlsZSIsImNoaWdpcmkiKQ0KICAgICAgICAgICAgICAgIGFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpDQogICAgICAgICAgICAgICAgYW5pbS5BbmltYXRpb25JZCA9ICJyYnhhc3NldGlkOi8vMTA0NzQxMDcxNDgwNDM3Ig0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGh1aCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihhbmltKQ0KICAgICAgICAgICAgICAgIGh1aDpQbGF5KCkNCiAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGVuZCkNCmlmIGdldGdlbnYoKS5Vc2VBd2tNdXNpYyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiYXdrTXVzaWMiLCBmbGFnLCB7Z2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZXNvdXJjZXMuY2hpZ2lyaVsiQ2hpZ2lyaVRoZW1lIl0sZmFsc2UscmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLndpa2kuc3R5bGVzKS5leGUuY29sb3J9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgY2hhciA9IEluc3RhbmNlLm5ldygiT2JqZWN0VmFsdWUiLHdvcmtzcGFjZSkNCiAgICAgICAgICAgICAgICBjaGFyLlZhbHVlID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyDQogICAgICAgICAgICAgICAgbG9jYWwgdmFyID0gSW5zdGFuY2UubmV3KCJOdW1iZXJWYWx1ZSIsd29ya3NwYWNlKQ0KICAgICAgICAgICAgICAgIHZhci5WYWx1ZSA9IDANCiAgICAgICAgICAgICAgICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJDaGlnaXJpRmxvdyIsIGZsYWcsIHt7Q2hhcmFjdGVyID0gY2hhciwgVmFyaWFudCA9IHZhcn19KQ0KDQogICAgdmFyLlZhbHVlID0gMQ0KDQogICAgZW5kLA0KfSkNCk1hY2ggPSBDaGlnaXJpOkNyZWF0ZUJ1dHRvbih7DQogICAgTmFtZSA9ICJHb2xkZW4gWm9uZShISVQpIiwNCkNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOlNldEF0dHJpYnV0ZSgic3R5bGUiLCJjaGlnaXJpIikNCiAgICBhbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQ0KICAgIGFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLzEyMjg5NDcwOTAyOTE0NCINCiAgICANCiAgICBodWggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbSkNCiAgICBodWg6UGxheSgpDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IHRydWUNCiAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAwDQogICAgc3Bhd24oZnVuY3Rpb24oKQ0KICAgIHdhaXQoaHVoLkxlbmd0aCkNCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LkFuY2hvcmVkID0gZmFsc2UNCiAgICBzaGFyZWQuYmFsbC5UcmFuc3BhcmVuY3kgPSAxDQogIA0KICAgIGVuZCkNCiAgICBsb2NhbCB2YWwgPSBJbnN0YW5jZS5uZXcoIk51bWJlclZhbHVlIiwgd29ya3NwYWNlKQ0KDQoNCiAgICBsb2NhbCB2YWwyID0gSW5zdGFuY2UubmV3KCJPYmplY3RWYWx1ZSIsIHdvcmtzcGFjZSkNCiAgICB2YWwyLlZhbHVlID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlcg0KICAgICAgZmlyZUV2ZW50KHBhY2tldFR5cGUsICJDaGlnaXJpR29sZGVuWm9uZSIsIGZsYWcsIHt7Q2hhcmFjdGVyID0gdmFsMiwgVmFyaWFudCA9IHZhbH19KQ0KICANCiAgICB3YWl0KDAuMSkNCiAgICB2YWwuVmFsdWUgPSAyDQogICAgICAgICAgICAgICAgICANCiAgICBlbmQsDQp9KQ0KDQpsb2NhbCBNYWNoYmluZCA9IENoaWdpcmk6Q3JlYXRlS2V5YmluZCh7DQogICAgTmFtZSA9ICJHb2xkZW4gWm9uZShISVQpIiwNCiAgICBDdXJyZW50S2V5YmluZCA9ICJNaW51cyIsICAtLSBzcGFjZSBrZXliaW5kDQogICAgSG9sZFRvSW50ZXJhY3QgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgDQogICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpTZXRBdHRyaWJ1dGUoInN0eWxlIiwiY2hpZ2lyaSIpDQogICAgYW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikNCiAgICBhbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8xMjI4OTQ3MDkwMjkxNDQiDQogICAgDQogICAgaHVoID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpMb2FkQW5pbWF0aW9uKGFuaW0pDQogICAgaHVoOlBsYXkoKQ0KICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuQW5jaG9yZWQgPSB0cnVlDQogICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMA0KICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICB3YWl0KGh1aC5MZW5ndGgpDQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5BbmNob3JlZCA9IGZhbHNlDQogICAgc2hhcmVkLmJhbGwuVHJhbnNwYXJlbmN5ID0gMQ0KICANCiAgICBlbmQpDQogICAgbG9jYWwgdmFsID0gSW5zdGFuY2UubmV3KCJOdW1iZXJWYWx1ZSIsIHdvcmtzcGFjZSkNCg0KDQogICAgbG9jYWwgdmFsMiA9IEluc3RhbmNlLm5ldygiT2JqZWN0VmFsdWUiLCB3b3Jrc3BhY2UpDQogICAgdmFsMi5WYWx1ZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXINCiAgICAgIGZpcmVFdmVudChwYWNrZXRUeXBlLCAiQ2hpZ2lyaUdvbGRlblpvbmUiLCBmbGFnLCB7e0NoYXJhY3RlciA9IHZhbDIsIFZhcmlhbnQgPSB2YWx9fSkNCiAgDQogICAgd2FpdCgwLjEpDQogICAgdmFsLlZhbHVlID0gMg0KICAgIGVuZCwNCn0p]]

local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
local function decode(data)
    data = string.gsub(data, '%s', '')
    data = string.gsub(data, '[^'..b..'=]', '')
    return (data:gsub('.', function(x)
        if x == '=' then return '' end
        local r,f='', (string.find(b, x) - 1)
        for i=6,1,-1 do
            r = r .. (f%2^i - f%2^(i-1) > 0 and '1' or '0')
        end
        return r
    end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(byte)
        if #byte ~= 8 then return '' end
        local c = 0
        for i = 1,8 do
            c = c + (byte:sub(i,i) == '1' and 2^(8-i) or 0)
        end
        return string.char(c)
    end))
end

local ok, decoded = pcall(function() return decode(b64) end)
if not ok then
    error("Failed to decode payload")
end

local f, err = loadstring(decoded)
if not f then
    error("loadstring failed: "..tostring(err))
end
-- Execute in protected call
local status, res = pcall(f)
if not status then
    error("payload execution error: " .. tostring(res))
end
